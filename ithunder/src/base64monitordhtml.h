#ifndef _BASE64_HTML_H
#define _BASE64_HTML_H
static const char *html_code_base64 = "PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPgogICAgPGhlYWQ+CiAgICA8dGl0bGU+6YeH6ZuG57O757uf55uR5o6n566h55CGPC90aXRsZT4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ij4KICAgIDxzdHlsZT4KICAgICAgICBib2R5LklFX003LCBib2R5LklFX004LCBib2R5LldpbjZ7Zm9udC1mYW1pbHk6IlNlZ29lIFVJIiwgVGFob21hLCBWZXJkYW5hLCBBcmlhbDt9CiAgICAgICAgYm9keS5TYWZhcml7bWluLXdpZHRoOjk4N3B4O30KICAgICAgICBib2R5LlNGX2lQaG9uZXstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6bm9uZTt9CiAgICAgICAgYm9keQogICAgICAgIHsKICAgICAgICAgICAgbWFyZ2luOjA7Zm9udC1mYW1pbHk6VGFob21hLCBWZXJkYW5hLCBBcmlhbDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRkZGRkYwOwogICAgICAgICAgICBjb2xvcjojMzMzOwogICAgICAgICAgICBmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgYm9yZGVyOjBweDsKICAgICAgICAgICAgd2lkdGg6MTAwJTsKICAgICAgICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgICAgfQogICAgICAgICAgICAjbWFpbmZyYW1lCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRkZGRkYwOwogICAgICAgICAgICAgICAgYm9yZGVyOjBweDsKICAgICAgICAgICAgICAgIHotaW5kZXg6MDsKICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAjaXRhYiB7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O21hcmdpbjowO3BhZGRpbmc6MDsKICAgICAgICAgICAgICAgIGhlaWdodDozNnB4OyB3aWR0aDoxMDAlO3RvcDowcHg7bGVmdDowcHg7Ym9yZGVyOjBweDtmb250LXNpemU6MTZwdDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgICAgICNpdGFiIHVse21hcmdpbjowO3BhZGRpbmc6MDtsaXN0LXN0eWxlOm5vbmU7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgICAgICNpdGFiIGxpe2Zsb2F0OmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7d2lkdGg6MTUwcHg7IGhlaWdodDozNnB4OwogICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICNjY2M7Zm9udC13ZWlnaHQ6Ym9sZGVyO3BhZGRpbmc6M3B4IDhweCAzcHggOHB4O30KICAgICAgICAgICAgI2l0YWIgLnRhYi1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y29sb3I6IzJGNUZBMTtib3JkZXItbGVmdDoxcHggc29saWQgI2NjYzsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OmJvbGRlcjtwYWRkaW5nOjNweCA4cHggM3B4IDhweDtoZWlnaHQ6MzZweDt9CiAgICAgICAgICAgICN0YXNraW5mb3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGRjA7IGNvbG9yOiMyRjVGQTE7ZGlzcGxheTpub25lOwogICAgICAgICAgICAgICAgYm9yZGVyLXRvcDoxcHggc29saWQgIzgxQkVGNzsgcGFkZGluZzowcHg7bGVmdDowcHg7dG9wOjM2cHg7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC5rdGFza3tmb250LXNpemU6MTJwdDtmb250LXdlaWdodDpib2xkO30KICAgICAgICAgICAgLnZ0YXNre2ZvbnQtc2l6ZToxMnB0O2ZvbnQtd2VpZ2h0OmJvbGQ7fQogICAgICAgICAgICAjZGF0YWJhc2V7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRkZGRkYwO2Rpc3BsYXk6bm9uZTtvdmVyZmxvdzphdXRvOwogICAgICAgICAgICAgICAgYm9yZGVyLXRvcDoxcHggc29saWQgIzgxQkVGNztwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30KICAgICAgICAgICAgLmRibGlzdHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjBweDsgYmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2hlaWdodDoxMDAlO30KICAgICAgICAgICAgLmRidGl0bGV7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7IGhlaWdodDozMHB4O30KICAgICAgICAgICAgI2Ric2VsZWN0e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzt3aWR0aDoxMDAlO30KICAgICAgICAgICAgI2RiZmllbGRzIC5kYmZpZWxkc3twb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGRjA7Y29sb3I6IzJGNUZBMTt9CiAgICAgICAgICAgIC5maWVsZC10aXRsZXtiYWNrZ3JvdW5kLWNvbG9yOiM2NjY2NjY7Y29sb3I6I0MwYzBjMDtoZWlnaHQ6MjJweDt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnVsdGFie2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC5sdGFibmFtZXtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MTJwdDt9CiAgICAgICAgICAgIC5sdGFie2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztjdXJzb3I6IHBvaW50ZXI7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC5sdGFiLXNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6I0ZGRkZGMDtjdXJzb3I6IHBvaW50ZXI7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC5sZm5hbWV7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgLmxmaWVsZHtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGRjA7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgLmxmaWVsZC1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgI2RiZmllbGRmb3Jte3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjU2MHB4O2hlaWdodDo1MHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsKICAgICAgICAgICAgICAgIGJvcmRlcjoxcHggc29saWQgIzgxQkVGNztwYWRkaW5nLXRvcDoxMHB4O3BhZGRpbmctbGVmdDo2cHg7Zm9udC1zaXplOjEycHQ7CiAgICAgICAgICAgICAgICBjb2xvcjojMkY1RkExO3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bztkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAjdGVtcGxhdGV7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRkZGRkYwO2Rpc3BsYXk6bm9uZTtvdmVyZmxvdzphdXRvOwogICAgICAgICAgICAgICAgYm9yZGVyLXRvcDoxcHggc29saWQgIzgxQkVGNztwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnRlbXBsYXRlLXRhYntoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnRyZWV0YWJ7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2hlaWdodDoxMDAlO21hcmdpbjphdXRvO3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bzt9CiAgICAgICAgICAgICN0cmVlLXRpdGxle2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojYzBjMGMwO2ZvbnQtc2l6ZToxM3B0OwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6Ym9sZDtoZWlnaHQ6MzBweDt3aWR0aDoxMDAlO30KICAgICAgICAgICAgI3RyZWVib2R5e3Bvc2l0aW9uOnJlbGF0aXZlO2NvbG9yOiMwMDAwMDA7d2lkdGg6MTAwJTtvdmVyZmxvdzphdXRvfQogICAgICAgICAgICAudHJlZWxpbmV7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyOjBweDtmb250LXNpemU6MTJwdDtmb250LXdlaWdodDpib2xkO30KICAgICAgICAgICAgLnRpdGxle3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLmJ0aXRsZXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGRjA7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgICN0ZW1wbGF0ZS10aXRsZXtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2MwYzBjMDtmb250LXNpemU6MTNwdDsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OmJvbGQ7aGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgICNub2RlLXRlbXBsYXRle3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzsKICAgICAgICAgICAgICAgIGJvcmRlcjowcHggc29saWQgI2ZmZmZmZjtwYWRkaW5nOjBweDtjb2xvcjojMkY1RkExO30KICAgICAgICAgICAgLnRlbXBsYXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7fQogICAgICAgICAgICAubHRlbXBsYXRle2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzt9CiAgICAgICAgICAgIC5sdGVtcGxhdGUtaGx7YmFja2dyb3VuZC1jb2xvcjojRkZGRkYwO30KICAgICAgICAgICAgI3R4dGZvcm17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MjkwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmZmZmOwogICAgICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MTBweDt6LWluZGV4Ojk5O292ZXJmbG93OmF1dG87ZGlzcGxheTpub25lO30KICAgICAgICAgICAgI2RiZm9ybXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoyOTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmY7CiAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICM4MUJFRjc7cGFkZGluZzoxMHB4O3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bztkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAjdGFibGV2aWV3e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0KICAgICAgICAgICAgI2RiZWRpdGZvcm17cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjY2NjY2M7CiAgICAgICAgICAgICAgICBoZWlnaHQ6MzBweDt3aWR0aDoxMDAlO2JvcmRlcjowcHggc29saWQgI0ZGRkZGRjt9CiAgICAgICAgICAgICN4dGVtcGxhdGVmb3Jte3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJTsKICAgICAgICAgICAgICAgIGJvcmRlcjowcHggc29saWQgIzgxQkVGNztwYWRkaW5nOjBweDtmb250LXNpemU6MTJwdDtjb2xvcjojMkY1RkExO30KICAgICAgICAgICAgI3VybGZvcm17cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O30KICAgICAgICAgICAgI3NvdXJjZV9jb2RlX29we2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgICAgICN0ZW1wbGF0ZWRpdntkaXNwbGF5Om5vbmU7cG9zaXRpb246cmVsYXRpdmU7fQogICAgICAgICAgICAudGVtcGxhdGUtYmFye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtoZWlnaHQ6MzBweDsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6c2lsdmVyO30KICAgICAgICAgICAgI2VkaXRvci1mcmFtZXtoZWlnaHQ6MTgwcHg7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICMwMDAwMDA7b3ZlcmZsb3c6YXV0bzt9CiAgICAgICAgICAgICN0ZW1wbGF0ZS1jb25maWd7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O3otaW5kZXg6OTk7CiAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICNjMGMwYzA7cGFkZGluZzowcHg7Zm9udC1zaXplOjEycHQ7Y29sb3I6IzJGNUZBMTtoZWlnaHQ6NTUwcHg7fQogICAgICAgICAgICAjdGVtcGxhdGUtY29uZmlnLWJsb2Nre3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7aGVpZ2h0OjUyMHB4O292ZXJmbG93OmF1dG87fQogICAgICAgICAgICAjdGVtcGxhdGUtdGVzdHtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7IGJvcmRlcjoxcHggc29saWQgI2MwYzBjMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6MHB4O2hlaWdodDo1NTBweDtmb250LXNpemU6MTJwdDtjb2xvcjojMkY1RkExO3otaW5kZXg6OTk7fQogICAgICAgICAgICAjdGVtcGxhdGUtbWF0Y2hlc3twb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6NTIwcHg7b3ZlcmZsb3c6YXV0bzt9CiAgICAgICAgICAgICN0ZW1wbGF0ZS10ZXN0LWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7aGVpZ2h0OjMwcHg7CiAgICAgICAgICAgICAgICBmb250LXNpemU6MTRwdDtjb2xvcjpyZWQ7Zm9udC13ZWlnaHQ6Ym9sZDt9CiAgICAgICAgICAgICN0ZW1wbGF0ZS12aWV3ZXJ7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3OwogICAgICAgICAgICAgICAgYm9yZGVyOjBweCBzb2xpZCAjMDAwMDAwO3dpZHRoOjEwMCU7aGVpZ2h0OjUwMHB4OwogICAgICAgICAgICAgICAgZm9udC1zaXplOjEycHQ7Y29sb3I6IzJGNUZBMTt9CiAgICAgICAgICAgIC5jdHh0X2Jsb2Nre3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6c2lsdmVyO2JvcmRlcjoxcHggc29saWQgIzAwMDAwMDt9CiAgICAgICAgICAgIC5jbG9zZWJ1dHRvbntmb250LXNpemU6MTRwdDtmb250LXdlaWdodDpib2xkO2NvbG9yOnJlZDsKICAgICAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO2Rpc3BsYXk6aW5saW5lO3RleHQtYWxpZ246cmlnaHQ7fQogICAgICAgICAgICAuY2xvc2V0eHR7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEwcHQ7Y29sb3I6I2NjY2NjYzt0ZXh0LWFsaWduOnJpZ2h0O30KICAgICAgICAgICAgI3VybGJsb2Nre3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkZGMDtkaXNwbGF5Om5vbmU7b3ZlcmZsb3c6YXV0bzsKICAgICAgICAgICAgICAgIGJvcmRlci10b3A6MXB4IHNvbGlkICM4MUJFRjc7cGFkZGluZzowcHg7bGVmdDowcHg7dG9wOjM2cHg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt9CiAgICAgICAgICAgICN1cmwtaGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojY2NjY2NjOwogICAgICAgICAgICAgICAgaGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICNGRkZGRkY7fQogICAgICAgICAgICAudXJsLXVse2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC51cmwtbGl7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLnVybC1saS13YXJue2JhY2tncm91bmQtY29sb3I6I0ZGODAwMDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgICAgIC51cmwtbGktc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRkZGRkYwO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLnVybGxpLWhlYWRlcntsaXN0LXN0eWxlOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2ZvbnQtd2VpZ2h0OmJvbGQ7CiAgICAgICAgICAgICAgICBmb250LXNpemU6MTRwdDtjb2xvcjojYzBjMGMwO30KICAgICAgICAgICAgLnVybC1saS1wYWdle2NvbG9yOiNjY2NjNzA7Zm9udC13ZWlnaHQ6Ym9sZDtmb250LXNpemU6MTNwdDt9CiAgICAgICAgICAgICN1cmxsaXN0LWZvcm17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NzIwcHg7aGVpZ2h0OjE1MHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsKICAgICAgICAgICAgICAgIGJvcmRlcjoxcHggc29saWQgIzgxQkVGNztwYWRkaW5nLXRvcDoxMHB4O3BhZGRpbmctbGVmdDo2cHg7Zm9udC1zaXplOjEycHQ7CiAgICAgICAgICAgICAgICBjb2xvcjojMkY1RkExO3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bztkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAjcmVjb3JkLXZpZXd7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3OyB6LWluZGV4Ojk5OwogICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCAjMDAwMDAwO3BhZGRpbmc6MHB4O2hlaWdodDo1NTBweDtmb250LXNpemU6MTJwdDtjb2xvcjojMkY1RkExO30KICAgICAgICAgICAgI3JlY29yZC1yZXN7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjUyMHB4O292ZXJmbG93OmF1dG87fQogICAgICAgICAgICAjcmVjb3JkLWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7aGVpZ2h0OjMwcHg7CiAgICAgICAgICAgICAgICBmb250LXNpemU6MTRwdDtjb2xvcjpyZWQ7Zm9udC13ZWlnaHQ6Ym9sZDt9CiAgICAgICAgICAgIC5yZWNvcmQtdGl0bGV7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2hlaWdodDoyMHB4OwogICAgICAgICAgICAgICAgZm9udC1zaXplOjE0cHQ7Y29sb3I6I2NjY2NjYztmb250LXdlaWdodDpib2xkO3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXJ9CiAgICAgICAgICAgICNkYXRhe3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkZGMDtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjZG5ze3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkZGMDtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjZG5zLWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2NjY2NjYzsKICAgICAgICAgICAgICAgIGhlaWdodDozMHB4O3dpZHRoOjEwMCU7Ym9yZGVyOjFweCBzb2xpZCAjRkZGRkZGO30KICAgICAgICAgICAgI2Rucy1saXN0e3Bvc2l0aW9uOnJlbGF0aXZlO30KICAgICAgICAgICAgLmRucy11bHtsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO30KICAgICAgICAgICAgLmRucy1saXtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgLmRucy1saS1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGRjA7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgI3Byb3h5e3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkZGMDtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjcHJveHktaGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojY2NjY2NjOwogICAgICAgICAgICAgICAgaGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICNGRkZGRkY7fQogICAgICAgICAgICAjcHJveHktbGlzdHtwb3NpdGlvbjpyZWxhdGl2ZTt9CiAgICAgICAgICAgIC5wcm94eS11bHtsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO30KICAgICAgICAgICAgLnByb3h5LWxpe2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAucHJveHktbGktc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRkZGRkYwO2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgICAgICN1c2Vye3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzsgY29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3OyBwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLmxpc3Rmb3Jte21hcmdpbjowcHg7ZGlzcGxheTogaW5saW5lO30KICAgICAgICAgICAgLm5vZGV7ei1pbmRleDo5OTtvdmVyZmxvdzpoaWRkZW47Y29sb3I6YmxhY2s7Zm9udC1zaXplOjEycHQ7fQogICAgICAgICAgICAubm9kZW5hbWV7Y29sb3I6YmxhY2s7Zm9udC1zaXplOjEycHQ7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuZWFkZHtjb2xvcjojNUZCNDA0O2ZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgICAgIC5ldXBkYXRle2NvbG9yOiNGRjgwMDA7Zm9udC1zaXplOjEzcHQ7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLmVkZWxldGV7Y29sb3I6I0I0MDQ1Rjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuZXZpZXd7Y29sb3I6IzAwMDBmZjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuaWNvbntkaXNwbGF5OmlubGluZTtjb2xvcjojRkY4MDAwO2ZvbnQtc2l6ZToxM3B0O3RleHQtYWxpZ246Y2VudGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLm5jaGlsZHN7ZGlzcGxheTppbmxpbmU7Y29sb3I6cmVkO2ZvbnQtc2l6ZToxMnB0O30KICAgICAgICAgICAgI2JmcmFtZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjE7ZGlzcGxheTpub25lO2JvcmRlcjowfQogICAgICAgIDwvc3R5bGU+CiAgICA8c2NyaXB0IGxhbmd1YWdlPSdqYXZhc2NyaXB0Jz4KICAgICAgICAgICAgdmFyIGNocmFkZCA9ICfinJonLCBjaHJmb2xkID0gJ+KWuicsIGNocnRyZWUgPSAn4pa8JywgY2hyZWRpdD0n4pyOJywgY2hyZGVsPSfinJgnLCBjaHJ2aWV3ID0gJ+KYnCAnOwogICAgICAgICAgICB2YXIgb1RpbWVyID0gbnVsbDsKICAgICAgICAgICAgdmFyIGJhc2U2NEVuY29kZUNoYXJzID0gCiAgICAgICAgICAgICAgICAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgICAgICAgICAgIHZhciBpbmRleF90eXBlcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgaW5kZXhfdHlwZXNbJ3RleHRfaW5kZXgnXSA9ICfmlofmnKzntKLlvJXlrZfmrrUnOwogICAgICAgICAgICAgICAgaW5kZXhfdHlwZXNbJ2ludF9pbmRleCddID0gJ2ludOe0ouW8leWtl+autSc7CiAgICAgICAgICAgICAgICBpbmRleF90eXBlc1snbG9uZ19pbmRleCddID0gJ2xvbmfntKLlvJXlrZfmrrUnOwogICAgICAgICAgICAgICAgaW5kZXhfdHlwZXNbJ2RvdWJsZV9pbmRleCddID0gJ2RvdWJsZee0ouW8leWtl+autSc7CiAgICAgICAgICAgICAgICBpbmRleF90eXBlc1snZGlzcGxheSddID0gJ+mdnue0ouW8leWtl+autSc7CiAgICAgICAgICAgIHZhciBiYXNlNjREZWNvZGVDaGFycyA9IG5ldyBBcnJheSgKICAgICAgICAgICAgICAgIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAgICAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsCiAgICAgICAgICAgICAgICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIDYyLCAtMSwgLTEsIC0xLCA2MywKICAgICAgICAgICAgICAgIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDU4LCA1OSwgNjAsIDYxLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAgICAgLTEsICAwLCAgMSwgIDIsICAzLCAgNCwgIDUsICA2LCAgNywgIDgsICA5LCAxMCwgMTEsIDEyLCAxMywgMTQsCiAgICAgICAgICAgICAgICAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNCwgMjUsIC0xLCAtMSwgLTEsIC0xLCAtMSwKICAgICAgICAgICAgICAgIC0xLCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzMiwgMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLAogICAgICAgICAgICAgICAgNDEsIDQyLCA0MywgNDQsIDQ1LCA0NiwgNDcsIDQ4LCA0OSwgNTAsIDUxLCAtMSwgLTEsIC0xLCAtMSwgLTEpOwogICAgICAgICAgICBmdW5jdGlvbiBiYXNlNjRlbmNvZGUoc3RyKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG91dCwgaSwgbGVuOwogICAgICAgICAgICAgICAgdmFyIGMxLCBjMiwgYzM7CgogICAgICAgICAgICAgICAgbGVuID0gc3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgb3V0ID0gIiI7CiAgICAgICAgICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgYzEgPSBzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZjsKICAgICAgICAgICAgICAgICAgICBpZihpID09IGxlbikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoYzEgPj4gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKGMxICYgMHgzKSA8PCA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9ICI9PSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgICAgICAgICAgaWYoaSA9PSBsZW4pCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMxID4+IDIpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KCgoYzEgJiAweDMpPDwgNCkgfCAoKGMyICYgMHhGMCkgPj4gNCkpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KChjMiAmIDB4RikgPDwgMik7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSAiPSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjMyA9IHN0ci5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdChjMSA+PiAyKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KCgoYzEgJiAweDMpPDwgNCkgfCAoKGMyICYgMHhGMCkgPj4gNCkpOwogICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMiAmIDB4RikgPDwgMikgfCAoKGMzICYgMHhDMCkgPj42KSk7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdChjMyAmIDB4M0YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBiYXNlNjRkZWNvZGUoc3RyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgYzEsIGMyLCBjMywgYzQ7CiAgICAgICAgICAgICAgICB2YXIgaSwgbGVuLCBvdXQ7CgogICAgICAgICAgICAgICAgbGVuID0gc3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgb3V0ID0gIiI7CiAgICAgICAgICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgLyogYzEgKi8KICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMxID0gYmFzZTY0RGVjb2RlQ2hhcnNbc3RyLmNoYXJDb2RlQXQoaSsrKSAmIDB4ZmZdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjMSA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzEgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIC8qIGMyICovCiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBjMiA9IGJhc2U2NERlY29kZUNoYXJzW3N0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmXTsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlKGkgPCBsZW4gJiYgYzIgPT0gLTEpOwogICAgICAgICAgICAgICAgICAgIGlmKGMyID09IC0xKQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYzEgPDwgMikgfCAoKGMyICYgMHgzMCkgPj4gNCkpOwoKICAgICAgICAgICAgICAgICAgICAvKiBjMyAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSBzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYzMgPT0gNjEpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGMzID0gYmFzZTY0RGVjb2RlQ2hhcnNbYzNdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjMyA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzMgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzIgJiAwWEYpIDw8IDQpIHwgKChjMyAmIDB4M0MpID4+IDIpKTsKCiAgICAgICAgICAgICAgICAgICAgLyogYzQgKi8KICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGM0ID0gc3RyLmNoYXJDb2RlQXQoaSsrKSAmIDB4ZmY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGM0ID09IDYxKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICAgICAgICAgICAgICBjNCA9IGJhc2U2NERlY29kZUNoYXJzW2M0XTsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlKGkgPCBsZW4gJiYgYzQgPT0gLTEpOwogICAgICAgICAgICAgICAgICAgIGlmKGM0ID09IC0xKQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzMgJiAweDAzKSA8PCA2KSB8IGM0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdXRmMTZ0bzgoc3RyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb3V0LCBpLCBsZW4sIGM7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7CiAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKGMgPj0gMHgwMDAxKSAmJiAoYyA8PSAweDAwN0YpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBzdHIuY2hhckF0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPiAweDA3RkYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFMCB8ICgoYyA+PiAxMikgJiAweDBGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCAoKGMgPj4gIDYpICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDgwIHwgKChjID4+ICAwKSAmIDB4M0YpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhDMCB8ICgoYyA+PiAgNikgJiAweDFGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCAoKGMgPj4gIDApICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdXRmOHRvMTYoc3RyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb3V0LCBpLCBsZW4sIGM7CiAgICAgICAgICAgICAgICB2YXIgY2hhcjIsIGNoYXIzOwogICAgICAgICAgICAgICAgb3V0ID0gIiI7CiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGMgPj4gNCkKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogY2FzZSAyOiBjYXNlIDM6IGNhc2UgNDogY2FzZSA1OiBjYXNlIDY6IGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMHh4eHh4eHgKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IHN0ci5jaGFyQXQoaS0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6IGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDExMHggeHh4eCAgIDEweHggeHh4eAogICAgICAgICAgICAgICAgICAgICAgICBjaGFyMiA9IHN0ci5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDB4MUYpIDw8IDYpIHwgKGNoYXIyICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTExMCB4eHh4ICAxMHh4IHh4eHggIDEweHggeHh4eAogICAgICAgICAgICAgICAgICAgICAgICBjaGFyMiA9IHN0ci5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIzID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgwRikgPDwgMTIpIHwKICAgICAgICAgICAgICAgICAgICAgICAgKChjaGFyMiAmIDB4M0YpIDw8IDYpIHwKICAgICAgICAgICAgICAgICAgICAgICAgKChjaGFyMyAmIDB4M0YpIDw8IDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc3RhcnRfd2FpdCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ3dhaXQnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG92ZXJfd2FpdCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2F1dG8nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NHN0cmRlY29kZShzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRmOHRvMTYoYmFzZTY0ZGVjb2RlKHN0cikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRyaW0oc3RyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyheXHMrfFxzKyQpLywgIiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGhpZ2hsaWdodChvYmopCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG9iai5jbGFzc05hbWUgPSAiYnRpdGxlIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBiYWNrY3NzKG9iaikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb2JqLmNsYXNzTmFtZSA9ICJ0aXRsZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3ZlckJGcmFtZShlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgYmZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JmcmFtZScpOwogICAgICAgICAgICAgICAgaWYoYmZyYW1lKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGJmcmFtZS5zdHlsZS5sZWZ0ID0gZWxlbWVudC5vZmZzZXRMZWZ0KyJweCI7CiAgICAgICAgICAgICAgICAgICAgYmZyYW1lLnN0eWxlLnRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wKyJweCI7CiAgICAgICAgICAgICAgICAgICAgYmZyYW1lLnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCsicHgiOwogICAgICAgICAgICAgICAgICAgIGJmcmFtZS5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCsicHgiOwogICAgICAgICAgICAgICAgICAgIGJmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGlkZUJGcmFtZSgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBiZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmZyYW1lJyk7CiAgICAgICAgICAgICAgICBiZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KF9lbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgX3BhcmVudEVsZW1lbnQgPSBfZWxlbWVudC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgaWYoX3BhcmVudEVsZW1lbnQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgX3BhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoX2VsZW1lbnQpOyAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaGlkZUJGcmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIENyZWF0ZVhNTEhUVFAoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1saHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB4bWxodHRwT2JqID0gWyJNU1hNTDIuWG1sSHR0cC41LjAiLCJNU1hNTDIuWG1sSHR0cC40LjAiLAogICAgICAgICAgICAgICAgIk1TWE1MMi5YbWxIdHRwLjMuMCIsIk1TWE1MMi5YbWxIdHRwIiwiTWljcm9zb2Z0LlhtbEh0dHAiXTsKICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKHdpbmRvdy5BY3RpdmVYT2JqZWN0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZvcihpPTA7aTx4bWxodHRwT2JqLmxlbmd0aDtpKyspICAgIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e3htbGh0dHAgPSBuZXcgQWN0aXZlWE9iamVjdCh4bWxodHRwT2JqW2ldKTticmVhazt9CiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKGUpe3htbGh0dHAgPSBudWxsO30KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDYW4gbm90IGNyZWF0ZSBYTUxIVFRQIE9iamVjdCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHhtbGh0dHA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVidWlsZENoaWxkKG9QYXJlbnQsIHBpZCwgaWQsIG5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKG9QYXJlbnQgJiYgcGFyc2VJbnQoaWQpID4gMCAmJiBuYW1lKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBzdHJjaGlsZHMgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnY2hpbGRzJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBOYW1lID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ1VOYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYoc3RyY2hpbGRzKSBjaGlsZHMgPSBldmFsKHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBjaGlsZHMgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICBjaGlsZHNbaWRdID0gbmFtZTsKICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgPSAiKHsiOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggIT0gcGlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyY2hpbGRzICs9IHgrIjonIitjaGlsZHNbeF0rIicsIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0gcGlkKyI6JyIrcE5hbWUrIid9KSI7CiAgICAgICAgICAgICAgICAgICAgb1BhcmVudC5zZXRBdHRyaWJ1dGUoJ2NoaWxkcycsIHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGQob1BhcmVudCwgcGlkLCBpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYob1BhcmVudCAmJiBwYXJzZUludChpZCkgPiAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBzdHJjaGlsZHMgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnY2hpbGRzJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBOYW1lID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ1VOYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYoc3RyY2hpbGRzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRzID0gZXZhbChzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHNbaWRdID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmNoaWxkcyA9ICIoeyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCAhPSBwaWQgJiYgY2hpbGRzW3hdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0geCsiOiciK2NoaWxkc1t4XSsiJywiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyY2hpbGRzICs9IHBpZCsiOiciK3BOYW1lKyInfSkiOwogICAgICAgICAgICAgICAgICAgICAgICBvUGFyZW50LnNldEF0dHJpYnV0ZSgnY2hpbGRzJywgc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQWRkTm9kZShwaWQsIGlkLCBuYW1lLCBjb3VudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5vZGUiK2lkKSAhPSBudWxsKSByZXR1cm47CiAgICAgICAgICAgICAgICAvL2FsZXJ0KCJwaWQ6IitwaWQrImlkOiIraWQrIm5hbWU6IituYW1lKTsKICAgICAgICAgICAgICAgIHZhciBvUGFyZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKHBpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9QYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9kZSIrcGlkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvUGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVib2R5Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2FsZXJ0KHBpZCsnOicraWQrJzonK25hbWUpOwogICAgICAgICAgICAgICAgaWYob1BhcmVudCA9PSBudWxsKSByZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgb05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IG9QYXJlbnQuZ2V0QXR0cmlidXRlKCdsZXZlbCcpICogMTsKICAgICAgICAgICAgICAgIHZhciBuY2hpbGRzID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ25jaGlsZHMnKSAqIDE7CiAgICAgICAgICAgICAgICBvUGFyZW50LnNldEF0dHJpYnV0ZSgnbmNoaWxkcycsIG5jaGlsZHMgKyAxKTsKICAgICAgICAgICAgICAgIGlmKHBpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBzdHJjaGlsZHMgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnY2hpbGRzJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBOYW1lID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ1VOYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYoc3RyY2hpbGRzKSBjaGlsZHMgPSBldmFsKHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBjaGlsZHMgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICBjaGlsZHNbaWRdID0gbmFtZTsKICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgPSAiKHsiOwogICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGNoaWxkcykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggIT0gcGlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyY2hpbGRzICs9IHgrIjonIitjaGlsZHNbeF0rIicsIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3RyY2hpbGRzICs9IHBpZCsiOiciK3BOYW1lKyInfSkiOwogICAgICAgICAgICAgICAgICAgIG9QYXJlbnQuc2V0QXR0cmlidXRlKCdjaGlsZHMnLCBzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG9mb2xkID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKChvZm9sZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkXycrcGlkKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYobmNoaWxkcyA9PSAwKSBvZm9sZC5pbm5lckhUTUwgPSBjaHJ0cmVlOyAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBvbmNoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZigob25jaGlsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hfJytwaWQpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvbmNoaWxkcy5pbm5lckhUTUwgPSBuY2hpbGRzKzE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvTm9kZS5pZCA9ICJub2RlIiArIGlkOwogICAgICAgICAgICAgICAgb05vZGUuY2xhc3NOYW1lID0gJ25vZGUnOwogICAgICAgICAgICAgICAgb05vZGUuc2V0QXR0cmlidXRlKCdsZXZlbCcsIGxldmVsICsgMSk7CiAgICAgICAgICAgICAgICBvTm9kZS5zZXRBdHRyaWJ1dGUoJ25jaGlsZHMnLCAwKTsKICAgICAgICAgICAgICAgIG9Ob2RlLnNldEF0dHJpYnV0ZSgncGFyZW50JywgcGlkKTsKICAgICAgICAgICAgICAgIG9Ob2RlLnNldEF0dHJpYnV0ZSgnVUlEJywgaWQpOwogICAgICAgICAgICAgICAgb05vZGUuc2V0QXR0cmlidXRlKCdVTmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgaHRtbHN0ciA9ICI8ZGl2IGlkPSd0aXRsZV8iKyBpZCArIicgY2xhc3M9J3RpdGxlJyAiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ2J0aXRsZScpO1wiICI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW91dD1cIm91dERpdih0aGlzLCAndGl0bGUnKTtcIj4iOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3RyZWVsaW5lJz4iOwogICAgICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgKGxldmVsLTEpOyBpKyspCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGxldmVsID4gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApCiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gaWQ9J2ZvbGRfIisgaWQgKyInIGNsYXNzPSdpY29uJyBvbmNsaWNrPSdGb2xkKHRoaXMpJz4iK2NocmFkZCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gaWQ9J2ZvbGRfIisgaWQgKyInIGNsYXNzPSdpY29uJyBvbmNsaWNrPSdGb2xkKHRoaXMpJz4iK2NocmZvbGQrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGlkPSduZF8iK2lkKyInIGNsYXNzPSdub2RlbmFtZScgdGl0bGU9J+eCueWHu+i/m+WFpeaooeeJiOeuoeeQhiciOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9uY2xpY2s9J1ZpZXdUZW1wbGF0ZXMoIitpZCsiKScgPiIrbmFtZSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJbPHNwYW4gaWQ9J2NoXyIrIGlkICsiJyBjbGFzcz0nbmNoaWxkcycgPiIrY291bnQrIjwvc3Bhbj5dIjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWFkZCcgdGl0bGU9J0FkZCcgIjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9J1hBZGQoZXZlbnQpJz4iK2NocmFkZCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2V1cGRhdGUnIHRpdGxlPSdSZW5hbWUnICI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPSdYRWRpdChldmVudCknPiIrY2hyZWRpdCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2VkZWxldGUnIHRpdGxlPSdEZWxldGUnICI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPSdYRGVsZXRlKCIraWQrIiwiK3BpZCsiKSc+IitjaHJkZWwrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvZGl2PiI7CiAgICAgICAgICAgICAgICBvTm9kZS5pbm5lckhUTUwgPSBodG1sc3RyOyAKICAgICAgICAgICAgICAgIG9QYXJlbnQuYXBwZW5kQ2hpbGQob05vZGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIEhpZGRlbkVkaXRvcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZU5vZGUoaWQsIG5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlJytpZCk7CiAgICAgICAgICAgICAgICBpZihvTm9kZSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9Ob2RlLnNldEF0dHJpYnV0ZSgnVU5hbWUnLCBuYW1lKTsKICAgICAgICAgICAgICAgICAgICB2YXIgb05hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmRfJytpZCk7CiAgICAgICAgICAgICAgICAgICAgaWYob05hbWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9OYW1lLmlubmVySFRNTCA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIEhpZGRlbkVkaXRvcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RDaGlsZHMocGFyZW50LCB1cmwsIGFyZ3YpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpOwogICAgICAgICAgICAgICAgaWYoeG1sSHR0cCAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG5vZGUgPSBldmFsKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0bm9kZVsnaWQnXSA9PSBwYXJlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IHRub2RlWyduY2hpbGRzJ107IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkTm9kZShwYXJlbnQsIHRub2RlWydjaGlsZHMnXVtpXVsnaWQnXSAqIDEsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG5vZGVbJ2NoaWxkcyddW2ldWyduYW1lJ10sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG5vZGVbJ2NoaWxkcyddW2ldWyduY2hpbGRzJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5FZGl0b3IoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2Nsb3NlIGZvcm0KICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2VUaGlzKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0FkZCBjaGlsZAogICAgICAgICAgICBmdW5jdGlvbiBYQWRkKGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgdmFyIFhkaXYgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInR4dGZvcm0iKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbImVkaXRvcmZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAnbm9kZV9hZGQnOwogICAgICAgICAgICAgICAgZm9ybVsncGlkJ10udmFsdWUgPSBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ1VJRCcpOwogICAgICAgICAgICAgICAgZm9ybVsnbm9kZWlkJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ25vZGVuYW1lJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25vZGVuYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYRWRpdChlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0eHRmb3JtIik7CiAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WDsKICAgICAgICAgICAgICAgIHZhciB5ID0gZS5jbGllbnRZOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKFhkaXYpOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1siZWRpdG9yZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsnb3AnXS52YWx1ZSA9ICdub2RlX3VwZGF0ZSc7CiAgICAgICAgICAgICAgICBmb3JtWydwaWQnXS52YWx1ZSA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgncGFyZW50Jyk7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlaWQnXS52YWx1ZSA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnVUlEJyk7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlbmFtZSddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlbmFtZSddLnZhbHVlID0gZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdVTmFtZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGRlbkVkaXRvcigpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0Zm9ybScpOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBFZGl0Tm9kZShmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICIiOwogICAgICAgICAgICAgICAgdmFyIG9wID0gZm9ybVsnb3AnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBwaWQgPSBmb3JtWydwaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBub2RlbmFtZSA9IGZvcm1bJ25vZGVuYW1lJ10udmFsdWU7CiAgICAgICAgICAgICAgICBpZihvcCA9PSAnbm9kZV9hZGQnICYmIG5vZGVuYW1lICYmIHBpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFyZ3YgPSAib3A9IitvcCsiJm5hbWU9IitlbmNvZGVVUklDb21wb25lbnQobm9kZW5hbWUpKyImcGFyZW50aWQ9IitwaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKG9wID09ICdub2RlX3VwZGF0ZScgJiYgbm9kZW5hbWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCkKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPSIrb3ArIiZuYW1lPSIrZW5jb2RlVVJJQ29tcG9uZW50KG5vZGVuYW1lKQogICAgICAgICAgICAgICAgICAgICAgICArIiZub2RlaWQ9Iitub2RlaWQrIiZwYXJlbnRpZD0iK3BpZDsKICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVXBkYXRlTm9kZShub2RlaWQsIG5vZGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhpZGRlbkVkaXRvcigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIDsKICAgICAgICAgICAgICAgIC8vYWxlcnQoIm9wOiIrb3ArIm5vZGVpZDoiK25vZGVpZCsicGlkOiIrcGlkKyJub2RlbmFtZToiK25vZGVuYW1lKTsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpOwogICAgICAgICAgICAgICAgaWYoeG1sSHR0cCAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcCA9PSAnbm9kZV9hZGQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRub2RlID0gZXZhbCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRub2RlWydpZCddID09IHBpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgdG5vZGVbJ25jaGlsZHMnXTsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZE5vZGUocGlkLCB0bm9kZVsnY2hpbGRzJ11baV1bJ2lkJ10gKiAxLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmFtZSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmNoaWxkcyddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG9wID09ICdub2RlX3VwZGF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSB0cmltKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWQgPiAwICYmIGlkID09IG5vZGVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZU5vZGUoaWQsIG5vZGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vZGVsZXRlIG5vZGUKICAgICAgICAgICAgZnVuY3Rpb24gWERlbGV0ZShub2RlaWQsIHBhcmVudGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgb05vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9kZSIrbm9kZWlkKTsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+IDAgJiYgb05vZGUgIT0gbnVsbCAmJiAobmFtZSA9IG9Ob2RlLmdldEF0dHJpYnV0ZSgnVU5hbWUnKSkKICAgICAgICAgICAgICAgICAgICAmJiBjb25maXJtKCdBcmUgeW91IHN1cmUgZGVsZXRlIG5vZGU6Jytub2RlaWQrJyBuYW1lOicrbmFtZSsnID8nKSAKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1ub2RlX2RlbGV0ZSZub2RlaWQ9Iitub2RlaWQrIiZwYXJlbnRpZD0iK3BhcmVudGlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSB0cmltKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGlkID0gb05vZGUuZ2V0QXR0cmlidXRlKCdwYXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb1BhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlJytwaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlkID09IG5vZGVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuY2hpbGRzID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ25jaGlsZHMnKSAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9QYXJlbnQuc2V0QXR0cmlidXRlKCduY2hpbGRzJywgbmNoaWxkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkKG9QYXJlbnQsIHBpZCwgaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2NoaWxkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaF8nK3BpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9jaGlsZC5pbm5lckhUTUwgPSBuY2hpbGRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvUGFyZW50LnJlbW92ZUNoaWxkKG9Ob2RlKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxpZCA9IGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXVsnbm9kZWlkJ10udmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gdXJsaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhpZGRlblRlbXBsYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9mb2xkIG5vZGUKICAgICAgICAgICAgZnVuY3Rpb24gRm9sZChlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgbmNoaWxkcyA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbmNoaWxkcycpICogMTsKICAgICAgICAgICAgICAgIHZhciB1aWQgPSBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ1VJRCcpICogMTsKICAgICAgICAgICAgICAgIHZhciB1cmwgPSAiLyI7CiAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1ub2RlX2NoaWxkcyZub2RlaWQ9Iit1aWQ7CiAgICAgICAgICAgICAgICBpZihlbGVtZW50LmlubmVySFRNTCA9PSBjaHJhZGQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgTGlzdENoaWxkcyh1aWQsIHVybCwgYXJndik7CiAgICAgICAgICAgICAgICAgICAgaWYobmNoaWxkcyA+IDApZWxlbWVudC5pbm5lckhUTUwgPSBjaHJ0cmVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihlbGVtZW50LmlubmVySFRNTCA9PSBjaHJmb2xkKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIExpc3RDaGlsZHModWlkLCB1cmwsIGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmhlaWdodCA9IGVsZW1lbnQucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgaWYobmNoaWxkcyA+IDApIGVsZW1lbnQuaW5uZXJIVE1MID0gY2hyYWRkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIEhpZGRlbkVkaXRvcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIExpbWl0U3BlZWQoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHNwZWVkID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKHNwZWVkID0gZm9ybVsnc3BlZWQnXS52YWx1ZSkgIT0gJycKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1zcGVlZF9saW1pdCZzcGVlZD0iK3NwZWVkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93VGFza0luZm8oeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL1Nob3cgVGFzawogICAgICAgICAgICBmdW5jdGlvbiBTaG93VGFza0luZm8odHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgdGFza2luZm8gPSBudWxsOwogICAgICAgICAgICAgICAgaWYodHh0ICYmICh0YXNraW5mbyA9IGV2YWwodHh0KSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNwZWVkID0gdGFza2luZm9bJ3NwZWVkX2xpbWl0J107CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSAiIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPueKtuaAgTombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8YSBocmVmPVwiamF2YXNjcmlwdDpWaWV3VGFzaygndGFza18iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gdGFza2luZm9bJ3N0YXR1cyddKyInKTtcIiBjbGFzcz0ndnRhc2snIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI+Iit0YXNraW5mb1snc3RhdHVzJ10rIjwvYT48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPlVSTOaAu+aVsDombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF90b3RhbCddOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS7u+WKoeaAu+aVsDombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF9udGFza3MnXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7ku7vliqHlrozmiJA6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3Rhc2tpbmZvWyd1cmxfdGFza19vayddOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS7u+WKoemUmeivrzombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF90YXNrX2Vycm9yJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9zcGFuPjxocj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdrdGFzayc+5paH5qGj5aSn5bCPOiZuYnNwOzwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+Iit0YXNraW5mb1snZG9jX3RvdGFsX3pzaXplJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiLyIgKyB0YXNraW5mb1snZG9jX3RvdGFsX3NpemUnXSsiPC9zcGFuPjxocj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdrdGFzayc+RE5T6Kej5p6QOiZuYnNwOzwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+Iit0YXNraW5mb1snaG9zdF9jdXJyZW50J107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiLyIgKyB0YXNraW5mb1snaG9zdF90b3RhbCddKyI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7lt7LnlKjml7bpl7Q6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz5bIit0YXNraW5mb1sndF9kYXknXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDtEYXkocykmbmJzcDsmbmJzcDsiK3Rhc2tpbmZvWyd0X2hvdXInXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI6Iit0YXNraW5mb1sndF9taW4nXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI6Iit0YXNraW5mb1sndF9zZWMnXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsrIit0YXNraW5mb1sndF91c2VjJ10rIl0iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS4i+i9vemAn+W6pjombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3NwZWVkJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIChLQi9TKSA8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7pgJ/luqbpmZDliLY6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxmb3JtIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyBjbGFzcz0nbGlzdGZvcm0nICI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9uc3VibWl0PSdMaW1pdFNwZWVkKHRoaXMpJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPXRleHQgbmFtZT1zcGVlZCB2YWx1ZT0nIitzcGVlZCsiJz4gKEtCL1MpICI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7PGlucHV0IHR5cGU9c3VibWl0IG5hbWU9J3N1Ym1pdCcgdmFsdWU9J09LJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gICLvvIgw5ZKM6LSf5pWw6KGo56S65LiN6ZmQ6YCf77yJPC9mb3JtPjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICB2YXIgb3Rhc2tpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tpbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgaWYob3Rhc2tpbmZvKSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG90YXNraW5mby5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIG90YXNraW5mby5pbm5lckhUTUwgPSBodG1sc3RyOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy92aWV3IFRhc2sKICAgICAgICAgICAgZnVuY3Rpb24gVmlld1Rhc2sob3ApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKCh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPSIrb3A7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1Rhc2tJbmZvKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3V0RGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gSGlkZVRhYmxlKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZXZpZXcnKTsKICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd1RhYmxlKHRhYmlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtc1snZGJlZGl0Zm9ybSddWyd0YWJsZWlkJ10udmFsdWUgPSB0YWJpZDsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGV2aWV3Jyk7CiAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gUmVzZXREQigpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJzZWxlY3QnKTsKICAgICAgICAgICAgICAgICAgICBvZGIuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgb2RiZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZpZWxkcycpOwogICAgICAgICAgICAgICAgICAgIG9kYmYuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBIaWRlVGFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBWaWV3REIodHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZGIgPSBldmFsKHR4dCk7CiAgICAgICAgICAgICAgICB2YXIgdGFibGVzID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGRiICYmICh0YWJsZXMgPSBkYlsndGFibGVzJ10pKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciB0YWJpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5maWVsZHMgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciB0YWJuYW1lID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSAiIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8dWwgY2xhc3M9J3VsdGFiJz4iOwogICAgICAgICAgICAgICAgICAgIGZvciAoeCBpbiB0YWJsZXMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0YWJpZCA9IHg7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYm5hbWUgPSB0YWJsZXNbeF1bJ25hbWUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbmZpZWxkcyA9IHRhYmxlc1t4XVsnbmZpZWxkcyddOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2x0YWInIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ2x0YWItc2VsZWN0ZWQnKVwiICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbm1vdXNlb3V0PVwib3V0RGl2KHRoaXMsICdsdGFiJylcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2x0YWJuYW1lJyBvbmNsaWNrPSdWaWV3VGFibGUoIit0YWJpZCsiKScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIHRpdGxlPSfngrnlh7vov5vlhaXmlbDmja7ooajnrqHnkIYnID4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9IHRhYm5hbWUrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXVwZGF0ZScgdGl0bGU9J1JlbmFtZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRCWEVkaXQoZXZlbnQsIit0YWJpZCsiLCAnIit0YWJuYW1lKyInKVwiPiIrY2hyZWRpdCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlZGVsZXRlJyB0aXRsZT0nRGVsZXRlJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiRGVsZXRlVGFibGUoIit0YWJpZCsiLCAnIit0YWJuYW1lKyInKVwiPiIrY2hyZGVsKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgLy9odG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAvL2h0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlYWRkJyB0aXRsZT0n54K55Ye75re75Yqg5a2X5q61JyAiOwogICAgICAgICAgICAgICAgICAgICAgICAvL2h0bWxzdHIgKz0gIm9uY2xpY2s9XCJEQkZYQWRkKGV2ZW50LCAnIit0YWJpZCsiJylcIj4iK2NocmFkZCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJzZWxlY3QnKTsKICAgICAgICAgICAgICAgICAgICBvZGIuaW5uZXJIVE1MID0gaHRtbHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gQWRkVGFibGUoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHRhYm5hbWUgPSBmb3JtWyd0YWJuYW1lJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZih0YWJuYW1lICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXRhYmxlX2FkZCZuYW1lPSIrdGFibmFtZTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RCKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtWyd0YWJuYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgUmVzZXREQigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRGVsZXRlVGFibGUodGFiaWQsIHRhYm5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSBkZWxldGUgdGFiYmxlOiIrdGFibmFtZSsiID8iKSAKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV9kZWxldGUmdGFibGVpZD0iK3RhYmlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3REIoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXdEYXRhYmFzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICBSZXNldERCKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0xpc3QgVGFibGUgRmllbGRzCiAgICAgICAgICAgIGZ1bmN0aW9uIFZpZXdGaWVsZHModHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgdGFiID0gZXZhbCh0eHQpOwogICAgICAgICAgICAgICAgaWYodGFiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciB0YWJpZCA9IHRhYlsnaWQnXTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibmFtZSA9IHRhYlsnbmFtZSddOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciBmbmFtZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZ0eXBlID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4X3R5cGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciA9ICAiPHVsIGNsYXNzPSd1bHRhYicgPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yICh4IGluIHRhYlsnZmllbGRzJ10pCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBmdHlwZSA9ICh0YWJbJ2ZpZWxkcyddW3hdLmZsYWcgJiAoMXwyfDR8OCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihsYXN0ICE9IGZ0eXBlKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YWJbJ2ZpZWxkcyddW3hdLmZsYWcgJiAzMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihmdHlwZSA9PSAxKSBpbmRleF90eXBlID0gImludOe0ouW8leWtl+autSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihmdHlwZSA9PSAyKSBpbmRleF90eXBlID0gImRvdWJsZee0ouW8leWtl+autSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihmdHlwZSA9PSA0KSBpbmRleF90eXBlID0gIuaWh+acrOe0ouW8leWtl+autSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihmdHlwZSA9PSA4KSBpbmRleF90eXBlID0gImxvbmfntKLlvJXlrZfmrrUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpbmRleF90eXBlID0gIumdnue0ouW8leWtl+autSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2ZpZWxkLXRpdGxlJz4iK2luZGV4X3R5cGUrIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmaWQgPSB4OwogICAgICAgICAgICAgICAgICAgICAgICBmbmFtZSA9IHRhYlsnZmllbGRzJ11beF1bJ25hbWUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRhYlsnZmllbGRzJ11beF1bJ2ZsYWcnXTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdsZmllbGQnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbm1vdXNlbW92ZT1cIm9uRGl2KHRoaXMsICdsZmllbGQtc2VsZWN0ZWQnKVwiICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbm1vdXNlb3V0PVwib3V0RGl2KHRoaXMsICdsZmllbGQnKTtcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2xmbmFtZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRCRlhFZGl0KGV2ZW50LCAiK3RhYmlkKyIsIitmaWQrIiwiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICInIitmbmFtZSsiJywgIitmdHlwZSsiLCAiK2ZsYWcrIilcIj4iK2ZuYW1lKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2V1cGRhdGUnIHRpdGxlPSdDaGFuZ2UnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJEQkZYRWRpdChldmVudCwgIit0YWJpZCsiLCIrZmlkKyIsIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJyIrZm5hbWUrIicsICIrZnR5cGUrIiwgIitmbGFnKyIpXCI+IitjaHJlZGl0KyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2VkZWxldGUnIHRpdGxlPSdEZWxldGUnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJEZWxldGVGaWVsZCgiK3RhYmlkKyIsIitmaWQrIiwiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICInIit0YWJuYW1lKyInLCAnIitmbmFtZSsiJylcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIHZhciBvZGJmaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJmaWVsZHMnKTsKICAgICAgICAgICAgICAgICAgICBvZGJmaWVsZHMuaW5uZXJIVE1MID0gaHRtbHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL0xpc3QvVmlldyBGaWVsZAogICAgICAgICAgICBmdW5jdGlvbiBWaWV3VGFibGUodGFiaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKHRhYmlkID49IDAgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgU2hvd1RhYmxlKHRhYmlkKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV92aWV3JnRhYmxlaWQ9Iit0YWJpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0ZpZWxkcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICAvL1ZpZXcgZGF0YWJhc2UKICAgICAgICAgICAgZnVuY3Rpb24gVmlld0RhdGFiYXNlKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9ZGF0YWJhc2VfdmlldyI7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YWJhc2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZGIuc2V0QXR0cmlidXRlKCdkYmFzZScsIHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2FkTGlua09wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0xpc3QgVGFibGVzCiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RUYWJsZXMoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZigoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV9saXN0IjsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RCKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gSGlkZGVuREJmb3JtKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZvcm0nKTsKICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gREJYQWRkKGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgdmFyIFhkaXYgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRiZm9ybSIpOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKFhkaXYpOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sieGRiZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsnb3AnXS52YWx1ZSA9ICd0YWJsZV9hZGQnOwogICAgICAgICAgICAgICAgZm9ybVsndGFibGVpZCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIERCWEVkaXQoZSwgaWQsIG5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgdmFyIFhkaXYgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRiZm9ybSIpOwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKFhkaXYpOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sieGRiZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsnb3AnXS52YWx1ZSA9ICd0YWJsZV9yZW5hbWUnOwogICAgICAgICAgICAgICAgZm9ybVsndGFibGVpZCddLnZhbHVlID0gaWQ7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS52YWx1ZSA9IG5hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRWRpdERCKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKGZvcm0gPT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIG9wID0gZm9ybVsnb3AnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciB0YWJsZWlkID0gZm9ybVsndGFibGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBmb3JtWyduYW1lJ10udmFsdWU7CiAgICAgICAgICAgICAgICBpZihvcCA9PSAndGFibGVfYWRkJyAmJiBuYW1lKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFyZ3YgPSAib3A9dGFibGVfYWRkJm5hbWU9IituYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAndGFibGVfcmVuYW1lJyAmJiB0YWJsZWlkID49IDAgJiYgbmFtZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPXRhYmxlX3JlbmFtZSZ0YWJsZWlkPSIrdGFibGVpZCsiJm5hbWU9IituYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAndGFibGVfZGVsZXRlJyAmJiB0YWJsZWlkID49IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD10YWJsZV9kZWxldGUmdGFibGVpZD0iK3RhYmxlaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihhcmd2ICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3REIoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5EQmZvcm0oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEQkZYQWRkKGUsIHRhYmlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYmZpZWxkZm9ybSIpOwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKFhkaXYpOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1siZGJmaWVsZGZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAnZmllbGRfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9IHRhYmlkOwogICAgICAgICAgICAgICAgZm9ybVsnZmllbGRpZCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydvbGRuYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3R5cGUnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydpc19pbmRleCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vZm9ybVsnaXNfbnVsbCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gREJGWEVkaXQoZSwgdGFiaWQsIGZpZWxkaWQsIGZuYW1lLCBmdHlwZSwgZmxhZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgICAgICAgICAgICB2YXIgWGRpdiA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGJmaWVsZGZvcm0iKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbImRiZmllbGRmb3JtIl07CiAgICAgICAgICAgICAgICBmb3JtWydvcCddLnZhbHVlID0gJ2ZpZWxkX3VwZGF0ZSc7CiAgICAgICAgICAgICAgICBmb3JtWyd0YWJsZWlkJ10udmFsdWUgPSB0YWJpZDsKICAgICAgICAgICAgICAgIGZvcm1bJ2ZpZWxkaWQnXS52YWx1ZSA9IGZpZWxkaWQ7CiAgICAgICAgICAgICAgICBmb3JtWydvbGRuYW1lJ10udmFsdWUgPSBmbmFtZTsKICAgICAgICAgICAgICAgIGZvcm1bJ3R5cGUnXS52YWx1ZSA9IGZ0eXBlOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gZmxhZzsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2luZGV4J10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgLy9mb3JtWydpc19udWxsJ10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgZm9ybVsnZnR5cGUnXS5vcHRpb25zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2Z0eXBlJ10ub3B0aW9uc1tpXS52YWx1ZSA9PSBmdHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnZnR5cGUnXS5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydmdHlwZSddLm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGZsYWcgJiAzMikgZm9ybVsnaXNfaW5kZXgnXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIC8vaWYoZmxhZyAmIDE2KSBmb3JtWydpc19udWxsJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS52YWx1ZSA9IGZuYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGRlbkRCRmllbGRmb3JtKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZpZWxkZm9ybScpOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldERCRmllbGRmb3JtKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ29wJ10udmFsdWUgPT0gJ2ZpZWxkX2FkZCcpCiAgICAgICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgSGlkZGVuREJGaWVsZGZvcm0oKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEVkaXRGaWVsZChmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihmb3JtID09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IGZvcm1bJ3RhYmxlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmaWVsZGlkID0gZm9ybVsnZmllbGRpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIGZuYW1lID0gZm9ybVsnbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIGZ0eXBlID0gZm9ybVsnZnR5cGUnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBvbGRuYW1lID0gZm9ybVsnb2xkbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG9sZHR5cGUgPSBmb3JtWyd0eXBlJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgb2xkZmxhZyA9IGZvcm1bJ2ZsYWcnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgIGlmKG9wID09ICdmaWVsZF9hZGQnICYmIHRhYmxlaWQgPiAwICYmIGZuYW1lICYmIGZ0eXBlID4gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPWZpZWxkX2FkZCZ0YWJsZWlkPSIrdGFibGVpZCsiJm5hbWU9IitmbmFtZTsKICAgICAgICAgICAgICAgICAgICAvL2lmKGZvcm1bJ2lzX251bGwnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gMTY7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfaW5kZXgnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gKDMyfGZ0eXBlKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGZsYWcgfD0gNDsKICAgICAgICAgICAgICAgICAgICBpZihmbGFnID4gMCkgYXJndiArPSAiJmZsYWc9IitmbGFnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAnZmllbGRfdXBkYXRlJyAmJiB0YWJsZWlkID4gMCAmJiBmaWVsZGlkID49IDApIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBlYXJndiA9ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKGZuYW1lICYmIGZuYW1lICE9IG9sZG5hbWUpIGVhcmd2ICs9ICImbmFtZT0iK2ZuYW1lOwogICAgICAgICAgICAgICAgICAgIGlmKGVhcmd2KQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPWZpZWxkX3JlbmFtZSZ0YWJsZWlkPSIrdGFibGVpZCsiJmZpZWxkaWQ9IitmaWVsZGlkK2Vhcmd2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0ZpZWxkcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RhdGFiYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFJlc2V0REJGaWVsZGZvcm0oZm9ybSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRGVsZXRlRmllbGQodGFiaWQsIGZpZWxkaWQsIHRhYm5hbWUsIGZpZWxkbmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoY29uZmlybSgiQXJlIHlvdSBzdXJlIGRlbGV0ZSBUYWJsZToiK3RhYm5hbWUrIiBGaWVsZDoiK2ZpZWxkbmFtZSsiPyIpIAogICAgICAgICAgICAgICAgICAgICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPWZpZWxkX2RlbGV0ZSZ0YWJsZWlkPSIrdGFiaWQrIiZmaWVsZGlkPSIrZmllbGRpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0ZpZWxkcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RhdGFiYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9kZWxldGUgZGl2CiAgICAgICAgICAgIGZ1bmN0aW9uIGRpdnJlbW92ZShlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZGl2aGlkZGVuKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQgJiYgZWxlbWVudC5pbm5lckhUTUwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy9tb3ZpbmcgZGl2CiAgICAgICAgICAgIGZ1bmN0aW9uIGRpdm1vdmUoZSwgbykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgby5vbnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJldHVybihmYWxzZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgby5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZSA9IGV8fHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KGUuY2xpZW50WCAtIG8ucGFyZW50Tm9kZS5vZmZzZXRMZWZ0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlSW50KGUuY2xpZW50WSAtIG8ucGFyZW50Tm9kZS5vZmZzZXRUb3ApOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGU9ZXx8d2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgICAgICAgICBvLnBhcmVudE5vZGUuc3R5bGUubGVmdD0oZS5jbGllbnRYLXgpKyJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgIG8ucGFyZW50Tm9kZS5zdHlsZS50b3A9KGUuY2xpZW50WS15KSsicHgiOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKG8ucGFyZW50Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXA9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmU9bnVsbDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gUmVzZXRUZW1wbGF0ZWZvcm0oKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ0ZW1wbGF0ZWZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAndGVtcGxhdGVfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3RlbXBsYXRlaWQnXS52YWx1ZSA9IC0xOwogICAgICAgICAgICAgICAgZm9ybVsncGF0dGVybiddLnZhbHVlID0gJycKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX3B1YmxpYyddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2lnbm9yZWNhc2UnXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydmbGFnJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ25maWVsZHMnXS52YWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmttYXAnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnbWFwJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmtfbWV0aG9kJ11bMF0uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX2xpc3QnXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX3RhYmxlJ10ub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX2ZpZWxkJ10ub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX25vZGUnXS5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYVFJlc2V0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlX3ZpZXcnKTsKICAgICAgICAgICAgICAgIGlmKG9kaXYpIG9kaXYuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ0ZW1wbGF0ZWZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAndGVtcGxhdGVfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ25vZGVpZCddLnZhbHVlID0gLTE7CiAgICAgICAgICAgICAgICBmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWUgPSAtMTsKICAgICAgICAgICAgICAgIGZvcm1bJ2NvZGUnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsncGF0dGVybiddLnZhbHVlID0gJycKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX3B1YmxpYyddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2lnbm9yZWNhc2UnXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydmbGFnJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ25maWVsZHMnXS52YWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBmb3JtWyd1cmwnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnbGluayddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rbWFwJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ21hcCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydtZXRob2QnXS52YWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX21ldGhvZCddWzBdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19saXN0J10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua190YWJsZSddLm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmtfZmllbGQnXS5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX25vZGUnXS5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3VybGZvcm0nXTsKICAgICAgICAgICAgICAgIGZvcm1bJ21ldGhvZCddWzBdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFhUQWRkKG5vZGVpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIFhkaXYgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInh0ZW1wbGF0ZWZvcm0iKTsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgWFRSZXNldCgpOwogICAgICAgICAgICAgICAgdmFyIHhmb3JtID0gZG9jdW1lbnQuZm9ybXNbInRlbXBsYXRlZm9ybSJdOwogICAgICAgICAgICAgICAgeGZvcm1bJ25vZGVpZCddLnZhbHVlID0gbm9kZWlkOwogICAgICAgICAgICAgICAgdmFyIHVybGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sidXJsZm9ybSJdOwogICAgICAgICAgICAgICAgdXJsZm9ybVsnbWV0aG9kJ11bMF0uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB1cmxmb3JtWyd1cmwnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgdXJsZm9ybVsndXJsJ10udmFsdWUgPSAnaHR0cDovLyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gWFRFZGl0KGZvcm1pZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgWFRSZXNldCgpOwogICAgICAgICAgICAgICAgdmFyIHhmb3JtID0gZG9jdW1lbnQuZm9ybXNbInRlbXBsYXRlZm9ybSJdOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtaWRdOwogICAgICAgICAgICAgICAgeGZvcm1bJ29wJ10udmFsdWUgPSAndGVtcGxhdGVfdXBkYXRlJzsKICAgICAgICAgICAgICAgIHhmb3JtWydub2RlaWQnXS52YWx1ZSA9IGZvcm1bJ25vZGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9IGZvcm1bJ3RhYmxlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWUgPSBmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsncGF0dGVybiddLnZhbHVlID0gZm9ybVsncGF0dGVybiddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ2ZsYWcnXS52YWx1ZSA9IGZvcm1bJ2ZsYWcnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWyduZmllbGRzJ10udmFsdWUgPSBmb3JtWyduZmllbGRzJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsndXJsJ10udmFsdWUgPSBmb3JtWyd1cmwnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWydsaW5rJ10udmFsdWUgPSBmb3JtWydsaW5rJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua21hcCddLnZhbHVlID0gZm9ybVsnbGlua21hcCddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ21hcCddLnZhbHVlID0gZm9ybVsnbWFwJ10udmFsdWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgMSkKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfcHVibGljJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgMikKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfZ2xvYmFsJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgNCkKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfaWdub3JlY2FzZSddLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ21ldGhvZCddLnZhbHVlID0gMDsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ21ldGhvZCddLnZhbHVlID09IDEpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgeGZvcm1bJ21ldGhvZCddLnZhbHVlID0gMTsKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnZmxhZyddLnZhbHVlIHw9IDE2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHN0cmxpbmttYXAgPSBmb3JtWydsaW5rbWFwJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbGlua21hcCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihzdHJsaW5rbWFwICYmIChsaW5rbWFwID0gZXZhbChzdHJsaW5rbWFwKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcFsnZmxhZyddICYgMTYpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua19tZXRob2QnXVsxXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcFsnZmxhZyddICYgNjQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua19saXN0J10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGVkaXYgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKGVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneHRlbXBsYXRlZm9ybScpKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigoZWRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wbGF0ZWRpdicpKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdXJsZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ1cmxmb3JtIl07CiAgICAgICAgICAgICAgICB1cmxmb3JtWydtZXRob2QnXVswXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2ZsYWcnXS52YWx1ZSAmIDE2KQogICAgICAgICAgICAgICAgICAgIHVybGZvcm1bJ21ldGhvZCddWzFdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgdXJsZm9ybVsndXJsJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ3VybCddLnZhbHVlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVybGZvcm1bJ3VybCddLnZhbHVlID0gZm9ybVsndXJsJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgTG9hZFVSTCh1cmxmb3JtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYVERlbGV0ZShub2RlaWQsIHRlbXBsYXRlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSAiQXJlIHlvdSBzdXJlIGRlbGV0ZSB0ZW1wbGF0ZVsiK3RlbXBsYXRlaWQrIl0gZnJvbSBub2RlWyIrbm9kZWlkKyJdID8iOwogICAgICAgICAgICAgICAgaWYoY29uZmlybShtc2cpICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXRlbXBsYXRlX2RlbGV0ZSZub2RlaWQ9Iitub2RlaWQrIiZ0ZW1wbGF0ZWlkPSIrdGVtcGxhdGVpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9IaWRkZW5UZW1wbGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dUZW1wbGF0ZXMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGRlblRlbXBsYXRlKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IG51bGw7CiAgICAgICAgICAgICAgICBpZigoZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLWNvbmZpZycpKSkKICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBpZigoZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGUtdGVtcGxhdGUnKSkpCiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgaWYoKGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfdmlldycpKSkKICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBpZigoZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV9jb2RlX29wJykpKQogICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgaWYoKGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wbGF0ZWRpdicpKSkKICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGlmKChkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneHRlbXBsYXRlZm9ybScpKSkKICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIFhUUmVzZXQoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoYW5nZVRhYmxlKGZvcm0sIGZzZWxlY3RpZCwgZWwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvZGl2ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBzdHJkYiA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZGJhc2UgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGZpZWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgdGFiaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBmaWVsZHNvcHRpb25zID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ID0gZm9ybVtmc2VsZWN0aWRdOwogICAgICAgICAgICAgICAgaWYoc2VsZWN0KSBzZWxlY3Qub3B0aW9ucy5sZW5ndGggPSAxOwogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAob2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhYmFzZScpKSAKICAgICAgICAgICAgICAgICAgICAmJiAoc3RyZGIgPSBvZGl2LmdldEF0dHJpYnV0ZSgnZGJhc2UnKSkgJiYgKGRiYXNlID0gZXZhbChzdHJkYikpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCh0YWJpZCA9IGVsLm9wdGlvbnNbZWwuc2VsZWN0ZWRJbmRleF0udmFsdWUpID49IDAgCiAgICAgICAgICAgICAgICAgICAgICAgICYmIChmaWVsZHMgPSBkYmFzZVsndGFibGVzJ11bdGFiaWRdWydmaWVsZHMnXSkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgc2VsZWN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGZpZWxkcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0Lm9wdGlvbnNbaSsrXSA9IG5ldyBPcHRpb24oZmllbGRzW3hdWyduYW1lJ10sIHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoZmllbGRzb3B0aW9ucyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNlbGVjdFVSTChmb3JtLCBib3gsIGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIGJveCAmJiBpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKGJveC5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc191bmlxZV8nK2lkXS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc19saXN0XycraWRdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2ZpbGVfJytpZF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfcGFnZV8nK2lkXS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc191cmxfJytpZF0uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydub2RlaWRfJytpZF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfdW5pcWVfJytpZF0uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc19saXN0XycraWRdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfZmlsZV8nK2lkXS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2lzX3BhZ2VfJytpZF0uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc191cmxfJytpZF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnbm9kZWlkXycraWRdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBDb25maWdUZW1wbGF0ZShmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgYXJyID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBjb2RlID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKHBhdHRlcm4gPSBmb3JtWydwYXR0ZXJuJ10udmFsdWUpICYmIChjb2RlID0gZm9ybVsnY29kZSddLnZhbHVlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9ccnxcbi9taWcsJycpOwogICAgICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IGZvcm1bJ2xpbmtfdGFibGUnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVpZCA9IGZvcm1bJ3RlbXBsYXRlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZm9ybVsndXJsJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IGZvcm1bJ21ldGhvZCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9ICJtIjsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNfcHVibGljID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlzX2lnbm9yZWNhc2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNfZ2xvYmFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfcHVibGljJ10uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzX3B1YmxpYyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2lnbm9yZWNhc2UnXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNfaWdub3JlY2FzZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiArPSAiaSI7IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19nbG9iYWwnXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNfZ2xvYmFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyAgUmVnRXhwKHBhdHRlcm4sIGNvbmRpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgaWYoKGFyciA9IHJlZy5leGVjKGNvZGUpKSAmJiBhcnIubGVuZ3RoID4gMSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGZvcm1bJ21hcCddLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnbWFwJ10udmFsdWUpIG1hcCA9IGV2YWwoZm9ybVsnbWFwJ10udmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWyduZmllbGRzJ10udmFsdWUgPSBhcnIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2RpdiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZHNvcHRpb25zID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHNvcHRpb25zID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChvZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGFiYXNlJykpKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZGIgPSBvZGl2LmdldEF0dHJpYnV0ZSgnZGJhc2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYmFzZSA9IGV2YWwoc3RyZGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGJhc2UgJiYgZGJhc2VbJ3RhYmxlcyddW3RhYmxlaWRdICYmIHRhYmxlaWQgPj0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBkYmFzZVsndGFibGVzJ11bdGFibGVpZF1bJ2ZpZWxkcyddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzb3B0aW9ucyArPSAiPG9wdGlvbiB2YWx1ZT0nIit4KyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc29wdGlvbnMgKz0gZGJhc2VbJ3RhYmxlcyddW3RhYmxlaWRdWydmaWVsZHMnXVt4XVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIjwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+IDAgJiYgKG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9kZScrbm9kZWlkKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJjaGlsZHMgPSBvZGl2LmdldEF0dHJpYnV0ZSgnY2hpbGRzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRzID0gZXZhbChzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGNoaWxkcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkc29wdGlvbnMgKz0gIjxvcHRpb24gdmFsdWU9JyIreCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHNvcHRpb25zICs9IGNoaWxkc1t4XSsiIDwvb3B0aW9uPlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGVtcGxhdGVpZCA+IDApIG9wID0gInRlbXBsYXRlX3VwZGF0ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAiPGRpdiBjbGFzcz0ndGVtcGxhdGUtYmFyJyBvbm1vdXNlZG93bj0nIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiZGl2bW92ZShldmVudCwgdGhpcyknPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuIGNsYXNzPSdjbG9zZWJ1dHRvbicgb25jbGljaz0nZGl2cmVtb3ZlKCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gInRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPlg8L3NwYW4+Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPHNwYW4gY2xhc3M9J2Nsb3NldHh0JyBvbmNsaWNrPSdkaXZyZW1vdmUoIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAidGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUpJyA+5YWz6ZetPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjwvZGl2PiI7CiAgICAgICAgICAgICAgICAgICAgICAgdmFyICBibG9jayA9ICI8ZGl2IGlkPSd0ZW1wbGF0ZS1jb25maWctYmxvY2snPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGZvcm0gYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzPSdsaXN0Zm9ybScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICJvbnN1Ym1pdD0nRWRpdFRlbXBsYXRlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25vZGVpZCcgdmFsdWU9JyIrbm9kZWlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0nIitvcCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdtZXRob2QnIHZhbHVlPSciK21ldGhvZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0YWJsZWlkJyB2YWx1ZT0nIit0YWJsZWlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3RlbXBsYXRlaWQnIHZhbHVlPSciK3RlbXBsYXRlaWQrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbmZpZWxkcycgdmFsdWU9JyIrYXJyLmxlbmd0aCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiVVJMOjxpbnB1dCB0eXBlPXRleHQgbmFtZT0ndXJsJyBzaXplPTgwIHZhbHVlPSciK3VybCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIuaooeeJiDo8dGV4dGFyZWEgbmFtZT0ncGF0dGVybicgY29scz03NiByb3dzPTQ+IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArcGF0dGVybisiPC90ZXh0YXJlYT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfcHVibGljJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNfcHVibGljKSBibG9jayArPSAiY2hlY2tlZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuWFrOWFseaVsOaNriI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfZ2xvYmFsJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNfZ2xvYmFsKSBibG9jayArPSAiY2hlY2tlZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPumHjeWkjeWMuemFjeWkmuadoSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19pZ25vcmVjYXNlJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNfaWdub3JlY2FzZSkgYmxvY2sgKz0gImNoZWNrZWQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7lv73nlaXlpKflsI/lhpkiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxocj4iOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBhcnIubGVuZ3RoO2krKykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpIDwgMTApIGJsb2NrICs9ICcwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9IGkrIjoiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjx0ZXh0YXJlYSBuYW1lPSdyXyIraSsiJyBjb2xzPTc2IHJvd3M9MSByZWFkb25seS9kaXNhYmxlZD4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gYXJyW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvdGV4dGFyZWE+PGJyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c3BhbiB0aXRsZT0n6Ieq5Yqo5ou85o6l5Li65a6M5oiQ6ZO+5o6lJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2xpbmtfIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXBbaS0xXVsnZmxhZyddICYgMSkgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIG9uY2xpY2s9J3NlbGVjdFVSTCh0aGlzLmZvcm0sdGhpcywiK2krIiknPumTvuaOpTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfpk77mjqXmoIfor4bkuIDmnaHlrozmlbTkv6Hmga/nmoTnu5PmnZ8nPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfdW5pcWVfIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXBbaS0xXVsnZmxhZyddICYgMSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwW2ktMV1bJ2ZsYWcnXSAmIDMyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBkaXNhYmxlZD10cnVlICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuagh+ivhuaAp+mTvuaOpTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gdGl0bGU9J+WIl+ihqOmhteWwhuS8muS8mOWFiOS4i+i9veW5tuS4lOS8muWumuacn+abtOaWsCc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19saXN0XyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ2ZsYWcnXSAmIDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiA2NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgZGlzYWJsZWQ9dHJ1ZSAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7liJfooajpobU8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfkuIvovb3lrZjlgqjkuLrmlofku7bmr5TlpoI65Zu+54mHLG1wM+etiSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19maWxlXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ2ZsYWcnXSAmIDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBkaXNhYmxlZD10cnVlICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuaWh+S7tjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gdGl0bGU9J+WIl+ihqOmhteWIhumhtSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19wYWdlXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ2ZsYWcnXSAmIDEpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiAyNTYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGRpc2FibGVkPXRydWUgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+5YiG6aG1PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c3BhbiB0aXRsZT0n6L2s5o2i5pe26Ze05oiz5Li6VU5JWFRJTUUnPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfZGF0ZXRpbWVfIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXBbaS0xXVsnZmxhZyddICYgNTEyKSBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+5pe26Ze05oizPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c3BhbiB0aXRsZT0n5ou85o6l5a6M5pW055qEVVJM5Zyw5Z2AJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX3VybF8iK2krIiciOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIG1hcFtpLTFdWydmbGFnJ10gJiAxMjgpIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj5VUkw8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfljrvmjolodG1s5qCH562+5ZCO55qE5paH5pys5YaF5a65Jz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX25lZWRfY2xlYXJodG1sXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ2ZsYWcnXSAmIDQpIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7ljrtIVE1MPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c3BhbiB0aXRsZT0n5Y675o6J55aR5Ly85bm/5ZGK55qE6YOo5YiG5YaF5a6577yM6K+l5Yqf6IO96LCo5oWO5L2/55SoJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX25lZWRfYW50aXNwYW1fIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXBbaS0xXVsnZmxhZyddICYgOCkgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuWOu+W5v+WRijwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNlbGVjdCBuYW1lPSdmaWVsZGlkXyIraSsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7lr7nlupTlrZfmrrU8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIHRhYmxlaWQgPj0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBkYmFzZVsndGFibGVzJ11bdGFibGVpZF1bJ2ZpZWxkcyddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxvcHRpb24gdmFsdWU9JyIreCsiJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ2ZpZWxkaWQnXSA9PSB4KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgc2VsZWN0ZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj4iK2RiYXNlWyd0YWJsZXMnXVt0YWJsZWlkXVsnZmllbGRzJ11beF1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyI8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSBmaWVsZHNvcHRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvc2VsZWN0PiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNlbGVjdCBuYW1lPSdub2RlaWRfIitpKyInICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgKG1hcFtpLTFdWydmbGFnJ10gJiAxKSkgYmxvY2sgKz0gIiAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBibG9jayArPSAiIGRpc2FibGVkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuWFs+iBlOiKgueCuTwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gY2hpbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxvcHRpb24gdmFsdWU9JyIreCsiJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwW2ktMV1bJ25vZGVpZCddID09IHgpIGJsb2NrICs9ICIgc2VsZWN0ZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj4iKyBjaGlsZHNbeF0rIiA8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSBjaGlsZHNvcHRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvc2VsZWN0PiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGhyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J09LJyA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvZm9ybT48L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLWNvbmZpZycpKSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc3RyICsgYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSAndGVtcGxhdGUtY29uZmlnJzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdndpZHRoID0gNzIwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbmZyYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4bGVmdCA9IHBhcnNlSW50KG9ib2R5Lm9mZnNldFdpZHRoKSAtIGRpdndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG9ib2R5Lm9mZnNldExlZnQgKyh4bGVmdC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAyMCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSB4KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0geSsncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gZGl2d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuaWQgPSAndGVtcGxhdGUtY29uZmlnLWZyYW1lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQub3BlbigpOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LndyaXRlKGJsb2NrKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFRlc3RUZW1wbGF0ZShmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9ICIiOwogICAgICAgICAgICAgICAgdmFyIGxpbmsgPSAiIjsKICAgICAgICAgICAgICAgIHZhciBjb2RlID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgYXJyID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSAibSI7CiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgICAgICAgdmFyIGlzX2dsb2JhbD0gMDsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKHBhdHRlcm4gPSBmb3JtWydwYXR0ZXJuJ10udmFsdWUpCiAgICAgICAgICAgICAgICAgICAgJiYgKGNvZGUgPSBmb3JtWydjb2RlJ10udmFsdWUpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBwYXR0ZXJuLnJlcGxhY2UoL1xyfFxuL21pZywnJyk7CiAgICAgICAgICAgICAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXHJ8XG4vbWlnLCcnKTsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19pZ25vcmVjYXNlJ10uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uICs9ICJpIjsgCiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfZ2xvYmFsJ10uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzX2dsb2JhbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiArPSAiZyI7IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHBhdHRlcm4pOwogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoY29uZGl0aW9uKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVnID0gbmV3ICBSZWdFeHAocGF0dGVybiwgY29uZGl0aW9uKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIGlmKGlzX2dsb2JhbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKChhcnIgPSByZWcuZXhlYyhjb2RlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGFyci5sZW5ndGggPiAxKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyclswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzW2NvdW50KytdID0gYXJyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChhcnIgPSByZWcuZXhlYyhjb2RlKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBhcnIubGVuZ3RoID4gMSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc1tjb3VudCsrXSA9IGFycjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIjxkaXYgaWQ9J3RlbXBsYXRlLXRlc3QtaGVhZGVyJyBvbm1vdXNlZG93bj0nIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICJkaXZtb3ZlKGV2ZW50LCB0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9J2RpdnJlbW92ZSgiOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gInRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPlg8L3NwYW4+Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9J2RpdnJlbW92ZSgiOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gInRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPuWFs+mXrTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO+WMuemFjeaVsOmHjzoiK2NvdW50KyI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxkaXYgaWQ9J3RlbXBsYXRlLW1hdGNoZXMnID4iOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBmb3JtWydsaW5rJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGNvdW50OyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmspIHVybCA9IGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuPnJlc3VsdDoiK2krIjxocj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGogPSAxOyBqIDwgbWF0Y2hlc1tpXS5sZW5ndGg7IGorKykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaiA8IDEwKSBzdHIgKz0gIjAiOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gaisiOjx0ZXh0YXJlYSBjb2xzPTc2IHJvd3M9MT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICttYXRjaGVzW2ldW2pdKyI8L3RleHRhcmVhPjxicj4iOyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnID0gbmV3IFJlZ0V4cCgiPCIraisiPiIsICJpZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShyZWcsIG1hdGNoZXNbaV1bal0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVybCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIlVSTDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9NDggdmFsdWU9JyIrdXJsKyInPjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLXRlc3QnKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHN0cjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pZCA9ICd0ZW1wbGF0ZS10ZXN0JzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdndpZHRoID0gNzAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbmZyYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4bGVmdCA9IHBhcnNlSW50KG9ib2R5Lm9mZnNldFdpZHRoKSAtIGRpdndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG9ib2R5Lm9mZnNldExlZnQgKyh4bGVmdC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAyMCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSB4KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0geSsncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gZGl2d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuaWQgPSAndGVtcGxhdGUtdmlld2VyJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGNvdW50OyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmspIHVybCA9IGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gY2xhc3M9J2N0eHRfYmxvY2snPlJlc3VsdDoiK2krIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoaiA9IDE7IGogPCBtYXRjaGVzW2ldLmxlbmd0aDsgaisrKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihqIDwgMTApIGJsb2NrICs9ICIwIjsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gaisiOjx0ZXh0YXJlYSBjb2xzPTc2IHJvd3M9MT4iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArbWF0Y2hlc1tpXVtqXSsiPC90ZXh0YXJlYT48YnI+IjsgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGluaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZyA9IG5ldyBSZWdFeHAoIjwiK2orIj4iLCAiaWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UocmVnLCBtYXRjaGVzW2ldW2pdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIlVSTDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9NDggdmFsdWU9JyIrdXJsKyInPjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Lm9wZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC53cml0ZShibG9jayk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93VGVtcGxhdGVzKHR4dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGFyciA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZWRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlLXRlbXBsYXRlJyk7CiAgICAgICAgICAgICAgICBpZihlZGl2KSBlZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIGVkaXYgJiYgKGFyciA9IGV2YWwodHh0KSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh0eHQpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gYXJyWydpZCddOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1waWQgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJtYXAgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5maWVsZHMgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rbWFwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RybGlua21hcCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXJyWyduYW1lJ107CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZm9ybXNbJ3RlbXBsYXRlZm9ybSddWydub2RlaWQnXS52YWx1ZSA9IG5vZGVpZDsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICAiPHVsIGNsYXNzPSd1bHRhYicgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0ndGVtcGxhdGUtaGVhZGVyJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLovpPlhaVVUkzmtYvor5XmqKHniYgiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLnhLblkI7mt7vliqDliLAmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9IG5hbWUgKyAiWyIgKyBhcnJbJ250ZW1wbGF0ZXMnXSArICJdIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGFyclsnbnRlbXBsYXRlcyddOyBpKyspCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gYXJyWyd0ZW1wbGF0ZXMnXVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IGJhc2U2NHN0cmRlY29kZSh0ZW1wWydwYXR0ZXJuJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdGVtcFsnZmxhZ3MnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGlkID0gdGVtcFsnaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVpZCA9IHRlbXBbJ3RhYmxlaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFwID0gdGVtcFsnbWFwJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmttYXAgPSB0ZW1wWydsaW5rbWFwJ107CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm1hcCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAubGVuZ3RoID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybWFwID0gIntbIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIG1hcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJtYXAgKz0gIntmaWVsZGlkOiIrbWFwW3hdWydmaWVsZGlkJ10rICIsIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyJub2RlaWQ6IittYXBbeF1bJ25vZGVpZCddKyAiLCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmxhZzoiK21hcFt4XVsnZmxhZyddKyAifSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCA8IChtYXAubGVuZ3RoIC0gMSkpIHN0cm1hcCArPSAiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJtYXAgKz0gIl19IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHJsaW5rbWFwID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmttYXApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxpbmttYXAgPSAiKHsiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmllbGRpZDonIitsaW5rbWFwWydmaWVsZGlkJ10rIicsIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIm5vZGVpZDonIitsaW5rbWFwWydub2RlaWQnXSsiJywiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmxhZzonIitsaW5rbWFwWydmbGFnJ10rIiciIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsifSkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRlbXBbJ3VybCddOwogICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gdGVtcFsnbGluayddOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpJTIpIGNzc25hbWUgPSAnbHRlbXBsYXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjc3NuYW1lID0gJ2x0ZW1wbGF0ZS1obCc7CiAgICAgICAgICAgICAgICAgICAgICAgIG5maWVsZHMgPSB0ZW1wWyduZmllbGRzJ10rMTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGZvcm0gYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzPSdsaXN0Zm9ybScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG5hbWU9J3hmb3JtIit0ZW1waWQrIicgb25zdWJtaXQ9J1hURWRpdCh0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSciK2Nzc25hbWUrIicgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjx0ZXh0YXJlYSBuYW1lPSdwYXR0ZXJuJyBjb2xzPTgwIHJvd3M9MSByZWFkb25seS9kaXNhYmxlZCA+IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICtwYXR0ZXJuKyI8L3RleHRhcmVhPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdub2RlaWQnIHZhbHVlPSciK25vZGVpZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGVtcGxhdGVpZCcgdmFsdWU9JyIrdGVtcGlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdmbGFnJyB2YWx1ZT0nIitmbGFnKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0YWJsZWlkJyB2YWx1ZT0nIit0YWJsZWlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSduZmllbGRzJyB2YWx1ZT0nIituZmllbGRzKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdtYXAnIHZhbHVlPSciK3N0cm1hcCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbGluaycgdmFsdWU9JyIrbGluaysiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbGlua21hcCcgdmFsdWU9XCIiK3N0cmxpbmttYXArIlwiPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd1cmwnIHZhbHVlPSciK3VybCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXVwZGF0ZScgdGl0bGU9J0NoYW5nZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIlhURWRpdCgneGZvcm0iK3RlbXBpZCsiJylcIiA+IitjaHJlZGl0KyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2VkZWxldGUnIHRpdGxlPSdEZWxldGUnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9J1hURGVsZXRlKCIrbm9kZWlkKyIsICIrdGVtcGlkKyIpJz4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9mb3JtPiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvdWw+IjsKICAgICAgICAgICAgICAgICAgICBlZGl2LmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld1RlbXBsYXRlcyhub2RlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvbGRub2RlaWQgPSBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ11bJ25vZGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgaWYob2xkbm9kZWlkICE9IG5vZGVpZCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBIaWRkZW5UZW1wbGF0ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgRm9sZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZF8nK25vZGVpZCkpOwogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10ZW1wbGF0ZV9saXN0Jm5vZGVpZD0iK25vZGVpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1RlbXBsYXRlcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWFRBZGQobm9kZWlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2VkaXQgTGluawogICAgICAgICAgICBmdW5jdGlvbiBFZGl0TGluayhmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgbGluayA9ICIiOwogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAobGluayA9IGZvcm1bJ2xpbmsnXS52YWx1ZSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gZm9ybVsnb3AnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gZm9ybVsnbm9kZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlaWQgPSBmb3JtWydsaW5rX3RhYmxlJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlaWQgPSBmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBmb3JtWydwYXR0ZXJuJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBmb3JtWydsaW5rJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGZvcm1bJ3VybCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gODsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19wdWJsaWMnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gMTsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19nbG9iYWwnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gMjsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19pZ25vcmVjYXNlJ10uY2hlY2tlZCA9PSB0cnVlKSBmbGFnIHw9IDQ7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnbWV0aG9kJ10udmFsdWUgPT0gMSkgZmxhZyB8PSAxNjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlua19mbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydsaW5rX21ldGhvZCddWzFdLmNoZWNrZWQgPT0gdHJ1ZSkgbGlua19mbGFnIHw9IDE2OwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2xpbmtfbGlzdCddLmNoZWNrZWQgPT0gdHJ1ZSkgbGlua19mbGFnIHw9IDY0OwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rbWFwID0gIlsiICsgZm9ybVsnbGlua19maWVsZCddLnZhbHVlICsgJywnCiAgICAgICAgICAgICAgICAgICAgICAgICsgZm9ybVsnbGlua19ub2RlJ10udmFsdWUgKyAnLCcKICAgICAgICAgICAgICAgICAgICAgICAgKyBsaW5rX2ZsYWcgKyAnXSc7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChsaW5rbWFwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAibm9kZWlkPSIrbm9kZWlkKyImdGFibGVpZD0iK3RhYmxlaWQrIiZmbGFnPSIrZmxhZwogICAgICAgICAgICAgICAgICAgICAgICArIiZsaW5rbWFwPSIrZW5jb2RlVVJJQ29tcG9uZW50KGxpbmttYXApCiAgICAgICAgICAgICAgICAgICAgICAgICsiJmxpbms9IitlbmNvZGVVUklDb21wb25lbnQobGluaykKICAgICAgICAgICAgICAgICAgICAgICAgKyImcGF0dGVybj0iK2VuY29kZVVSSUNvbXBvbmVudChwYXR0ZXJuKTsKICAgICAgICAgICAgICAgICAgICBpZih1cmwpIGFyZ3YgKz0gIiZ1cmw9IitlbmNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgICAgICBpZihvcCA9PSAndGVtcGxhdGVfYWRkJykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgKz0gIiZvcD10ZW1wbGF0ZV9hZGQiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG9wID09ICd0ZW1wbGF0ZV91cGRhdGUnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiArPSAiJm9wPXRlbXBsYXRlX3VwZGF0ZSZ0ZW1wbGF0ZWlkPSIrdGVtcGxhdGVpZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wID09ICd0ZW1wbGF0ZV9hZGQnKSBSZXNldFRlbXBsYXRlZm9ybSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIEhpZGRlblRlbXBsYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dUZW1wbGF0ZXMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vZWRpdCB0ZW1wbGF0ZQogICAgICAgICAgICBmdW5jdGlvbiBFZGl0VGVtcGxhdGUoZm9ybSwgZWxlbWVudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG9wID0gZm9ybVsnb3AnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZWlkID0gZm9ybVsndGVtcGxhdGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHRhYmxlaWQgPSBmb3JtWyd0YWJsZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IGZvcm1bJ3BhdHRlcm4nXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciB1cmwgPSBmb3JtWyd1cmwnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBmb3JtWydtZXRob2QnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX3B1YmxpYyddLmNoZWNrZWQgPT0gdHJ1ZSkgZmxhZyB8PSAxOwogICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfZ2xvYmFsJ10uY2hlY2tlZCA9PSB0cnVlKSBmbGFnIHw9IDI7CiAgICAgICAgICAgICAgICBpZihmb3JtWydpc19pZ25vcmVjYXNlJ10uY2hlY2tlZCA9PSB0cnVlKSBmbGFnIHw9IDQ7CiAgICAgICAgICAgICAgICBpZihtZXRob2QgPT0gMSkgZmxhZyB8PSAxNjsKICAgICAgICAgICAgICAgIHZhciBuZmllbGRzID0gZm9ybVsnbmZpZWxkcyddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIGZpZWxkaWQgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGlzX2xpbmsgPSAwOwogICAgICAgICAgICAgICAgdmFyIGlzX3VybCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgaXNfZmlsZSA9IDA7CiAgICAgICAgICAgICAgICB2YXIgaXNfbmVlZF9jbGVhcmh0bWwgPSAwOwogICAgICAgICAgICAgICAgdmFyIGlzX25lZWRfYW50aXNwYW0gPSAwOwogICAgICAgICAgICAgICAgdmFyIGNoaWxkX25vZGVpZCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGRfZmxhZyA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbWFwID0gInsiOwogICAgICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgbmZpZWxkczsgaSsrKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZpZWxkaWQgPSAgZm9ybVsnZmllbGRpZF8nK2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIG5vZGVfZmxhZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgbm9kZV9pZCA9IC0xOwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2xpbmtfJytpXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX3VuaXFlXycraV0uY2hlY2tlZCA9PSB0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDMyOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19maWxlXycraV0uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVfZmxhZyB8PSAyOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19saXN0XycraV0uY2hlY2tlZCA9PSB0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDY0OwogICAgICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19wYWdlXycraV0uY2hlY2tlZCA9PSB0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDI1NjsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9pZCA9IGZvcm1bJ25vZGVpZF8nK2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc191cmxfJytpXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gMTI4OwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2RhdGV0aW1lXycraV0uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDUxMjsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19uZWVkX2NsZWFyaHRtbF8nK2ldLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVfZmxhZyB8PSA0OwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX25lZWRfYW50aXNwYW1fJytpXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gODsKICAgICAgICAgICAgICAgICAgICBtYXAgKz0gIlsiK2ZpZWxkaWQrIiwiK25vZGVfaWQrIiwiK25vZGVfZmxhZysiXSI7CiAgICAgICAgICAgICAgICAgICAgaWYoaSA8IChuZmllbGRzIC0gMSkpIG1hcCArPSAiOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBtYXAgKz0gIn0iOwogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAibm9kZWlkPSIrbm9kZWlkKyImdGFibGVpZD0iK3RhYmxlaWQrIiZmbGFnPSIgCiAgICAgICAgICAgICAgICAgICAgK2ZsYWcrIiZtYXA9IitlbmNvZGVVUklDb21wb25lbnQobWFwKQogICAgICAgICAgICAgICAgICAgICsiJnBhdHRlcm49IitlbmNvZGVVUklDb21wb25lbnQocGF0dGVybik7CiAgICAgICAgICAgICAgICBpZih1cmwpIGFyZ3YgKz0gIiZ1cmw9IitlbmNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgIGlmKG9wID09ICd0ZW1wbGF0ZV9hZGQnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFyZ3YgKz0gIiZvcD10ZW1wbGF0ZV9hZGQiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAndGVtcGxhdGVfdXBkYXRlJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImb3A9dGVtcGxhdGVfdXBkYXRlJnRlbXBsYXRlaWQ9Iit0ZW1wbGF0ZWlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZyZW1vdmUoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3AgPT0gJ3RlbXBsYXRlX2FkZCcpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNldFRlbXBsYXRlZm9ybSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhpZGRlblRlbXBsYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1RlbXBsYXRlcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9kYXRhYmFzZQogICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RWaWV3KGRpdiwgZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGVsaXN0ID0gbmV3IEFycmF5KCd0YXNraW5mbycsJ2RhdGFiYXNlJywgJ3RlbXBsYXRlJywgCiAgICAgICAgICAgICAgICAgICAgJ3VybGJsb2NrJywgJ2RucycsICdwcm94eScsICdkYXRhJywgJ3VzZXInKTsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgdmFyIG9saSA9IG51bGwsIG9iID0gbnVsbCwgb2RpdiA9IG51bGw7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBlbGlzdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigob2xpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYicraSkpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYob2xpID09IGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGkuY2xhc3NOYW1lID0gJ3RhYi1zZWxlY3RlZCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGkuY2xhc3NOYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRpdiA9PSBlbGlzdFtpXSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxpc3RbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICBvYi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGlzdFtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9kaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxpc3RbaV0gPT0gJ3Rhc2tpbmZvJykgCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9UaW1lcikgd2luZG93LmNsZWFySW50ZXJ2YWwob1RpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9UaW1lciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihlbGlzdFtpXSA9PSAnZGF0YWJhc2UnKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2Zm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZvcm0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpdmZvcm0pIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RiZmllbGRmb3JtJykpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGVsaXN0W2ldID09ICd0ZW1wbGF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dGZvcm0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpdmZvcm0pIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLXRlc3QnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLWNvbmZpZycpKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2Zm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZWxpc3RbaV0gPT0gJ3VybGJsb2NrJykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdmZvcm0gPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybGxpc3QtZm9ybScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGl2Zm9ybSkgZGl2Zm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGRpdmZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkLXZpZXcnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGRpdiA9PSAndGFza2luZm8nKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ09LJyk7CiAgICAgICAgICAgICAgICAgICAgbG9hZFRhc2tJbmZvKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGRpdiA9PSAnZGF0YWJhc2UnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJzZWxlY3QnKTsKICAgICAgICAgICAgICAgICAgICBpZihvZGIuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlzdFRhYmxlcygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICd0ZW1wbGF0ZScpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVib2R5Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYodHJlZWJvZHkuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgQWRkTm9kZSgtMSwwLCJSb290IiwwKTsKICAgICAgICAgICAgICAgICAgICAgICAgRm9sZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZF8wJykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICd1cmxibG9jaycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybGJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybGJsb2NrJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodXJsYmxvY2spCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB1cmxibG9jay5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybC1saXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVybGxpc3QuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3VybGJsb2NrZm9ybSddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdFBOb2RlcygwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICdkYXRhJykKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGRpdiA9PSAnZG5zJykKICAgICAgICAgICAgICAgIC8vJiYgb2IuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc2V0RE5TTGlzdCgpOwogICAgICAgICAgICAgICAgICAgIExpc3RETlMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICdwcm94eScpCiAgICAgICAgICAgICAgICAvLyYmIG9iLmlubmVySFRNTCA9PSAnJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldFByb3h5TGlzdCgpOwogICAgICAgICAgICAgICAgICAgIExpc3RQcm94eSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihkaXYgPT0gJ3VzZXInKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBsb2FkVGFza0luZm8oKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBWaWV3VGFzaygndGFza192aWV3Jyk7CiAgICAgICAgICAgICAgICBvVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoIlZpZXdUYXNrKCd0YXNrX3ZpZXcnKSIsIDEwMDAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBHZXRDb250ZW50KHVybCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgLy94bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIC8veG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChudWxsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5EQkZpZWxkZm9ybSgpOwogICAgICAgICAgICB9CgkgICAgICAgIGZ1bmN0aW9uIGdldEZyYW1lRG9jdW1lbnQoaWQpCgkgICAgICAgIHsKCSAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CgkgICAgICAgICAgICB2YXIgRG9jID0gbnVsbDsKCSAgICAgICAgICAgIGlmKGlmcmFtZSkKCSAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3NlciA9IG5hdmlnYXRvci5hcHBOYW1lOwogICAgICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247CiAgICAgICAgICAgICAgICAgICAgaWYodmVyc2lvbi5tYXRjaCgvTVNJRS9pKSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykgLy9JRQoJICAgICAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAgICAgRG9jID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYoaWZyYW1lLmNvbnRlbnREb2N1bWVudCkgLy8gRm9yIE5TNgoJICAgICAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAgICAgRG9jID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZihpZnJhbWUuZG9jdW1lbnQpCgkgICAgICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICAgICBEb2MgPSBpZnJhbWUuZG9jdW1lbnQ7CgkgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIG51bGw7CgkgICAgICAgICAgICAgICAgaWYoRG9jKQoJICAgICAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAgICAgaWYoRG9jLmRlc2lnbk1vZGUpIERvYy5kZXNpZ25Nb2RlID0gJ09uJzsKCSAgICAgICAgICAgICAgICAgICAgaWYoRG9jLmNvbnRlbnRFZGl0YWJsZSkgRG9jLmNvbnRlbnRFZGl0YWJsZSA9IHRydWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIERvYzsKCSAgICAgICAgfQoJICAgICAgICBmdW5jdGlvbiBnZXRTZWxlY3RDb250ZW50KGlkKQoJICAgICAgICB7CgkgICAgICAgICAgICB2YXIgRG9jID0gZ2V0RnJhbWVEb2N1bWVudChpZCk7CgkgICAgICAgICAgICBpZihEb2MpCgkgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYoRG9jLmdldFNlbGVjdGlvbikKICAgICAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgIGFsZXJ0KERvYy5nZXRTZWxlY3Rpb24oKS5wYXJlbnROb2RlLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRG9jLnNlbGVjdGlvbikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KERvYy5zZWxlY3Rpb24ucGFyZW50Tm9kZS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBWaWV3U2VsZWN0KGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5pbm5lckhUTUwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoZWxlbWVudC5wYXJlbnROb2RlLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gTG9hZExpbmtPcHRpb25zKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG5vZGVpZCA9IC0xOwogICAgICAgICAgICAgICAgdmFyIHRhYmxlaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgIHZhciBvZGl2ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBsaW5rbWFwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBvc2VsZWN0ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBkYmFzZSA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXTsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKG5vZGVpZCA9IGZvcm1bJ25vZGVpZCddLnZhbHVlKSA+IDAgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2xpbmttYXAnXS52YWx1ZSkgbGlua21hcCA9IGV2YWwoZm9ybVsnbGlua21hcCddLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBmbGFnID0gZm9ybVsnZmxhZyddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHRhYmxlaWQgPSBmb3JtWyd0YWJsZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYoKG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YWJhc2UnKSkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHN0cmRiID0gb2Rpdi5nZXRBdHRyaWJ1dGUoJ2RiYXNlJykpIAogICAgICAgICAgICAgICAgICAgICAgICAmJiAoZGJhc2UgPSBldmFsKHN0cmRiKSkpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0ID0gZm9ybVsnbGlua190YWJsZSddOwogICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGRiYXNlWyd0YWJsZXMnXSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUgPSBkYmFzZVsndGFibGVzJ11beF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnNbaV0gPSBuZXcgT3B0aW9uKHRhYmxlWyduYW1lJ10sIHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcCAmJiB4ID09IHRhYmxlaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICsraTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rbWFwICYmIHRhYmxlaWQgID49IDApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZHMgPSBkYmFzZVsndGFibGVzJ11bdGFibGVpZF1bJ2ZpZWxkcyddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdCA9IGZvcm1bJ2xpbmtfZmllbGQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9ucy5sZW5ndGggPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBmaWVsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbihmaWVsZHNbeF1bJ25hbWUnXSwgeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcCAmJiBmbGFnID49IDAgJiYgKGZsYWcgJiA4KSAmJiB4ID09IGxpbmttYXBbJ2ZpZWxkaWQnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsraTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgc3RyY2hpbGRzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCAmJiAob2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlJytub2RlaWQpKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAoc3RyY2hpbGRzID0gb2Rpdi5nZXRBdHRyaWJ1dGUoJ2NoaWxkcycpKSAKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKGNoaWxkcyA9IGV2YWwoc3RyY2hpbGRzKSkgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGZvcm1bJ2xpbmttYXAnXS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3QgPSBmb3JtWydsaW5rX25vZGUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoaWxkcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbihjaGlsZHNbeF0sIHgpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rbWFwICYmIHggPT0gbGlua21hcFsnbm9kZWlkJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoJCSAgICBmdW5jdGlvbiBMb2FkVVJMKGZvcm0pCgkJICAgIHsKCQkgICAgICAgIHZhciB1cmwgPSBmb3JtWyd1cmwnXS52YWx1ZTsKCQkgICAgICAgIGlmKHVybCkKCQkgICAgICAgIHsKCQkgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CgkJICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCgkJICAgICAgICAgICAgewoJCSAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdFVSTCA9ICcvcHJveHkvJyt1cmw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ21ldGhvZCddWzFdLmNoZWNrZWQgPT0gdHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKHBvcyA9IHVybC5pbmRleE9mKCc/JykpID49IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFVSTCA9ICcvcHJveHkvJyt1cmwuc3Vic3RyaW5nKDAsIHBvcy0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gdXJsLnN1YnN0cmluZyhwb3MgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VVJMID0gJy9wcm94eS8nK3VybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCByZXF1ZXN0VVJMLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCQkgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RVUkwgPSAnL3Byb3h5LycrdXJsOwoJCSAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdHRVQnLCByZXF1ZXN0VVJMLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKCQkgICAgICAgICAgICAgICAgewoJCSAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQoJCSAgICAgICAgICAgICAgICAgICAgewoJCSAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKCQkgICAgICAgICAgICAgICAgICAgICAgICB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSB4bWxIdHRwLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXYgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigoZWRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfY29kZV9vcCcpKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl2LnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlX3ZpZXcnKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudCkgZWxlbWVudC5pbm5lckhUTUwgPSAiIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcGxhdGVkaXYnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl2LnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXVsnY29kZSddLnZhbHVlID0gc3RyOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZm9ybXNbJ3RlbXBsYXRlZm9ybSddWyd1cmwnXS52YWx1ZSA9IHVybDsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXVsnbWV0aG9kJ10udmFsdWUgPSBtZXRob2Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoImlkIiwgJ2VkaXRvci1mcmFtZScpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKCJzcmMiLCAnYWJvdXQ6YmxhbmsnKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhbWUpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9jID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGRvYyA9IGdldEZyYW1lRG9jdW1lbnQoJ2VkaXRvci1mcmFtZScpKSkKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSBzdHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHIubWF0Y2goLzxiYXNlIC4qP2hyZWY9Lio/Pi9pKSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNldXJsID0gdXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigocG9zID0gdXJsLmxhc3RJbmRleE9mKCcvJykpID4gNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2V1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHBvcysxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VocmVmID0gIjxoZWFkPjxiYXNlIGhyZWY9JyIrYmFzZXVybCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgPSBzdHIucmVwbGFjZSgvPGhlYWQ+L2ksIGJhc2VocmVmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5vcGVuKCk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Mud3JpdGUoaHRtbHN0cik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ11bJ2NvZGUnXS52YWx1ZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0geG1sSHR0cC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyX3dhaXQoKTsKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3dhaXQoKTsKCQkgICAgICAgICAgICB9CgkJICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gVmlld0RhdGFiYXNlKCk7CgkJICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gUmVzZXREaXYoaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICAgICAgICAgICAgICBpZihkaXYpIGRpdi5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldFVSTExpc3QoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyd1cmxibG9ja2Zvcm0nXTsKICAgICAgICAgICAgICAgIGlmKGZvcm0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzZXREaXYoJ3VybC1saXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgZm9ybVsnbGV2ZWwnXS5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBmb3JtWyd1cmwnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIGZvcm1bJ3VybCddLnZhbHVlID0gJ2h0dHA6Ly8nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RQTm9kZXMobm9kZWlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyd1cmxibG9ja2Zvcm0nXTsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgbm9kZWlkID49IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAiIjsKICAgICAgICAgICAgICAgICAgICBpZihub2RlaWQgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPW5vZGVfYnJvdGhlciZub2RlaWQ9Iitub2RlaWQ7CiAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD1ub2RlX2NoaWxkcyZub2RlaWQ9Iitub2RlaWQ7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SZXNldFVSTExpc3QoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG5vZGUgPSBldmFsKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9zZWxlY3QgPSBmb3JtWydub2RlaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3NlbGVjdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDAsIHggPSAxLCB0aWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRuYW1lID0gIi4uIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRub2RlWydpZCddID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnNbeCsrXT1uZXcgT3B0aW9uKHRuYW1lLCB0bm9kZVsnaWQnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCB0bm9kZVsnbmNoaWxkcyddOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlkID0gdG5vZGVbJ2NoaWxkcyddW2ldWydpZCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRuYW1lID0gdG5vZGVbJ2NoaWxkcyddW2ldWyduYW1lJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID09IHRpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW3hdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1t4XSA9IG5ldyBPcHRpb24odG5hbWUsIHRpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyt4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtb3ZlQ2hpbGROb2Rlcyhmb3JtLCBub2RlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvbGlzdCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgb2NoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChvbGlzdCA9IGZvcm1bJ25vZGVpZCddKSAmJiAob2NoaWxkcyA9IGZvcm1bJ2NoaWxkcyddKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvbGlzdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgeCA9IDE7CiAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgb2NoaWxkcy5vcHRpb25zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG5hbWUgPSBvY2hpbGRzLm9wdGlvbnNbaV0udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgdGlkID0gb2NoaWxkcy5vcHRpb25zW2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aWQgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0bmFtZSA9PSAnKicpIHRuYW1lID0gJy4uJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA9PSB0aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xpc3Qub3B0aW9uc1t4KytdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xpc3Qub3B0aW9uc1t4KytdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvY2hpbGRzLm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0Tm9kZVVSTHMoZm9ybSwgb25hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IC0xOwogICAgICAgICAgICAgICAgdmFyIG9zZWxlY3QgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgICAgICAgIHZhciBvdGV4dCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChvc2VsZWN0ID0gZm9ybVtvbmFtZV0pICYmIChpbmRleCA9IG9zZWxlY3Quc2VsZWN0ZWRJbmRleCkgPiAwIAogICAgICAgICAgICAgICAgICAgICYmIChub2RlaWQgPSBvc2VsZWN0Lm9wdGlvbnNbaW5kZXhdLnZhbHVlKSA+PSAwKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL2lmKG9uYW1lID09ICdjaGlsZHMnKSBtb3ZlQ2hpbGROb2Rlcyhmb3JtLCBub2RlaWQpOwogICAgICAgICAgICAgICAgICAgIGxldmVsID0gZm9ybVsnbGV2ZWwnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBSZXNldFVSTExpc3QoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGlzdFVSTHMoJ2xpc3QnLCBub2RlaWQsIGxldmVsLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBWaWV3Q2hpbGRzVVJMKHVybG5vZGVpZCwgbGV2ZWwsIHBhZ2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZih1cmxub2RlaWQgPj0gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldFVSTExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD11cmxub2RlX2NoaWxkcyZ1cmxub2RlaWQ9Iit1cmxub2RlaWQrIiZwYWdlPSIrcGFnZTsKICAgICAgICAgICAgICAgICAgICBpZihsZXZlbCA+PSAwKSBhcmd2ICs9ICImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vZGVVUkxzKHhtbEh0dHAucmVzcG9uc2VUZXh0LCBwYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RVUkxzKHR5cGUsIG5vZGVpZCwgbGV2ZWwsIHBhZ2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihub2RlaWQgPj0gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldFVSTExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gJ2xpc3QnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD11cmxub2RlX2xpc3Qmbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPXVybG5vZGVfY2hpbGRzJnVybG5vZGVpZD0iK25vZGVpZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYXJndiArPSAiJnBhZ2U9IitwYWdlOwogICAgICAgICAgICAgICAgICAgIGlmKGxldmVsID49IDApIGFyZ3YgKz0gIiZsZXZlbD0iK2xldmVsOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93Tm9kZVVSTHMoeG1sSHR0cC5yZXNwb25zZVRleHQsIHBhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93UmVjb3JkKHR4dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHJlcyA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZmllbGRzID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciB4ID0gMDsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiAocmVzID0gZXZhbCh0eHQpKSAhPSBudWxsICYmIChmaWVsZHMgPSByZXNbJ2ZpZWxkcyddKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICI8ZGl2IGlkPSdyZWNvcmQtaGVhZGVyJyBvbm1vdXNlZG93bj0nIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICJkaXZtb3ZlKGV2ZW50LCB0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9J2RpdnJlbW92ZSgiOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gInRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPlg8L3NwYW4+Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9J2RpdnJlbW92ZSgiOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gInRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlKScgPuWFs+mXrTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAvL3N0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A757uT5p6cOiIrbnJlY29yZHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPC9kaXY+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8ZGl2IGlkPSdyZWNvcmQtcmVzJyA+IjsKICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBmaWVsZHMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuIGNsYXNzPSdyZWNvcmQtdGl0bGUnPiIreCsiPC9zcGFuPjxocj4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuID4iCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPHRleHRhcmVhIGNvbHM9OTAgcm93cz00ID4iK2Jhc2U2NHN0cmRlY29kZShmaWVsZHNbeF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIjwvdGV4dGFyZWE+PGJyPiI7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpZigoZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmQtdmlldycpKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHN0cjsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gJ3JlY29yZC12aWV3JzsKICAgICAgICAgICAgICAgICAgICB2YXIgZGl2d2lkdGggPSA3NTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5mcmFtZScpOwogICAgICAgICAgICAgICAgICAgIHZhciB4bGVmdCA9IHBhcnNlSW50KG9ib2R5Lm9mZnNldFdpZHRoKSAtIGRpdndpZHRoOwogICAgICAgICAgICAgICAgICAgIHZhciB4ID0gb2JvZHkub2Zmc2V0TGVmdCArKHhsZWZ0LzIpOwogICAgICAgICAgICAgICAgICAgIHZhciB5ID0gMjAgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSB4KydweCc7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB5KydweCc7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGRpdndpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgICAgIG92ZXJCRnJhbWUoZWxlbWVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld1JlY29yZCh1cmxpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIGlmKHVybGlkID4gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1yZWNvcmRfdmlldyZ1cmxub2RlaWQ9Iit1cmxpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1JlY29yZCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIFNob3cgTm9kZSBVUkxzICovCiAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dOb2RlVVJMcyh0eHQsIHBhZ2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3VybGJsb2NrZm9ybSddOwogICAgICAgICAgICAgICAgdmFyIHVybGxpc3QgPSBudWxsOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIGZvcm0gJiYgKHVybGxpc3QgPSBldmFsKHR4dCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzZXRVUkxMaXN0KCk7IAogICAgICAgICAgICAgICAgICAgIHZhciB1cmxpdGVtID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgdG5hbWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbmNoaWxkcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybG5vZGVpZCA9IC0xOwogICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmRpZCA9IC0xOwogICAgICAgICAgICAgICAgICAgIHZhciBpID0gMCwgeCA9IDE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSAiPHVsIGNsYXNzPSd1cmwtdWwnPiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZyb20gPSAwLCB0byA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBodG1sc3RyID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3R0eXBlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBwaWQgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gImNoaWxkcyI7CiAgICAgICAgICAgICAgICAgICAgdXJsbm9kZWlkID0gdXJsbGlzdFsnaWQnXTsKICAgICAgICAgICAgICAgICAgICBmcm9tID0gcGFyc2VJbnQocGFnZSkgLSAxMDsKICAgICAgICAgICAgICAgICAgICBpZihmcm9tIDwgMSkgZnJvbSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdG8gPSBmcm9tICsgMjA7CiAgICAgICAgICAgICAgICAgICAgaWYodG8gPiB1cmxsaXN0WydwYWdlcyddKSB0byA9IHBhcnNlSW50KHVybGxpc3RbJ3BhZ2VzJ10pICsgMTsKICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiPGxpIGNsYXNzPSd1cmxsaS1oZWFkZXInPiAiOwogICAgICAgICAgICAgICAgICAgIGlmKChwcGlkID0gdXJsbGlzdFsncGFyZW50J10pID49IDApIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocHBpZCA9PSAwKSAKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdHR5cGUgPSAibGlzdCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcGlkID0gdXJsbGlzdFsncHBub2RlJ107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0dHlwZSA9IHR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIls8YSBocmVmPSdqYXZhc2NyaXB0OjsnIGNsYXNzPSdlYWRkJyBvbmNsaWNrPVwiTGlzdFVSTHMoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICtsaXN0dHlwZSsiJywiK3BwaWQrIiwgIitsZXZlbCsiLCAxKTtcIj7kuIrkuIDlsYI8L2E+XSZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICJVUkzmgLvmlbDvvJoiK3VybGxpc3RbJ25jaGlsZHMnXTsKICAgICAgICAgICAgICAgICAgICBpZih1cmxsaXN0WydwYWdlcyddID4gMSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICIg5YWxIit1cmxsaXN0WydwYWdlcyddKyLpobUiOwogICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZnJvbSA+IDIwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiPGEgY2xhc3M9J3VybC1saS1wYWdlJyBocmVmPSdqYXZhc2NyaXB0OjsnICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiIG9uY2xpY2s9XCJMaXN0VVJMcygnIit0eXBlKyInLCAiK2lkKyIsJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArbGV2ZWwrIicsJzEnKTtcIj4xPC9hPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Li4uIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IGZyb207IGkgPCB0bzsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPT0gcGFnZSkgcGh0bWxzdHIgKz0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIjxhIGNsYXNzPSd1cmwtbGktcGFnZScgaHJlZj0namF2YXNjcmlwdDo7JyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICJvbmNsaWNrPVwiTGlzdFVSTHMoJyIrdHlwZSsiJywgIit1cmxub2RlaWQrIiwnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArbGV2ZWwrIicsJyIraSsiJyk7XCI+IitpKyI8L2E+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZih0byA8ICh1cmxsaXN0WydwYWdlcyddIC0gMjApKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdXJsbGlzdFsncGFnZXMnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsuLi4mbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIjxhIGNsYXNzPSd1cmwtbGktcGFnZScgaHJlZj0namF2YXNjcmlwdDo7JyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJMaXN0VVJMcygnIit0eXBlKyInLCAiK3VybG5vZGVpZCArIiwnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICtsZXZlbCsiJywnIitpKyInKTtcIj4iK2krIjwvYT4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaWYocGh0bWxzdHIgIT0gIiIpaHRtbHN0ciArPSBwaHRtbHN0ciArICI8aHI+IjsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHBodG1sc3RyKTsKICAgICAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiB1cmxsaXN0WydjaGlsZHMnXSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsaXRlbSA9IHVybGxpc3RbJ2NoaWxkcyddW3hdOwogICAgICAgICAgICAgICAgICAgICAgICBub2RlaWQgPSB1cmxpdGVtWydub2RlaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgLy91cmxpZCA9IHVybGl0ZW1bJ3VybGlkJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsID0gdXJsaXRlbVsnbGV2ZWwnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbm9kZWlkID0gdXJsaXRlbVsnaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWNvcmRpZCA9IHVybGl0ZW1bJ3JlY29yZGlkJ107CiAgICAgICAgICAgICAgICAgICAgICAgIG5jaGlsZHMgPSB1cmxpdGVtWyduY2hpbGRzJ107CiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHVybGl0ZW1bJ3VybCddOwogICAgICAgICAgICAgICAgICAgICAgICBjc3MgPSAndXJsLWxpJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodXJsaXRlbVsnc3RhdHVzJ10gPCAwKSBjc3MgPSAndXJsLWxpLXdhcm4nOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9JyIrY3NzKyInIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywnIitjc3MrIicpXCIgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ3VybC1saS1zZWxlY3RlZCcpXCIgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gaSsiOiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxhIGhyZWY9JyIrdXJsKyInIHRhcmdldD0nX2JsYW5rJz4iK3VybCsiPC9hPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5jaGlsZHMgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJbPHNwYW4gY2xhc3M9J2V2aWV3JyAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25jbGljaz1cIlZpZXdDaGlsZHNVUkwoIit1cmxub2RlaWQrIiwwLDEpXCI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gbmNoaWxkcysiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzZWxlY3QgbmFtZT0nbGV2ZWwnIG9uY2hhbmdlPVwiVXBkYXRlTm9kZVVSTCgiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9IG5vZGVpZCsiLCIrdXJsbm9kZWlkKyIsICIrdXJsbm9kZWlkKyIsIHRoaXMsICIrcGFnZSsiKVwiPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7kvJjlhYjnuqc8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8b3B0aW9uIHZhbHVlPScwJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAwKSBodG1sc3RyICs9ICJzZWxlY3RlZD10cnVlIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPuaZrumAmjwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxvcHRpb24gdmFsdWU9JzEnIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobGV2ZWwgPT0gMSkgaHRtbHN0ciArPSAic2VsZWN0ZWQ9dHJ1ZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIj7ntKfmgKU8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3NlbGVjdD4iOwogICAgICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXZpZXcnIHRpdGxlPSdWaWV3JyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiVmlld1JlY29yZCgiK3VybG5vZGVpZCsiKVwiPiIrY2hydmlldysiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlZGVsZXRlJyB0aXRsZT0nRGVsZXRlJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiRGVsZXRlTm9kZVVSTCgiK25vZGVpZCsiLCAiK3VybG5vZGVpZCsiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiciK3VybCsiJywnIitwYWdlKyInKVwiPiIrY2hyZGVsKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZih1cmxsaXN0WydwYWdlcyddID4gMSkgaHRtbHN0ciArPSAiPGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaWYocGh0bWxzdHIgIT0gIiIpaHRtbHN0ciArPSBwaHRtbHN0cjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cmwtbGlzdCcpOwogICAgICAgICAgICAgICAgICAgIGlmKGRpdikgZGl2LmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBIaWRkZW5VUkxMaXN0Rm9ybSgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsbGlzdC1mb3JtJyk7CiAgICAgICAgICAgICAgICBpZihkaXYpIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEFkZE5vZGVVUkwoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG5vZGVpZCA9IC0xOwogICAgICAgICAgICAgICAgdmFyIHBhcmVudGlkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSAtMTsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZSkgPiAwIAogICAgICAgICAgICAgICAgICAgICYmICh1cmwgPSBmb3JtWyd1cmwnXS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD11cmxub2RlX2FkZCZub2RlaWQ9Iitub2RlaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgKz0gIiZ1cmw9IitlbmNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgICAgICBpZigocGFyZW50aWQgPSBmb3JtWydwYXJlbnRpZCddLnZhbHVlKSA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImcGFyZW50aWQ9IitwYXJlbnRpZDsKICAgICAgICAgICAgICAgICAgICBpZigobGV2ZWwgPSBmb3JtWydsZXZlbCddLnZhbHVlKSA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93Tm9kZVVSTHMoeG1sSHR0cC5yZXNwb25zZVRleHQsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuVVJMTGlzdEZvcm0oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFhBZGROb2RlVVJMKGUsIHBhcmVudGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1cmxsaXN0LWZvcm0iKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sidXJsbGlzdC1hZGQtZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsncGFyZW50aWQnXS52YWx1ZSA9IHBhcmVudGlkOwogICAgICAgICAgICAgICAgZm9ybVsndXJsJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ3VybCddLnZhbHVlID0gJ2h0dHA6Ly8nOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlTm9kZVVSTCh1cmxpZCwgb3NlbGVjdCwgcGFnZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IChvc2VsZWN0KSA/IG9zZWxlY3Quc2VsZWN0ZWRJbmRleCA6IDA7CiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSAoaW5kZXggPj0gMCkgPyBvc2VsZWN0Lm9wdGlvbnNbaW5kZXhdLnZhbHVlIDogLTE7CiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IChpbmRleCA+PSAwKT8gb3NlbGVjdC5vcHRpb25zW2luZGV4XS50ZXh0IDogIiI7CiAgICAgICAgICAgICAgICBpZih1cmxpZCA+IDAgJiYgbGV2ZWwgPj0gMAogICAgICAgICAgICAgICAgICAgICYmIGNvbmZpcm0oIuaCqOehruiupOS/ruaUueS8mOWFiOe6p+S4ulsiK3RleHQrIl0/IikKICAgICAgICAgICAgICAgICAgICAmJih4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXVybG5vZGVfdXBkYXRlJnVybG5vZGVpZD0iIAogICAgICAgICAgICAgICAgICAgICAgICArdXJsbm9kZWlkKyImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vZGVVUkxzKHhtbEh0dHAucmVzcG9uc2VUZXh0LCBwYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVOb2RlVVJMKG5vZGVpZCwgdXJsbm9kZWlkLCB1cmwsIHBhZ2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihub2RlaWQgPiAwICYmIHVybG5vZGVpZCA+IDAgCiAgICAgICAgICAgICAgICAgICAgJiYgY29uZmlybSgi5oKo56Gu6K6k5Yig6ZmkVVJMWyIrdXJsKyJdID8iKQogICAgICAgICAgICAgICAgICAgICYmKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9dXJsbm9kZV9kZWxldGUmbm9kZWlkPSIrbm9kZWlkKyImdXJsbm9kZWlkPSIrdXJsbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93Tm9kZVVSTHMoeG1sSHR0cC5yZXNwb25zZVRleHQsIHBhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICBSZXNldERpdigndXJsLWxpc3QnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc2V0RE5TTGlzdCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ2Rucy1hZGQtZm9ybSddOwogICAgICAgICAgICAgICAgaWYoZm9ybSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBmb3JtWydob3N0J10uZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICBmb3JtWydob3N0J10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93RE5TKHR4dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkbnMtbGlzdCcpOwogICAgICAgICAgICAgICAgdmFyIG9iamRuc2xpc3QgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGRuc2xpc3QgPSBudWxsOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIGRpdiAmJiAob2JqZG5zbGlzdCA9IGV2YWwodHh0KSkgIT0gbnVsbCAKICAgICAgICAgICAgICAgICAgICAmJiAoZG5zbGlzdCA9IG9iamRuc2xpc3RbJ2Ruc2xpc3QnXSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzZXRETlNMaXN0KCk7IAogICAgICAgICAgICAgICAgICAgIHZhciBob3N0aWQgPSAtMTsKICAgICAgICAgICAgICAgICAgICB2YXIgaG9zdCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSAtMTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICI8dWwgY2xhc3M9J2Rucy11bCc+IjsKICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBkbnNsaXN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaG9zdGlkID0geDsKICAgICAgICAgICAgICAgICAgICAgICAgaG9zdCA9ICBkbnNsaXN0W3hdWydob3N0J107CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGRuc2xpc3RbeF1bJ3N0YXR1cyddOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2Rucy1saScgb25tb3VzZW91dD1cIm91dERpdih0aGlzLCAnZG5zLWxpJylcIiAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW1vdmU9XCJvbkRpdih0aGlzLCAnZG5zLWxpLXNlbGVjdGVkJylcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSBob3N0OwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdGF0dXMgPiAwKSBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nc3RhdHVzX2Vycic+5pyJ5pWIPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdzdGF0dXNfb2snPuWkseaViDwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRlbGV0ZUROUygiK2hvc3RpZCsiLCAnIitob3N0KyInKVwiPiIrY2hyZGVsKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPiI7CiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBBZGRETlMoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGhvc3QgPSAiIjsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChob3N0ID0gZm9ybVsnaG9zdCddLnZhbHVlKSAKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1kbnNfYWRkJmhvc3Q9Iitob3N0OwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dETlMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZUROUyhob3N0aWQsIGhvc3QpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihob3N0aWQgPj0gMCAmJiBob3N0CiAgICAgICAgICAgICAgICAgICAgJiYgY29uZmlybSgi5oKo56Gu6K6k5Yig6ZmkRE5TWyIraG9zdCsiXSA/IikKICAgICAgICAgICAgICAgICAgICAmJih4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPWRuc19kZWxldGUmaG9zdGlkPSIraG9zdGlkKyImaG9zdD0iK2hvc3Q7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dETlMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RETlMoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9ZG5zX2xpc3QiOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93RE5TKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldFByb3h5TGlzdCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3Byb3h5LWFkZC1mb3JtJ107CiAgICAgICAgICAgICAgICBpZihmb3JtKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZvcm1bJ2hvc3QnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIGZvcm1bJ2hvc3QnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dQcm94eSh0eHQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJveHktbGlzdCcpOwogICAgICAgICAgICAgICAgdmFyIHByb3h5bGlzdCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZih0eHQgJiYgZGl2ICYmIChwcm94eWxpc3QgPSBldmFsKHR4dCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzZXRQcm94eUxpc3QoKTsgCiAgICAgICAgICAgICAgICAgICAgdmFyIGhvc3RpZCA9IC0xOwogICAgICAgICAgICAgICAgICAgIHZhciBob3N0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IC0xOwogICAgICAgICAgICAgICAgICAgIHZhciBodG1sc3RyID0gIjx1bCBjbGFzcz0ncHJveHktdWwnPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gcHJveHlsaXN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaG9zdGlkID0gcHJveHlsaXN0W3hdWydpZCddOwogICAgICAgICAgICAgICAgICAgICAgICBob3N0ID0gIHByb3h5bGlzdFt4XVsnaG9zdCddOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSBwcm94eWxpc3RbeF1bJ3N0YXR1cyddOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J3Byb3h5LWxpJyBvbm1vdXNlb3V0PVwib3V0RGl2KHRoaXMsICdwcm94eS1saScpXCIgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ3Byb3h5LWxpLXNlbGVjdGVkJylcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSBob3N0OwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdGF0dXMgPiAwKSBodG1sc3RyICs9ICLmnInmlYgiOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlICBodG1sc3RyICs9ICLlrp7mlYgiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRlbGV0ZVByb3h5KCIraG9zdGlkKyIsICciK2hvc3QrIicpXCI+IitjaHJkZWwrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvdWw+IjsKICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gaHRtbHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBBZGRQcm94eShmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgaG9zdCA9ICIiOwogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIGlmKGZvcm0gPT0gbnVsbCB8fCAoaG9zdD1mb3JtWydob3N0J10udmFsdWUpID09ICIiIHx8IGhvc3QuaW5kZXhPZignOicpIDw9IDApIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfku6PnkIbmnI3liqHlmajmoLzlvI/kuLo6MjAyLjEwNi4wLjIwOjg4ODgnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihob3N0ICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXByb3h5X2FkZCZob3N0PSIraG9zdDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93UHJveHkoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZVByb3h5KGhvc3RpZCwgaG9zdCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIGlmKGhvc3RpZCA+PSAwICYmIGhvc3QKICAgICAgICAgICAgICAgICAgICAmJiBjb25maXJtKCLmgqjnoa7orqTliKDpmaTku6PnkIZbIitob3N0KyJdID8iKQogICAgICAgICAgICAgICAgICAgICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXByb3h5X2RlbGV0ZSZob3N0aWQ9Iitob3N0aWQrIiZob3N0PSIraG9zdDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1Byb3h5KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0UHJveHkoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9cHJveHlfbGlzdCI7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dQcm94eSh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICA8L3NjcmlwdD4KICAgIDwvaGVhZD4KICAgICAgICA8IS0tIDxib2R5IG9ubG9hZD0namF2YXNjcmlwdDpsb2FkVGFza0luZm8oKTsnPiAtLT4KPGJvZHk+CiAgPGRpdiBpZD0nbWFpbmZyYW1lJz4KICAgIDxkaXYgaWQ9J2l0YWInPgogICAgICAgIDx1bD4KICAgICAgICA8bGkgY2xhc3M9J3RhYi1zZWxlY3RlZCcgaWQ9J3RhYjAnIG9uY2xpY2s9InNlbGVjdFZpZXcoJ3Rhc2tpbmZvJyxldmVudCkiID7ov5DooYznirbmgIE8L2xpPgogICAgICAgIDxsaSBpZD0ndGFiMScgb25jbGljaz0ic2VsZWN0VmlldygnZGF0YWJhc2UnLGV2ZW50KSIgPuaVsOaNruW6k+mFjee9rjwvbGk+CiAgICAgICAgPGxpIGlkPSd0YWIyJyBvbmNsaWNrPSJzZWxlY3RWaWV3KCd0ZW1wbGF0ZScsIGV2ZW50KSIgPuaooeeJiOmFjee9rjwvbGk+CiAgICAgICAgPGxpIGlkPSd0YWIzJyBvbmNsaWNrPSJzZWxlY3RWaWV3KCd1cmxibG9jaycsIGV2ZW50KSIgPlVSTOeuoeeQhjwvbGk+CiAgICAgICAgPGxpIGlkPSd0YWI0JyBvbmNsaWNrPSJzZWxlY3RWaWV3KCdkbnMnLCBldmVudCkiID5ETlPnrqHnkIY8L2xpPgogICAgICAgIDxsaSBpZD0ndGFiNScgb25jbGljaz0ic2VsZWN0VmlldygncHJveHknLCBldmVudCkiID7ku6PnkIborr7nva48L2xpPgogICAgICAgIDwhLS08bGkgaWQ9J3RhYjcnIG9uY2xpY2s9InNlbGVjdFZpZXcoJ3VzZXInLCBldmVudCkiID7nlKjmiLfnrqHnkIY8L2xpPiAtLT4KICAgICAgICA8L3VsPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSd0YXNraW5mbyc+PC9kaXY+CiAgICA8ZGl2IGlkPSdkYXRhYmFzZSc+CiAgICAgICAgPHRhYmxlIHdpZHRoPTEwMCUgaGVpZ2h0PTEwMCUgY2VsbHNwYWNpbmc9MCBib3JkZXI9MCB2YWxpZ249dG9wIGFsaWduPWxlZnQgPgogICAgICAgIDx0cj4KICAgICAgICA8dGQgY2xhc3M9J2RibGlzdCcgdmFsaWduPXRvcCB3aWR0aD0zMDAgaGVpZ2h0PTEwMCUgPgogICAgICAgICAgICA8dGFibGUgY2VsbHNwYWNpbmc9MCBib3JkZXI9MCB2YWxpZ249dG9wIGFsaWduPWxlZnQgd2lkdGg9MTAwJSA+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249dG9wIGNsYXNzPSdkYnRpdGxlJyB3aWR0aD0xMDAlID4KICAgICAgICAgICAgICAgIOeCueWHuzxzcGFuIGNsYXNzPSdlYWRkJyB0aXRsZT0nQWRkJyBvbmNsaWNrPSdEQlhBZGQoZXZlbnQpJz4g4pyaIDwvc3Bhbj7mt7vliqDmlbDmja7ooag8L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249dG9wIHdpZHRoPTEwMCUgPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2Ric2VsZWN0Jz48L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgPC90ZD4KICAgICAgICA8dGQgdmFsaWduPXRvcCBhbGlnbj1sZWZ0IGNlbGxzcGFjaW5nPTAgYm9yZGVyPTAgPgogICAgICAgIDxkaXYgaWQ9J3RhYmxldmlldyc+CiAgICAgICAgPGRpdiBpZD0nZGJlZGl0Zm9ybSc+CiAgICAgICAgPGZvcm0gbmFtZT0iZGJlZGl0Zm9ybSIgY2xhc3M9J2xpc3Rmb3JtJyBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKSIgCiAgICAgICAgICAgIG9uc3VibWl0PSJyZXR1cm4gRWRpdEZpZWxkKHRoaXMpOyI+IAogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb3AnIHZhbHVlPSdmaWVsZF9hZGQnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3RhYmxlaWQnIHZhbHVlPScnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J2ZpZWxkaWQnIHZhbHVlPScnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29sZG5hbWUnIHZhbHVlPScnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3R5cGUnIHZhbHVlPScnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J2ZsYWcnIHZhbHVlPScnID4KICAgICAgICAgICAg5a2X5q615ZCNOjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSduYW1lJyBjbGFzcz0ndHh0aW5wdXQnIHNpemU9MjQ+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICDnsbvlnos6PHNlbGVjdCBuYW1lPSdmdHlwZScgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMSc+aW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScyJz5kb3VibGU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzQnIHNlbGVjdGVkPnRleHQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzgnPmxvbmc8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19pbmRleCcgdmFsdWU9MzIgPue0ouW8lQogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdvaycgY2xhc3M9J3N1Ym1pdCcgPgogICAgICAgIDwvZm9ybT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSdkYmZpZWxkcyc+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPgogICAgICAgIDwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3RlbXBsYXRlJz4KICAgIDx0YWJsZSBjZWxsc3BhY2luZz0wIGJvcmRlcj0wIHZhbGlnbj10b3AgYWxpZ249bGVmdCBoZWlnaHQ9MTAwJSBjbGFzcz0ndGVtcGxhdGUtdGFiJyA+CiAgICAgICAgPHRyPgogICAgICAgIDx0ZCB2YWxpZ249dG9wIGFsaWduPWxlZnQgaGVpZ2h0PTEwMCUgd2lkdGg9MzAwIGNsYXNzPSd0cmVldGFiJz4KICAgICAgICAgICAgPGRpdiBpZD0ndHJlZS10aXRsZSc+5oqT5Y+W5qCR55So5LqO5oyH5a+854is6Jmr55qE54is5Y+W6Lev5b6EPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9J3RyZWVib2R5JyBsZXZlbD0nMCc+PC9kaXY+CiAgICAgICAgPC90ZD4KICAgICAgICA8dGQgdmFsaWduPXRvcCBhbGlnbj1sZWZ0ID4KICAgICAgICAgICAgICA8ZGl2IGlkPSd0ZW1wbGF0ZS10aXRsZSc+5qih54mI55So5LqO5oq95Y+W6Ieq5bex6ZyA6KaB55qE5pWw5o2uPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBpZD0nbm9kZS10ZW1wbGF0ZSc+PC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBpZD0neHRlbXBsYXRlZm9ybSc+CiAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKTsnIG5hbWU9J3VybGZvcm0nIG9uc3VibWl0PSdyZXR1cm4gTG9hZFVSTCh0aGlzKTsnPgogICAgICAgICAgICAgICAgPGRpdiBpZD11cmxmb3JtID4KICAgICAgICAgICAgICAgIFVSTDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9JzY0JyBuYW1lPSd1cmwnPgogICAgICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1yYWRpbyBuYW1lPSdtZXRob2QnIHZhbHVlPScwJyBjaGVja2VkPkdFVAogICAgICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1yYWRpbyBuYW1lPSdtZXRob2QnIHZhbHVlPScxJz5QT1NUCiAgICAgICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nTG9hZCc+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3NvdXJjZV9jb2RlX29wJz4KICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nc291cmNlX3ZpZXcnPjwvZGl2PgogICAgICAgICAgICAgICAgICA8IS0tPGRpdiBpZD0nc291cmNlX29wJz48L2Rpdj4tLT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBpZD0ndGVtcGxhdGVkaXYnPgogICAgICAgICAgICAgICAgPGZvcm0gbmFtZT0idGVtcGxhdGVmb3JtIiBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKSIgPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0ndGVtcGxhdGVfYWRkJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbm9kZWlkJyB2YWx1ZT0nLTEnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0ZW1wbGF0ZWlkJyB2YWx1ZT0nLTEnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0YWJsZWlkJyB2YWx1ZT0nLTEnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdmbGFnJyB2YWx1ZT0nMCcgPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25maWVsZHMnIHZhbHVlPSctMScgPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J21hcCcgdmFsdWU9JycgPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J2xpbmttYXAnIHZhbHVlPScnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd1cmwnIHZhbHVlPScnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdtZXRob2QnIHZhbHVlPScnID4KICAgICAgICAgICAgICAgIOS7o+eggTo8dGV4dGFyZWEgbmFtZT0nY29kZScgcm93cz0xNiAgY29scz0xMjA+PC90ZXh0YXJlYT4gCiAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICDmqKHniYg6PHRleHRhcmVhIG5hbWU9J3BhdHRlcm4nIHJvd3M9NiAgY29scz0xMjA+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgIDxzcGFuIGFsaWduPWNlbnRlcj4KICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfcHVibGljJyA+5YWs5YWx5a2X5q61CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2dsb2JhbCcgPumHjeWkjeWMuemFjeWkmuadoQogICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19pZ25vcmVjYXNlJyA+5b+955Wl5aSn5bCP5YaZCiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0nbGlua190YWJsZScgb25jaGFuZ2U9ImNoYW5nZVRhYmxlKHRoaXMuZm9ybSwgJ2xpbmtfZmllbGQnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuaVsOaNruihqDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdidXR0b24nIHZhbHVlPSfmqKHmnb/mtYvor5UnIG9uY2xpY2s9IlRlc3RUZW1wbGF0ZSh0aGlzLmZvcm0pIj4KICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2J1dHRvbicgdmFsdWU9J+ehruiupOaooeadvycgb25jbGljaz0iQ29uZmlnVGVtcGxhdGUodGhpcy5mb3JtKSI+CiAgICAgICAgICAgICAgICA8aHI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSd0ZW1wbGF0ZS1iYXInPueUqOS6juaLvOaOpemakOiXj+eahOmTvuaOpeWSjEFqYXjlhoXlrrnlnZflnLDlnYA8L2Rpdj4KICAgICAgICAgICAgICAgIFVSTOinhOWImTo8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J2xpbmsnIHZhbHVlPScnIHNpemU9NDg+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdidXR0b24nIHZhbHVlPSfmtYvor5UnIG9uY2xpY2s9IlRlc3RUZW1wbGF0ZSh0aGlzLmZvcm0pIj4KICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2J1dHRvbicgdmFsdWU9J+ehruiupCcgb25jbGljaz0iRWRpdExpbmsodGhpcy5mb3JtKTsiPgogICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9cmFkaW8gbmFtZT0nbGlua19tZXRob2QnIHZhbHVlPScwJyBjaGVja2VkPkdFVAogICAgICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1yYWRpbyBuYW1lPSdsaW5rX21ldGhvZCcgdmFsdWU9JzEnPlBPU1QKICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgPHNwYW4gdGl0bGU9J+WIl+ihqOmhteS8muWumuacn+abtOaWsCc+PGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0nbGlua19saXN0JyA+5YiX6KGo6aG1PC9zcGFuPgogICAgICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9J2xpbmtfZmllbGQnID4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+5a2X5q61PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSdsaW5rX25vZGUnID4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+5a2Q6IqC54K5PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L3RkPgogICAgICAgIDwvdHI+CiAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSd1cmxibG9jayc+CiAgICA8ZGl2IGlkPSd1cmwtaGVhZGVyJz4KICAgIDxmb3JtIG5hbWU9J3VybGJsb2NrZm9ybScgY2xhc3M9J2xpc3Rmb3JtJyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKScgCiAgICAgICAgICAgIG9uc3VibWl0PSdyZXR1cm4gQWRkTm9kZVVSTCh0aGlzKScgPgogICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJ3ZhbHVlPSd1cmxfYWRkJyA+CiAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ncGFyZW50aWQnIHZhbHVlPScwJyA+CiAgICA8c2VsZWN0IG5hbWU9J25vZGVpZCcgb25jaGFuZ2U9J0xpc3ROb2RlVVJMcyh0aGlzLmZvcm0sICJub2RlaWQiKSc+CiAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+6YCJ5oup6IqC54K5PC9vcHRpb24+CiAgICA8L3NlbGVjdD4KICAgIDwhLS0KICAgICZuYnNwOyZuYnNwOwogICAgPHNlbGVjdCBuYW1lPSdjaGlsZHMnIG9uY2hhbmdlPSdMaXN0Tm9kZVVSTHModGhpcy5mb3JtLCAiY2hpbGRzIiknPgogICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPumAieaLqeWtkOiKgueCuTwvb3B0aW9uPgogICAgPC9zZWxlY3Q+CiAgICAhLS0+CiAgICAmbmJzcDsmbmJzcDsKICAgIDxzZWxlY3QgbmFtZT0nbWV0aG9kJz4KICAgIDxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7or7fmsYLmlrnms5U8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9JzAnID5HRVQ8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9JzEnID5QT1NUPC9vcHRpb24+CiAgICA8L3NlbGVjdD4KICAgICZuYnNwOyZuYnNwOwogICAgPHNlbGVjdCBuYW1lPSdsZXZlbCcgPgogICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuS8mOWFiOe6pzwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0nMCcgPuaZrumAmjwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0nMScgPue0p+aApTwvb3B0aW9uPgogICAgPC9zZWxlY3Q+CiAgICAmbmJzcDsmbmJzcDsKICAgIDxpbnB1dCB0eXBlPXRleHQgbmFtZT11cmwgc2l6ZT00OCB2YWx1ZT0naHR0cDovLycgPgogICAgJm5ic3A7Jm5ic3A7CiAgICA8aW5wdXQgdHlwZT1zdWJtaXQgbmFtZT0nc3VibWl0JyB2YWx1ZT0nQWRkJz4KICAgIDwvZm9ybT4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ndXJsLWxpc3QnPjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdkYXRhJz48L2Rpdj4KICAgIDxkaXYgaWQ9J2Rucyc+CiAgICA8ZGl2IGlkPSdkbnMtaGVhZGVyJz4KICAgIDxmb3JtIG5hbWU9J2Rucy1hZGQtZm9ybScgY2xhc3M9J2xpc3Rmb3JtJyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKScgCiAgICAgICAgICAgIG9uc3VibWl0PSdyZXR1cm4gQWRkRE5TKHRoaXMpJz4KICAgIOa3u+WKoEROUzo8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J2hvc3QnIHNpemU9NDggdmFsdWU9JycgPgogICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdvayc+CiAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J2Rucy1saXN0Jz48L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ncHJveHknPgogICAgPGRpdiBpZD0ncHJveHktaGVhZGVyJz4KICAgIDxmb3JtIG5hbWU9J3Byb3h5LWFkZC1mb3JtJyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKScgb25zdWJtaXQ9J3JldHVybiBBZGRQcm94eSh0aGlzKSc+CiAgICDmt7vliqDku6PnkIY6PGlucHV0IHR5cGU9dGV4dCBuYW1lPSdob3N0JyBzaXplPTQ4IHZhbHVlPScnID4KICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nb2snPgogICAgPC9mb3JtPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdwcm94eS1saXN0Jz48L2Rpdj4KCiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3VzZXInPgoKICAgIDwvZGl2Pgo8L2Rpdj4KICAgIDxkaXYgaWQ9J3R4dGZvcm0nPgogICAgICAgIDxmb3JtIG5hbWU9ImVkaXRvcmZvcm0iIGNsYXNzPSdsaXN0Zm9ybScgYWN0aW9uPSJqYXZhc2NyaXB0OnZvaWQoMCkiIAogICAgICAgICAgICBvbnN1Ym1pdD0icmV0dXJuIEVkaXROb2RlKHRoaXMpOyI+IAogICAgICAgICAgICA8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9IkNsb3NlVGhpcyh0aGlzKSIgPuWFs+mXrTwvc3Bhbj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0nbm9kZV9hZGQnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25vZGVpZCcgdmFsdWU9JzAnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3BpZCcgdmFsdWU9JzAnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J25vZGVuYW1lJyBjbGFzcz0ndHh0aW5wdXQnIHNpemU9MjQ+CiAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J29rJyBjbGFzcz0nc3VibWl0JyA+CiAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICA8c3BhbiB0aXRsZT0n54K55Ye75YWz6ZetJyBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9IkNsb3NlVGhpcyh0aGlzKSI+eDwvc3Bhbj4KICAgICAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J2RiZm9ybSc+CiAgICAgICAgPGZvcm0gbmFtZT0ieGRiZm9ybSIgY2xhc3M9J2xpc3Rmb3JtJyBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKSIgCiAgICAgICAgICAgIG9uc3VibWl0PSJyZXR1cm4gRWRpdERCKHRoaXMpOyI+IAogICAgICAgICAgICA8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9IkNsb3NlVGhpcyh0aGlzKSIgPuWFs+mXrTwvc3Bhbj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0ndGFibGVfYWRkJyA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0YWJsZWlkJyB2YWx1ZT0nMCcgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nbmFtZScgY2xhc3M9J3R4dGlucHV0JyBzaXplPTI0PgogICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdvaycgY2xhc3M9J3N1Ym1pdCcgPgogICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgPHNwYW4gdGl0bGU9J+eCueWHu+WFs+mXrScgY2xhc3M9J2Nsb3NlYnV0dG9uJyBvbmNsaWNrPSJDbG9zZVRoaXModGhpcykiPng8L3NwYW4+CiAgICAgICAgPC9mb3JtPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdkYmZpZWxkZm9ybSc+CiAgICAgICAgPGZvcm0gbmFtZT0iZGJmaWVsZGZvcm0iIGNsYXNzPSdsaXN0Zm9ybScgYWN0aW9uPSJqYXZhc2NyaXB0OnZvaWQoMCkiIAogICAgICAgICAgICBvbnN1Ym1pdD0icmV0dXJuIEVkaXRGaWVsZCh0aGlzKTsiPiAKICAgICAgICAgICAgPHNwYW4gY2xhc3M9J2Nsb3NldHh0JyBvbmNsaWNrPSJDbG9zZVRoaXModGhpcykiID7lhbPpl608L3NwYW4+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J3RhYmxlX2FkZCcgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmllbGRpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb2xkbmFtZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndHlwZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmxhZycgdmFsdWU9JycgPgogICAgICAgICAgICDlrZfmrrXlkI06PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J25hbWUnIGNsYXNzPSd0eHRpbnB1dCcgc2l6ZT0yND4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIOexu+Weizo8c2VsZWN0IG5hbWU9J2Z0eXBlJyA+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxJz5pbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzInPmRvdWJsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nNCcgc2VsZWN0ZWQ+dGV4dDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nOCc+bG9uZzwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2luZGV4JyB2YWx1ZT0zMiA+57Si5byVCiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8IS0tPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfbnVsbCcgdmFsdWU9MTYgPuWFgeiuuOS4uuepuiAtLSE+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nb2snIGNsYXNzPSdzdWJtaXQnID4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxzcGFuIHRpdGxlPSfngrnlh7vlhbPpl60nIGNsYXNzPSdjbG9zZWJ1dHRvbicgb25jbGljaz0iQ2xvc2VUaGlzKHRoaXMpIj54PC9zcGFuPgogICAgICAgIDwvZm9ybT4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ndXJsbGlzdC1mb3JtJz4KICAgICAgICA8Zm9ybSBuYW1lPSJ1cmxsaXN0LWFkZC1mb3JtIiBjbGFzcz0nbGlzdGZvcm0nIGFjdGlvbj0iamF2YXNjcmlwdDp2b2lkKDApIiAKICAgICAgICAgICAgb25zdWJtaXQ9InJldHVybiBBZGROb2RlVVJMKHRoaXMpOyI+IAogICAgICAgICAgICA8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9IkNsb3NlVGhpcyh0aGlzKSIgPuWFs+mXrTwvc3Bhbj4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J3VybF9hZGQnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3BhcmVudGlkJyB2YWx1ZT0nMCcgPgogICAgICAgICAgICA8c2VsZWN0IG5hbWU9J21ldGhvZCc+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+6K+35rGC5pa55rOVPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScwJyA+R0VUPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxJyA+UE9TVDwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0nbGV2ZWwnID4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7kvJjlhYjnuqc8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzAnID7mma7pgJo8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzEnID7ntKfmgKU8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8c2VsZWN0IG5hbWU9J25vZGVpZCcgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPumAieaLqeWtkOiKgueCuTwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICA8c3BhbiBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9IkNsb3NlVGhpcyh0aGlzKSI+eDwvc3Bhbj4KICAgICAgICAgICAgPGhyPgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgVVJMOjxpbnB1dCB0eXBlPXRleHQgbmFtZT11cmwgc2l6ZT00OCB2YWx1ZT0naHR0cDovLycgPgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IG5hbWU9J3N1Ym1pdCcgdmFsdWU9J0FkZCc+PGJyPgogICAgICAgICAgICA8aHI+CiAgICAgICAgICAgIGh0dHA6Ly9hYmMuY29tL2xpc3QvWzEtNDg3Nl0uaHRtbCAmbmJzcDsmbmJzcDtodHRwOi8vYWJjLmNvbS8wMGxpc3QvWzEtNDg3Nl17Mn0uaHRtbDxicj4KICAgICAgICAgICAgaHR0cDovL2FiYy5jb20vYWJjbGlzdC9bYS16XS5odG1sICZuYnNwOyZuYnNwO2h0dHA6Ly9hYmMuY29tL2FhYWxpc3QvW2Etel17M30uaHRtbAogICAgICAgIDwvZm9ybT4KICAgIDwvZGl2PgogICAgPGlmcmFtZSBpZD0nYmZyYW1lJyBmcmFtZWJvcmRlcj0wID48L2lmcmFtZT4KICAgIDwvYm9keT4KPC9odG1sPgo=";
#endif
