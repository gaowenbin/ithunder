#ifndef _BASE64_HTML_H
#define _BASE64_HTML_H
static const char *html_code_base64 = "PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPgogICAgPGhlYWQ+CiAgICA8dGl0bGU+6YeH6ZuG57O757uf55uR5o6n566h55CGPC90aXRsZT4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ij4KICAgIDxzdHlsZT4KICAgICAgICBib2R5LklFX003LCBib2R5LklFX004LCBib2R5LldpbjZ7Zm9udC1mYW1pbHk6IlNlZ29lIFVJIiwgVGFob21hLCBWZXJkYW5hLCBBcmlhbDt9CiAgICAgICAgYm9keS5TYWZhcml7bWluLXdpZHRoOjk4N3B4O30KICAgICAgICBib2R5LlNGX2lQaG9uZXstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6bm9uZTt9CiAgICAgICAgYm9keQogICAgICAgIHsKICAgICAgICAgICAgbWFyZ2luOjA7Zm9udC1mYW1pbHk6VGFob21hLCBWZXJkYW5hLCBBcmlhbDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRkZGQUZBOwogICAgICAgICAgICBjb2xvcjojMzMzOwogICAgICAgICAgICBmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgYm9yZGVyOjBweDsKICAgICAgICAgICAgd2lkdGg6MTAwJTsKICAgICAgICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgICAgfQogICAgICAgIGZvcm17bWFyZ2luOjBweDtkaXNwbGF5OiBpbmxpbmV9IAogICAgICAgICAgICAjbWFpbmZyYW1lCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRkZGQUZBOwogICAgICAgICAgICAgICAgYm9yZGVyOjBweDsKICAgICAgICAgICAgICAgIHotaW5kZXg6MDsKICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTsKICAgICAgICAgICAgfQogICAgICAgICAgICAjaXRhYiB7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O21hcmdpbjowO3BhZGRpbmc6MDsKICAgICAgICAgICAgICAgIGhlaWdodDozNnB4OyB3aWR0aDoxMDAlO3RvcDowcHg7bGVmdDowcHg7Ym9yZGVyOjBweDtmb250LXNpemU6MTZwdDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgICAgICNpdGFiIHVse21hcmdpbjowO3BhZGRpbmc6MDtsaXN0LXN0eWxlOm5vbmU7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgICAgICNpdGFiIGxpe2Zsb2F0OmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7d2lkdGg6MTUwcHg7IGhlaWdodDozNnB4OwogICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICNjY2M7Zm9udC13ZWlnaHQ6Ym9sZGVyO3BhZGRpbmc6M3B4IDhweCAzcHggOHB4O30KICAgICAgICAgICAgI2l0YWIgLnRhYi1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y29sb3I6IzJGNUZBMTtib3JkZXItbGVmdDoxcHggc29saWQgI2NjYzsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OmJvbGRlcjtwYWRkaW5nOjNweCA4cHggM3B4IDhweDtoZWlnaHQ6MzZweDt9CiAgICAgICAgICAgICN0YXNraW5mb3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7Y29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjBweCBzb2xpZCAjODFCRUY3OyBtYXJnaW46MDtwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDsKICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6YXV0bzt9CiAgICAgICAgICAgIC5rdGFza3tmb250LXNpemU6MTJwdDtmb250LXdlaWdodDpib2xkO2hlaWdodDozMHB4O30KICAgICAgICAgICAgLnZ0YXNre2ZvbnQtc2l6ZToxMnB0O2NvbG9yOnJlZDtmb250LXdlaWdodDpib2xkO2hlaWdodDozMHB4O30KICAgICAgICAgICAgLmJ0YXNre2JhY2tncm91bmQtY29sb3I6IzgxQkVGNztoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MDt9CiAgICAgICAgICAgIC54dGFza3tiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO30KICAgICAgICAgICAgI2RhdGFiYXNle3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTtkaXNwbGF5Om5vbmU7b3ZlcmZsb3c6YXV0bzsKICAgICAgICAgICAgICAgIGJvcmRlci10b3A6MXB4IHNvbGlkICM4MUJFRjc7bWFyZ2luOjA7cGFkZGluZzowcHg7bGVmdDowcHg7dG9wOjM2cHg7CiAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30KICAgICAgICAgICAgLmRibGlzdHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjBweDsgYmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2hlaWdodDoxMDAlO30KICAgICAgICAgICAgLmRidGl0bGV7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7IGhlaWdodDozMHB4O30KICAgICAgICAgICAgI2Ric2VsZWN0e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzt3aWR0aDoxMDAlO30KICAgICAgICAgICAgI2RiZmllbGRzIC5kYmZpZWxkc3twb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7Y29sb3I6IzJGNUZBMTt9CiAgICAgICAgICAgIC5maWVsZC10aXRsZXtiYWNrZ3JvdW5kLWNvbG9yOiM2NjY2NjY7Y29sb3I6I0MwYzBjMDtoZWlnaHQ6MjJweDt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnVsc3RhdGV7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlOwogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2NvbG9yOiMyRjVGQTE7fQogICAgICAgICAgICAudWx0YWJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLmx0YWJuYW1le2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB0O30KICAgICAgICAgICAgLmx0YWJ7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2N1cnNvcjogcG9pbnRlcjt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLmx0YWItc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRkZGQUZBO2N1cnNvcjogcG9pbnRlcjt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLmxmbmFtZXtjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAubGZpZWxke2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTtjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAubGZpZWxkLXNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAjZGJmaWVsZGZvcm17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTYwcHg7aGVpZ2h0OjUwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmZmZmOwogICAgICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmctdG9wOjEwcHg7cGFkZGluZy1sZWZ0OjZweDtmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgICAgIGNvbG9yOiMyRjVGQTE7ei1pbmRleDo5OTtvdmVyZmxvdzphdXRvO2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgICAgICN0ZW1wbGF0ZXtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7ZGlzcGxheTpub25lO292ZXJmbG93OmF1dG87CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4OwogICAgICAgICAgICAgICAgbWFyZ2luOjA7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTt9CiAgICAgICAgICAgIC50ZW1wbGF0ZS10YWJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwYWRkaW5nOjBweDttYXJnaW46MDtib3JkZXI6MDt9CiAgICAgICAgICAgIC50cmVldGFie2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztoZWlnaHQ6MTAwJTtib3JkZXI6MHB4O21hcmdpbjowOwogICAgICAgICAgICAgICAgei1pbmRleDo5OTtvdmVyZmxvdzphdXRvO3BhZGRpbmc6MHB4O30KICAgICAgICAgICAgI3RyZWUtdGl0bGV7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7Zm9udC1zaXplOjEzcHQ7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDpib2xkO2hlaWdodDozMHB4O3dpZHRoOjEwMCU7cGFkZGluZzowcHg7bGVmdDowcHg7fQogICAgICAgICAgICAjdHJlZWJvZHl7cG9zaXRpb246cmVsYXRpdmU7Y29sb3I6IzAwMDAwMDt3aWR0aDoxMDAlO292ZXJmbG93OmF1dG99CiAgICAgICAgICAgIC50cmVlbGluZXtwb3NpdGlvbjpyZWxhdGl2ZTtib3JkZXI6MHB4O2ZvbnQtc2l6ZToxMnB0O2ZvbnQtd2VpZ2h0OmJvbGQ7fQogICAgICAgICAgICAudGl0bGV7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O3dpZHRoOjEwMCU7fQogICAgICAgICAgICAuYnRpdGxle3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnRlbXB0YWJ7YmFja2dyb3VuZC1jb2xvcjojRkZGQUZBO2hlaWdodDoxMDAlO2JvcmRlcjowcHg7CiAgICAgICAgICAgICAgICBwYWRkaW5nOjBweDttYXJnaW46MDtvdmVyZmxvdzphdXRvO30KICAgICAgICAgICAgI3RlbXBsYXRlLXRpdGxle2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojYzBjMGMwO2ZvbnQtc2l6ZToxM3B0O2JvcmRlcjowcHg7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDpib2xkO2hlaWdodDozMHB4O3dpZHRoOjEwMCU7cGFkZGluZzowcHg7fQogICAgICAgICAgICAjbm9kZS10ZW1wbGF0ZXtwb3NpdGlvbjpyZWxhdGl2ZTsKICAgICAgICAgICAgICAgIGJvcmRlcjowcHggc29saWQgI2ZmZmZmZjtwYWRkaW5nOjBweDtjb2xvcjojMkY1RkExO30KICAgICAgICAgICAgLnRlbXBsYXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7fQogICAgICAgICAgICAubHRlbXBsYXRle2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzt9CiAgICAgICAgICAgIC5sdGVtcGxhdGUtaGx7YmFja2dyb3VuZC1jb2xvcjojRkZGQUZBO30KICAgICAgICAgICAgI3R4dGZvcm17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MjkwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmZmZmO2Rpc3BsYXk6aW5saW5lOwogICAgICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MTBweDt6LWluZGV4Ojk5O292ZXJmbG93OmF1dG87ZGlzcGxheTpub25lO30KICAgICAgICAgICAgI2RiZm9ybXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoyOTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmY7ZGlzcGxheTppbmxpbmU7CiAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICM4MUJFRjc7cGFkZGluZzoxMHB4O3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bztkaXNwbGF5Om5vbmU7fQogICAgICAgICAgICAjdGFibGV2aWV3e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0KICAgICAgICAgICAgI2RiZWRpdGZvcm17cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjY2NjY2M7CiAgICAgICAgICAgICAgICBoZWlnaHQ6MzBweDt3aWR0aDoxMDAlO2JvcmRlcjowcHggc29saWQgI0ZGRkZGRjt9CiAgICAgICAgICAgICN4dGVtcGxhdGVmb3Jte3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6bm9uZTt3aWR0aDoxMDAlOwogICAgICAgICAgICAgICAgYm9yZGVyOjBweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2ZvbnQtc2l6ZToxMnB0O2NvbG9yOiMyRjVGQTE7fQogICAgICAgICAgICAjdXJsZm9ybXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7fQogICAgICAgICAgICAjc291cmNlX2NvZGVfb3B7ZGlzcGxheTpub25lO30KICAgICAgICAgICAgI3RlbXBsYXRlZGl2e2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTt9CiAgICAgICAgICAgIC50ZW1wbGF0ZS1iYXJ7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2hlaWdodDozMHB4OwogICAgICAgICAgICAgICAgY3Vyc29yOm1vdmU7Zm9udC1zaXplOjEzcHQ7Zm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjojQzBDMEMwO30KICAgICAgICAgICAgI2VkaXRvci1mcmFtZXtoZWlnaHQ6MTgwcHg7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICNjMGMwYzA7b3ZlcmZsb3c6YXV0bzt9CiAgICAgICAgICAgICN0ZW1wbGF0ZS1jb25maWd7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O3otaW5kZXg6OTk7CiAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICNjMGMwYzA7cGFkZGluZzowcHg7Zm9udC1zaXplOjEycHQ7Y29sb3I6IzJGNUZBMTtoZWlnaHQ6NjAwcHg7fQogICAgICAgICAgICAjdGVtcGxhdGUtY29uZmlnLWJsb2Nre3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7aGVpZ2h0OjU3MHB4OwogICAgICAgICAgICAgICAgb3ZlcmZsb3c6YXV0bzthbGlnbjpsZWZ0O30KICAgICAgICAgICAgI3RlbXBsYXRlLXRlc3R7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3OyBib3JkZXI6MXB4IHNvbGlkICNjMGMwYzA7CiAgICAgICAgICAgICAgICBwYWRkaW5nOjBweDtoZWlnaHQ6NjAwcHg7Zm9udC1zaXplOjEycHQ7Y29sb3I6IzJGNUZBMTt6LWluZGV4Ojk5O30KICAgICAgICAgICAgI3RlbXBsYXRlLW1hdGNoZXN7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjUyMHB4O292ZXJmbG93OmF1dG87fQogICAgICAgICAgICAjdGVtcGxhdGUtdGVzdC1oZWFkZXJ7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2hlaWdodDozMHB4OwogICAgICAgICAgICAgICAgY3Vyc29yOm1vdmU7Zm9udC1zaXplOjE0cHQ7Y29sb3I6cmVkO2ZvbnQtd2VpZ2h0OmJvbGQ7fQogICAgICAgICAgICAjdGVtcGxhdGUtdmlld2Vye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzsKICAgICAgICAgICAgICAgIGJvcmRlcjowcHggc29saWQgIzAwMDAwMDt3aWR0aDoxMDAlO2hlaWdodDo1MDBweDsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxMnB0O2NvbG9yOiMyRjVGQTE7fQogICAgICAgICAgICAuY2xvc2V0eHR7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEwcHQ7Y29sb3I6I2NjY2NjYzt0ZXh0LWFsaWduOmxlZnQ7fQogICAgICAgICAgICAuY2xvc2VidXR0b257cGFkZGluZzozcHggNHB4IDNweCA0cHg7YmFja2dyb3VuZC1jb2xvcjojREYwMTAxOwogICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjZwdDtmb250LXdlaWdodDpib2xkO2NvbG9yOiNmZmZmZmY7dGV4dC1hbGlnbjpyaWdodDt9CiAgICAgICAgICAgIC5jdHh0X2Jsb2Nre3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6c2lsdmVyO2JvcmRlcjoxcHggc29saWQgIzAwMDAwMDt9CiAgICAgICAgICAgICN1cmxibG9ja3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7ZGlzcGxheTpub25lO292ZXJmbG93OmF1dG87CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjdXJsLWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2NjY2NjYzsKICAgICAgICAgICAgICAgIGhlaWdodDozMHB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzgxQkVGNzt9CiAgICAgICAgICAgIC51cmwtdWx7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDt3aWR0aDoxMDAlO30KICAgICAgICAgICAgLnVybC1saXtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAudXJsLWxpLXdhcm57YmFja2dyb3VuZC1jb2xvcjojRkY4MDAwO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLnVybC1saS1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAudXJsbGktaGVhZGVye2xpc3Qtc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Zm9udC13ZWlnaHQ6Ym9sZDsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNHB0O2NvbG9yOiNjMGMwYzA7fQogICAgICAgICAgICAudXJsLWxpLXBhZ2V7Y29sb3I6I2NjY2M3MDtmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToxM3B0O30KICAgICAgICAgICAgI3VybGxpc3QtZm9ybXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo3MjBweDtoZWlnaHQ6MTUwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmZmZmOwogICAgICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmctdG9wOjEwcHg7cGFkZGluZy1sZWZ0OjZweDtmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgICAgIGNvbG9yOiMyRjVGQTE7ei1pbmRleDo5OTtvdmVyZmxvdzphdXRvO2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgICAgICNyZWNvcmQtdmlld3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7IHotaW5kZXg6OTk7CiAgICAgICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICNDMEMwQzA7cGFkZGluZzowcHg7aGVpZ2h0OjU1MHB4O2ZvbnQtc2l6ZToxMnB0O2NvbG9yOiMyRjVGQTE7fQogICAgICAgICAgICAjcmVjb3JkLXJlc3twb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6NTIwcHg7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjRweCA4cHggNHB4IDhweDt9CiAgICAgICAgICAgICNyZWNvcmQtaGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtoZWlnaHQ6MzBweDsKICAgICAgICAgICAgICAgIGN1cnNvcjptb3ZlO2ZvbnQtc2l6ZToxNHB0O2NvbG9yOnJlZDtmb250LXdlaWdodDpib2xkO30KICAgICAgICAgICAgLnJlY29yZC10aXRsZXtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MjBweDsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNHB0O2ZvbnQtd2VpZ2h0OmJvbGQ7d2lkdGg6MTAwJTt0ZXh0LWFsaWduOmxlZnQ7fQogICAgICAgICAgICAucmVjb3JkLXR4dHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MTRwdDt3aWR0aDoxMDAlO3RleHQtYWxpZ246bGVmdDt9CiAgICAgICAgICAgICNkYXRhe3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjZG5ze3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjZG5zLWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2NjY2NjYzsKICAgICAgICAgICAgICAgIGhlaWdodDozMHB4O3dpZHRoOjEwMCU7Ym9yZGVyOjBweCBzb2xpZCAjRkZGRkZGO30KICAgICAgICAgICAgI2Rucy1saXN0e3Bvc2l0aW9uOnJlbGF0aXZlO30KICAgICAgICAgICAgLmRucy11bHtsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO30KICAgICAgICAgICAgLmRucy1saXtiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgLmRucy1saS1zZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNGRkZBRkE7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgI3Byb3h5e3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0ZGRkFGQTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDozNnB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgICAgICAjcHJveHktaGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojY2NjY2NjOwogICAgICAgICAgICAgICAgaGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTtib3JkZXI6MHB4IHNvbGlkICNGRkZGRkY7fQogICAgICAgICAgICAjcHJveHktbGlzdHtwb3NpdGlvbjpyZWxhdGl2ZTt9CiAgICAgICAgICAgIC5wcm94eS11bHtsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO30KICAgICAgICAgICAgLnByb3h5LWxpe2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAucHJveHktbGktc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRkZGQUZBO2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgICAgICN1c2Vye3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzsgY29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3OyBwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgI2h0dHB4e3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNzsgY29sb3I6IzJGNUZBMTtkaXNwbGF5Om5vbmU7CiAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjODFCRUY3OyBwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MzZweDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO30KICAgICAgICAgICAgI2h0dHB4LWhlYWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2NjY2NjYzsKICAgICAgICAgICAgICAgIGhlaWdodDozMHB4O3dpZHRoOjEwMCU7Ym9yZGVyOjBweCBzb2xpZCAjRkZGRkZGO30KICAgICAgICAgICAgLmxpc3Rmb3Jte21hcmdpbjowcHg7ZGlzcGxheTogaW5saW5lO30KICAgICAgICAgICAgLm5vZGV7ei1pbmRleDo5OTtvdmVyZmxvdzpoaWRkZW47Y29sb3I6YmxhY2s7Zm9udC1zaXplOjEycHQ7fQogICAgICAgICAgICAubm9kZW5hbWV7Y29sb3I6YmxhY2s7Zm9udC1zaXplOjEycHQ7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuZWFkZHtjb2xvcjojNUZCNDA0O2ZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgICAgIC5ldXBkYXRle2NvbG9yOiNGRjgwMDA7Zm9udC1zaXplOjEzcHQ7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLmVkZWxldGV7Y29sb3I6I0I0MDQ1Rjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuZXZpZXd7Y29sb3I6IzAwMDBmZjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgICAgICAuaWNvbntkaXNwbGF5OmlubGluZTtjb2xvcjojRkY4MDAwO2ZvbnQtc2l6ZToxM3B0O3RleHQtYWxpZ246Y2VudGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAgICAgLm5jaGlsZHN7ZGlzcGxheTppbmxpbmU7Y29sb3I6cmVkO2ZvbnQtc2l6ZToxMnB0O30KICAgICAgICAgICAgLmhsaWdodHtjb2xvcjpyZWQ7fQogICAgICAgICAgICAjYmZyYW1le3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTtkaXNwbGF5Om5vbmU7Ym9yZGVyOjB9CiAgICAgICAgPC9zdHlsZT4KICAgIDxzY3JpcHQgbGFuZ3VhZ2U9J2phdmFzY3JpcHQnPgogICAgICAgICAgICB2YXIgY2hyYWRkID0gJ+KcmicsIGNocmZvbGQgPSAn4pa6JywgY2hydHJlZSA9ICfilrwnLCBjaHJlZGl0PSfinI4nLCBjaHJkZWw9J+KcmCcsIGNocnZpZXcgPSAn4picICc7CiAgICAgICAgICAgIHZhciBvVGltZXIgPSBudWxsOwogICAgICAgICAgICB2YXIgYmFzZTY0RW5jb2RlQ2hhcnMgPSAKICAgICAgICAgICAgICAgICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjsKICAgICAgICAgICAgdmFyIGluZGV4X3R5cGVzID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICBpbmRleF90eXBlc1sndGV4dF9pbmRleCddID0gJ+aWh+acrOe0ouW8leWtl+autSc7CiAgICAgICAgICAgICAgICBpbmRleF90eXBlc1snaW50X2luZGV4J10gPSAnaW5057Si5byV5a2X5q61JzsKICAgICAgICAgICAgICAgIGluZGV4X3R5cGVzWydsb25nX2luZGV4J10gPSAnbG9uZ+e0ouW8leWtl+autSc7CiAgICAgICAgICAgICAgICBpbmRleF90eXBlc1snZG91YmxlX2luZGV4J10gPSAnZG91Ymxl57Si5byV5a2X5q61JzsKICAgICAgICAgICAgICAgIGluZGV4X3R5cGVzWydkaXNwbGF5J10gPSAn6Z2e57Si5byV5a2X5q61JzsKICAgICAgICAgICAgdmFyIGJhc2U2NERlY29kZUNoYXJzID0gbmV3IEFycmF5KAogICAgICAgICAgICAgICAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsCiAgICAgICAgICAgICAgICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwKICAgICAgICAgICAgICAgIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgNjIsIC0xLCAtMSwgLTEsIDYzLAogICAgICAgICAgICAgICAgNTIsIDUzLCA1NCwgNTUsIDU2LCA1NywgNTgsIDU5LCA2MCwgNjEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsCiAgICAgICAgICAgICAgICAtMSwgIDAsICAxLCAgMiwgIDMsICA0LCAgNSwgIDYsICA3LCAgOCwgIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwKICAgICAgICAgICAgICAgIDE1LCAxNiwgMTcsIDE4LCAxOSwgMjAsIDIxLCAyMiwgMjMsIDI0LCAyNSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAgICAgLTEsIDI2LCAyNywgMjgsIDI5LCAzMCwgMzEsIDMyLCAzMywgMzQsIDM1LCAzNiwgMzcsIDM4LCAzOSwgNDAsCiAgICAgICAgICAgICAgICA0MSwgNDIsIDQzLCA0NCwgNDUsIDQ2LCA0NywgNDgsIDQ5LCA1MCwgNTEsIC0xLCAtMSwgLTEsIC0xLCAtMSk7CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGVuY29kZShzdHIpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb3V0LCBpLCBsZW47CiAgICAgICAgICAgICAgICB2YXIgYzEsIGMyLCBjMzsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjMSA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgIGlmKGkgPT0gbGVuKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdChjMSA+PiAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoYzEgJiAweDMpIDw8IDQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gIj09IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBpZihpID09IGxlbikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoYzEgPj4gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKGMyICYgMHhGKSA8PCAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9ICI9IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMzID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMxID4+IDIpOwogICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoKGMyICYgMHhGKSA8PCAyKSB8ICgoYzMgJiAweEMwKSA+PjYpKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMzICYgMHgzRik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGRlY29kZShzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjMSwgYzIsIGMzLCBjNDsKICAgICAgICAgICAgICAgIHZhciBpLCBsZW4sIG91dDsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAvKiBjMSAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSBiYXNlNjREZWNvZGVDaGFyc1tzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZl07CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMxID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMSA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgLyogYzIgKi8KICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gYmFzZTY0RGVjb2RlQ2hhcnNbc3RyLmNoYXJDb2RlQXQoaSsrKSAmIDB4ZmZdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjMiA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzIgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjMSA8PCAyKSB8ICgoYzIgJiAweDMwKSA+PiA0KSk7CgogICAgICAgICAgICAgICAgICAgIC8qIGMzICovCiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBjMyA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSA2MSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSBiYXNlNjREZWNvZGVDaGFyc1tjM107CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMzID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMiAmIDBYRikgPDwgNCkgfCAoKGMzICYgMHgzQykgPj4gMikpOwoKICAgICAgICAgICAgICAgICAgICAvKiBjNCAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzQgPSBzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gNjEpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGM0ID0gYmFzZTY0RGVjb2RlQ2hhcnNbYzRdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjNCA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMyAmIDB4MDMpIDw8IDYpIHwgYzQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGYxNnRvOChzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIG91dCA9ICIiOwogICAgICAgICAgICAgICAgbGVuID0gc3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoYyA+PSAweDAwMDEpICYmIChjIDw9IDB4MDA3RikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA+IDB4MDdGRikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEUwIHwgKChjID4+IDEyKSAmIDB4MEYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgNikgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCAoKGMgPj4gIDApICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKChjID4+ICA2KSAmIDB4MUYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgMCkgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGY4dG8xNihzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIHZhciBjaGFyMiwgY2hhcjM7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7CiAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2goYyA+PiA0KQogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiBjYXNlIDI6IGNhc2UgMzogY2FzZSA0OiBjYXNlIDU6IGNhc2UgNjogY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAweHh4eHh4eAogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gc3RyLmNoYXJBdChpLTEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjogY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTEweCB4eHh4ICAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgxRikgPDwgNikgfCAoY2hhcjIgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAxMTEwIHh4eHggIDEweHggeHh4eCAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcjMgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAweDBGKSA8PCAxMikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIyICYgMHgzRikgPDwgNikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIzICYgMHgzRikgPDwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzdGFydF93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnd2FpdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3Zlcl93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnYXV0byc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYmFzZTY0c3RyZGVjb2RlKHN0cikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGY4dG8xNihiYXNlNjRkZWNvZGUoc3RyKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdHJpbShzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKF5ccyt8XHMrJCkvLCAiIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGlnaGxpZ2h0KG9iaikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb2JqLmNsYXNzTmFtZSA9ICJidGl0bGUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhY2tjc3Mob2JqKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBvYmouY2xhc3NOYW1lID0gInRpdGxlIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBvdmVyQkZyYW1lKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBiZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmZyYW1lJyk7CiAgICAgICAgICAgICAgICBpZihiZnJhbWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYmZyYW1lLnN0eWxlLmxlZnQgPSBlbGVtZW50Lm9mZnNldExlZnQrInB4IjsKICAgICAgICAgICAgICAgICAgICBiZnJhbWUuc3R5bGUudG9wID0gZWxlbWVudC5vZmZzZXRUb3ArInB4IjsKICAgICAgICAgICAgICAgICAgICBiZnJhbWUuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoKyJweCI7CiAgICAgICAgICAgICAgICAgICAgYmZyYW1lLnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0KyJweCI7CiAgICAgICAgICAgICAgICAgICAgYmZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBoaWRlQkZyYW1lKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGJmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZnJhbWUnKTsKICAgICAgICAgICAgICAgIGJmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoX2VsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBfcGFyZW50RWxlbWVudCA9IF9lbGVtZW50LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICBpZihfcGFyZW50RWxlbWVudCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBfcGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChfZWxlbWVudCk7ICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlWE1MSFRUUCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxodHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHhtbGh0dHBPYmogPSBbIk1TWE1MMi5YbWxIdHRwLjUuMCIsIk1TWE1MMi5YbWxIdHRwLjQuMCIsCiAgICAgICAgICAgICAgICAiTVNYTUwyLlhtbEh0dHAuMy4wIiwiTVNYTUwyLlhtbEh0dHAiLCJNaWNyb3NvZnQuWG1sSHR0cCJdOwogICAgICAgICAgICAgICAgaWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYod2luZG93LkFjdGl2ZVhPYmplY3QpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDtpPHhtbGh0dHBPYmoubGVuZ3RoO2krKykgICAgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0cnl7eG1saHR0cCA9IG5ldyBBY3RpdmVYT2JqZWN0KHhtbGh0dHBPYmpbaV0pO2JyZWFrO30KICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSl7eG1saHR0cCA9IG51bGw7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NhbiBub3QgY3JlYXRlIFhNTEhUVFAgT2JqZWN0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geG1saHR0cDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZWJ1aWxkQ2hpbGQob1BhcmVudCwgcGlkLCBpZCwgbmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYob1BhcmVudCAmJiBwYXJzZUludChpZCkgPiAwICYmIG5hbWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmNoaWxkcyA9IG9QYXJlbnQuZ2V0QXR0cmlidXRlKCdjaGlsZHMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcE5hbWUgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnVU5hbWUnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpZihzdHJjaGlsZHMpIGNoaWxkcyA9IGV2YWwoc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGNoaWxkcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIGNoaWxkc1tpZF0gPSBuYW1lOwogICAgICAgICAgICAgICAgICAgIHN0cmNoaWxkcyA9ICIoeyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGNoaWxkcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCAhPSBwaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0geCsiOiciK2NoaWxkc1t4XSsiJywiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmNoaWxkcyArPSBwaWQrIjonIitwTmFtZSsiJ30pIjsKICAgICAgICAgICAgICAgICAgICBvUGFyZW50LnNldEF0dHJpYnV0ZSgnY2hpbGRzJywgc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVDaGlsZChvUGFyZW50LCBwaWQsIGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihvUGFyZW50ICYmIHBhcnNlSW50KGlkKSA+IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmNoaWxkcyA9IG9QYXJlbnQuZ2V0QXR0cmlidXRlKCdjaGlsZHMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcE5hbWUgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnVU5hbWUnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpZihzdHJjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHMgPSBldmFsKHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkc1tpZF0gPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyY2hpbGRzID0gIih7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGNoaWxkcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4ICE9IHBpZCAmJiBjaGlsZHNbeF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmNoaWxkcyArPSB4KyI6JyIrY2hpbGRzW3hdKyInLCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0gcGlkKyI6JyIrcE5hbWUrIid9KSI7CiAgICAgICAgICAgICAgICAgICAgICAgIG9QYXJlbnQuc2V0QXR0cmlidXRlKCdjaGlsZHMnLCBzdHJjaGlsZHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBBZGROb2RlKHBpZCwgaWQsIG5hbWUsIGNvdW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9kZSIraWQpICE9IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIC8vYWxlcnQoInBpZDoiK3BpZCsiaWQ6IitpZCsibmFtZToiK25hbWUpOwogICAgICAgICAgICAgICAgdmFyIG9QYXJlbnQgPSBudWxsOwogICAgICAgICAgICAgICAgaWYocGlkID49IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgb1BhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJub2RlIitwaWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9QYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZWJvZHknKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vYWxlcnQocGlkKyc6JytpZCsnOicrbmFtZSk7CiAgICAgICAgICAgICAgICBpZihvUGFyZW50ID09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBvTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgdmFyIGxldmVsID0gb1BhcmVudC5nZXRBdHRyaWJ1dGUoJ2xldmVsJykgKiAxOwogICAgICAgICAgICAgICAgdmFyIG5jaGlsZHMgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnbmNoaWxkcycpICogMTsKICAgICAgICAgICAgICAgIG9QYXJlbnQuc2V0QXR0cmlidXRlKCduY2hpbGRzJywgbmNoaWxkcyArIDEpOwogICAgICAgICAgICAgICAgaWYocGlkID49IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmNoaWxkcyA9IG9QYXJlbnQuZ2V0QXR0cmlidXRlKCdjaGlsZHMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcE5hbWUgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnVU5hbWUnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpZihzdHJjaGlsZHMpIGNoaWxkcyA9IGV2YWwoc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGNoaWxkcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgIGNoaWxkc1tpZF0gPSBuYW1lOwogICAgICAgICAgICAgICAgICAgIHN0cmNoaWxkcyA9ICIoeyI7CiAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gY2hpbGRzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCAhPSBwaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0geCsiOiciK2NoaWxkc1t4XSsiJywiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzdHJjaGlsZHMgKz0gcGlkKyI6JyIrcE5hbWUrIid9KSI7CiAgICAgICAgICAgICAgICAgICAgb1BhcmVudC5zZXRBdHRyaWJ1dGUoJ2NoaWxkcycsIHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgb2ZvbGQgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKG9mb2xkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRfJytwaWQpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZihuY2hpbGRzID09IDApIG9mb2xkLmlubmVySFRNTCA9IGNocnRyZWU7IAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG9uY2hpbGRzID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKChvbmNoaWxkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaF8nK3BpZCkpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9uY2hpbGRzLmlubmVySFRNTCA9IG5jaGlsZHMrMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG9Ob2RlLmlkID0gIm5vZGUiICsgaWQ7CiAgICAgICAgICAgICAgICBvTm9kZS5jbGFzc05hbWUgPSAnbm9kZSc7CiAgICAgICAgICAgICAgICBvTm9kZS5zZXRBdHRyaWJ1dGUoJ2xldmVsJywgbGV2ZWwgKyAxKTsKICAgICAgICAgICAgICAgIG9Ob2RlLnNldEF0dHJpYnV0ZSgnbmNoaWxkcycsIDApOwogICAgICAgICAgICAgICAgb05vZGUuc2V0QXR0cmlidXRlKCdwYXJlbnQnLCBwaWQpOwogICAgICAgICAgICAgICAgb05vZGUuc2V0QXR0cmlidXRlKCdVSUQnLCBpZCk7CiAgICAgICAgICAgICAgICBvTm9kZS5zZXRBdHRyaWJ1dGUoJ1VOYW1lJywgbmFtZSk7CiAgICAgICAgICAgICAgICBodG1sc3RyID0gIjxkaXYgaWQ9J3RpdGxlXyIrIGlkICsiJyBjbGFzcz0ndGl0bGUnICI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW1vdmU9XCJvbkRpdih0aGlzLCAnYnRpdGxlJyk7XCIgIjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbm1vdXNlb3V0PVwib3V0RGl2KHRoaXMsICd0aXRsZScpO1wiPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndHJlZWxpbmUnPiI7CiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCAobGV2ZWwtMSk7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYobGV2ZWwgPiAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3NwYW4+IjsKICAgICAgICAgICAgICAgIGlmKGNvdW50ID4gMCkKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBpZD0nZm9sZF8iKyBpZCArIicgY2xhc3M9J2ljb24nIG9uY2xpY2s9J0ZvbGQodGhpcyknPiIrY2hyYWRkKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBpZD0nZm9sZF8iKyBpZCArIicgY2xhc3M9J2ljb24nIG9uY2xpY2s9J0ZvbGQodGhpcyknPiIrY2hyZm9sZCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gaWQ9J25kXyIraWQrIicgY2xhc3M9J25vZGVuYW1lJyB0aXRsZT0n54K55Ye76L+b5YWl5qih54mI566h55CGJyI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25jbGljaz0nVmlld1RlbXBsYXRlcygiK2lkKyIpJyA+IituYW1lKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIls8c3BhbiBpZD0nY2hfIisgaWQgKyInIGNsYXNzPSduY2hpbGRzJyA+Iitjb3VudCsiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlYWRkJyB0aXRsZT0nQWRkJyAiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz0nWEFkZChldmVudCknPiIrY2hyYWRkKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXVwZGF0ZScgdGl0bGU9J1JlbmFtZScgIjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9J1hFZGl0KGV2ZW50KSc+IitjaHJlZGl0KyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9J1hEZWxldGUoIitpZCsiLCIrcGlkKyIpJz4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9kaXY+IjsKICAgICAgICAgICAgICAgIG9Ob2RlLmlubmVySFRNTCA9IGh0bWxzdHI7IAogICAgICAgICAgICAgICAgb1BhcmVudC5hcHBlbmRDaGlsZChvTm9kZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlTm9kZShpZCwgbmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIG9Ob2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGUnK2lkKTsKICAgICAgICAgICAgICAgIGlmKG9Ob2RlICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgb05vZGUuc2V0QXR0cmlidXRlKCdVTmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICAgIHZhciBvTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZF8nK2lkKTsKICAgICAgICAgICAgICAgICAgICBpZihvTmFtZSAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgb05hbWUuaW5uZXJIVE1MID0gbmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gTGlzdENoaWxkcyhwYXJlbnQsIHVybCwgYXJndikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCk7CiAgICAgICAgICAgICAgICBpZih4bWxIdHRwICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgdXJsKyImcmFuZD0iK01hdGgucmFuZG9tKCksIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRub2RlID0gZXZhbCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodG5vZGVbJ2lkJ10gPT0gcGFyZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCB0bm9kZVsnbmNoaWxkcyddOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZE5vZGUocGFyZW50LCB0bm9kZVsnY2hpbGRzJ11baV1bJ2lkJ10gKiAxLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmFtZSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmNoaWxkcyddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9jbG9zZSBmb3JtCiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3NlVGhpcyhlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZShlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2VUaGlzVGFibGUoZWxlbWVudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3NlVGhpc1RpcChlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkaXZyZW1vdmUoZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9BZGQgY2hpbGQKICAgICAgICAgICAgZnVuY3Rpb24gWEFkZChlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0eHRmb3JtIik7CiAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsKICAgICAgICAgICAgICAgIHZhciB5ID0gZS5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLmxlZnQgPSB4OwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS50b3AgPSB5ICsgMTA7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgIG92ZXJCRnJhbWUoWGRpdik7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJlZGl0b3Jmb3JtIl07CiAgICAgICAgICAgICAgICBmb3JtWydvcCddLnZhbHVlID0gJ25vZGVfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3BpZCddLnZhbHVlID0gZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdVSUQnKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25vZGVpZCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlbmFtZSddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gWEVkaXQoZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgICAgICAgICAgICB2YXIgWGRpdiA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHh0Zm9ybSIpOwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFg7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WTsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbImVkaXRvcmZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAnbm9kZV91cGRhdGUnOwogICAgICAgICAgICAgICAgZm9ybVsncGlkJ10udmFsdWUgPSBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ3BhcmVudCcpOwogICAgICAgICAgICAgICAgZm9ybVsnbm9kZWlkJ10udmFsdWUgPSBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ1VJRCcpOwogICAgICAgICAgICAgICAgZm9ybVsnbm9kZW5hbWUnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgZm9ybVsnbm9kZW5hbWUnXS52YWx1ZSA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnVU5hbWUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBIaWRkZW5FZGl0b3IoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dGZvcm0nKTsKICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgaGlkZUJGcmFtZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRWRpdE5vZGUoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAiIjsKICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgcGlkID0gZm9ybVsncGlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gZm9ybVsnbm9kZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbm9kZW5hbWUgPSBmb3JtWydub2RlbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgaWYob3AgPT0gJ25vZGVfYWRkJyAmJiBub2RlbmFtZSAmJiBwaWQgPj0gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPSIrb3ArIiZuYW1lPSIrZW5jb2RlVVJJQ29tcG9uZW50KG5vZGVuYW1lKSsiJnBhcmVudGlkPSIrcGlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAnbm9kZV91cGRhdGUnICYmIG5vZGVuYW1lKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+IDApCiAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD0iK29wKyImbmFtZT0iK2VuY29kZVVSSUNvbXBvbmVudChub2RlbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgKyImbm9kZWlkPSIrbm9kZWlkKyImcGFyZW50aWQ9IitwaWQ7CiAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZU5vZGUobm9kZWlkLCBub2RlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5FZGl0b3IoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiA7CiAgICAgICAgICAgICAgICAvL2FsZXJ0KCJvcDoiK29wKyJub2RlaWQ6Iitub2RlaWQrInBpZDoiK3BpZCsibm9kZW5hbWU6Iitub2RlbmFtZSk7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKTsKICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3RyZWVub2RlJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcCA9PSAnbm9kZV9hZGQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRub2RlID0gZXZhbCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRub2RlWydpZCddID09IHBpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgdG5vZGVbJ25jaGlsZHMnXTsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZE5vZGUocGlkLCB0bm9kZVsnY2hpbGRzJ11baV1bJ2lkJ10gKiAxLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmFtZSddLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRub2RlWydjaGlsZHMnXVtpXVsnbmNoaWxkcyddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG9wID09ICdub2RlX3VwZGF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSB0cmltKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWQgPiAwICYmIGlkID09IG5vZGVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZU5vZGUoaWQsIG5vZGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vZGVsZXRlIG5vZGUKICAgICAgICAgICAgZnVuY3Rpb24gWERlbGV0ZShub2RlaWQsIHBhcmVudGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgb05vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9kZSIrbm9kZWlkKTsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+IDAgJiYgb05vZGUgIT0gbnVsbCAmJiAobmFtZSA9IG9Ob2RlLmdldEF0dHJpYnV0ZSgnVU5hbWUnKSkKICAgICAgICAgICAgICAgICAgICAmJiBjb25maXJtKCdBcmUgeW91IHN1cmUgZGVsZXRlIG5vZGU6Jytub2RlaWQrJyBuYW1lOicrbmFtZSsnID8nKSAKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1ub2RlX2RlbGV0ZSZub2RlaWQ9Iitub2RlaWQrIiZwYXJlbnRpZD0iK3BhcmVudGlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcveG5vZGUnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHRyaW0oeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaWQgPSBvTm9kZS5nZXRBdHRyaWJ1dGUoJ3BhcmVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvUGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGUnK3BpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gbm9kZWlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5jaGlsZHMgPSBvUGFyZW50LmdldEF0dHJpYnV0ZSgnbmNoaWxkcycpIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1BhcmVudC5zZXRBdHRyaWJ1dGUoJ25jaGlsZHMnLCBuY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQob1BhcmVudCwgcGlkLCBpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvY2hpbGQgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoXycrcGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2NoaWxkLmlubmVySFRNTCA9IG5jaGlsZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9QYXJlbnQucmVtb3ZlQ2hpbGQob05vZGUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybGlkID0gZG9jdW1lbnQuZm9ybXNbJ3RlbXBsYXRlZm9ybSddWydub2RlaWQnXS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpZCA9PSB1cmxpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGlkZGVuVGVtcGxhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5FZGl0b3IoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2ZvbGQgbm9kZQogICAgICAgICAgICBmdW5jdGlvbiBGb2xkKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBuY2hpbGRzID0gZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCduY2hpbGRzJykgKiAxOwogICAgICAgICAgICAgICAgdmFyIHVpZCA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnVUlEJykgKiAxOwogICAgICAgICAgICAgICAgdmFyIHVybCA9ICIvIjsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPW5vZGVfY2hpbGRzJm5vZGVpZD0iK3VpZDsKICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuaW5uZXJIVE1MID09IGNocmFkZCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQgPSAnJzsKICAgICAgICAgICAgICAgICAgICBMaXN0Q2hpbGRzKHVpZCwgdXJsLCBhcmd2KTsKICAgICAgICAgICAgICAgICAgICBpZihuY2hpbGRzID4gMCllbGVtZW50LmlubmVySFRNTCA9IGNocnRyZWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGVsZW1lbnQuaW5uZXJIVE1MID09IGNocmZvbGQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgTGlzdENoaWxkcyh1aWQsIHVybCwgYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICAgICAgICBpZihuY2hpbGRzID4gMCkgZWxlbWVudC5pbm5lckhUTUwgPSBjaHJhZGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuRWRpdG9yKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gTGltaXRTcGVlZChmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgc3BlZWQgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAoc3BlZWQgPSBmb3JtWydzcGVlZCddLnZhbHVlKSAhPSAnJwogICAgICAgICAgICAgICAgICAgICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXNwZWVkX2xpbWl0JnNwZWVkPSIrc3BlZWQ7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9zcGVlZCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1Rhc2tJbmZvKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9TaG93IFRhc2sKICAgICAgICAgICAgZnVuY3Rpb24gU2hvd1Rhc2tJbmZvKHR4dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHRhc2tpbmZvID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiAoc3RhdGVpbmZvID0gZXZhbCh0eHQpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL3ZhciBzcGVlZCA9IHRhc2tpbmZvWydzcGVlZF9saW1pdCddOwogICAgICAgICAgICAgICAgICAgIHZhciBodG1sc3RyID0gIjx0YWJsZSBjZWxsc3BhY2luZz0xIGFsaWduPWxlZnQgdmFsaWduPXRvcCBjbGFzcz0nYnRhc2snPjx0cj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjx0ZCB2YWxpZ249dG9wIGFsaWduPWxlZnQgY2xhc3M9J3h0YXNrJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjx1bCBjbGFzcz0ndWxzdGF0ZSc+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7ov5DooYzml7bpl7Q6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydpbnRlcnZhbCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDt8Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWyd0aW1lX3RvdGFsJ10rIjwvc3Bhbj4oUykiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7liJfooajpgJ/luqY6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydsaXN0X3NwZWVkJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwO3wmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ2xpc3RfYXZnJ10rIjwvc3Bhbj4mbmJzcDsoSy9zKSI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPumhtemdoumAn+W6pjombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3BhZ2Vfc3BlZWQnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7fCZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncGFnZV9hdmcnXSsiPC9zcGFuPiZuYnNwOyhLL3MpIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdrdGFzayc+5paH5Lu26YCf5bqmOiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1snZmlsZV9zcGVlZCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDt8Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydmaWxlX2F2ZyddKyI8L3NwYW4+Jm5ic3A7KEsvcykiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7mm7TmlrDpgJ/luqY6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWyd1cGRhdGVfc3BlZWQnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7fCZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sndXBkYXRlX2F2ZyddKyI8L3NwYW4+Jm5ic3A7KEsvcykiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7ph43or5XpgJ/luqY6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydyZXBlYXRfc3BlZWQnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7fCZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncmVwZWF0X2F2ZyddKyI8L3NwYW4+Jm5ic3A7KEsvcykiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0neHRhc2snPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHVsIGNsYXNzPSd1bHN0YXRlJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPkhvc3TmgLvmlbA6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydob3N0X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7kvJjlhYhIb3N0OiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncXByaW9yaXR5X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7lnKjnur9Ib3N0OiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncXdhaXRfdG90YWwnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuetieW+heino+aekDombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3Fob3N0X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0neHRhc2snPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHVsIGNsYXNzPSd1bHN0YXRlJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPlVSTOaAu+aVsDombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3VybF90b3RhbCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdrdGFzayc+6YeH6ZuG5a6M5oiQOiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1snb3Zlcl9kb3dubG9hZCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdrdGFzayc+6YeH6ZuG5aSx6LSlOiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1snZXJyX2Rvd25sb2FkJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7ph4fpm4bml6DmlYg6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWyd1bmtub3duX2Rvd25sb2FkJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0neHRhc2snPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHVsIGNsYXNzPSd1bHN0YXRlJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuWIl+ihqOmYn+WIlzombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3FsaXN0X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7mlofku7bpmJ/liJc6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydxZmlsZV90b3RhbCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdrdGFzayc+5pu05paw6Zif5YiXOiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncXVwZGF0ZV90b3RhbCddKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdrdGFzayc+6YeN6K+V6Zif5YiXOiZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3N0YXRlaW5mb1sncXJldHJ5X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0neHRhc2snPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHVsIGNsYXNzPSd1bHN0YXRlJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuaKveWPlumYn+WIlzombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3FleHRyYWN0X3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7mir3lj5blrozmiJA6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydvdmVyX2V4dHJhY3QnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuaKveWPlumUmeivrzombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ2Vycl9leHRyYWN0J10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0neHRhc2snPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHVsIGNsYXNzPSd1bHN0YXRlJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuWvvOWHuumYn+WIlzombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ3FkdW1wX3RvdGFsJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2t0YXNrJz7lr7zlh7rlrozmiJA6Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrc3RhdGVpbmZvWydvdmVyX2R1bXAnXSsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0na3Rhc2snPuWvvOWHuuWksei0pTombmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+IitzdGF0ZWluZm9bJ2Vycl9kdW1wJ10rIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPjwvdGQ+PC90cj48L3RhYmxlPiI7CiAgICAgICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPueKtuaAgTombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8YSBocmVmPVwiamF2YXNjcmlwdDpWaWV3VGFzaygndGFza18iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gdGFza2luZm9bJ3N0YXR1cyddKyInKTtcIiBjbGFzcz0ndnRhc2snIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI+Iit0YXNraW5mb1snc3RhdHVzJ10rIjwvYT48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPlVSTOaAu+aVsDombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF90b3RhbCddOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS7u+WKoeaAu+aVsDombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF9udGFza3MnXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7ku7vliqHlrozmiJA6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iK3Rhc2tpbmZvWyd1cmxfdGFza19vayddOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS7u+WKoemUmeivrzombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3VybF90YXNrX2Vycm9yJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9zcGFuPjxocj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdrdGFzayc+5paH5qGj5aSn5bCPOiZuYnNwOzwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+Iit0YXNraW5mb1snZG9jX3RvdGFsX3pzaXplJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiLyIgKyB0YXNraW5mb1snZG9jX3RvdGFsX3NpemUnXSsiPC9zcGFuPjxocj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdrdGFzayc+RE5T6Kej5p6QOiZuYnNwOzwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSd2dGFzayc+Iit0YXNraW5mb1snaG9zdF9jdXJyZW50J107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiLyIgKyB0YXNraW5mb1snaG9zdF90b3RhbCddKyI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7lt7LnlKjml7bpl7Q6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz5bIit0YXNraW5mb1sndF9kYXknXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDtEYXkocykmbmJzcDsmbmJzcDsiK3Rhc2tpbmZvWyd0X2hvdXInXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI6Iit0YXNraW5mb1sndF9taW4nXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI6Iit0YXNraW5mb1sndF9zZWMnXTsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsrIit0YXNraW5mb1sndF91c2VjJ10rIl0iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0na3Rhc2snPuS4i+i9vemAn+W6pjombmJzcDs8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0ndnRhc2snPiIrdGFza2luZm9bJ3NwZWVkJ107CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIChLQi9TKSA8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2t0YXNrJz7pgJ/luqbpmZDliLY6Jm5ic3A7PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3Z0YXNrJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxmb3JtIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyBjbGFzcz0nbGlzdGZvcm0nICI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9uc3VibWl0PSdMaW1pdFNwZWVkKHRoaXMpJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPXRleHQgbmFtZT1zcGVlZCB2YWx1ZT0nIitzcGVlZCsiJz4gKEtCL1MpICI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7PGlucHV0IHR5cGU9c3VibWl0IG5hbWU9J3N1Ym1pdCcgdmFsdWU9J09LJz4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gICLvvIgw5ZKM6LSf5pWw6KGo56S65LiN6ZmQ6YCf77yJPC9mb3JtPjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgIHZhciBvdGFza2luZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza2luZm8nKTsKICAgICAgICAgICAgICAgICAgICBpZihvdGFza2luZm8pIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3Rhc2tpbmZvLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgICAgICAgICAgb3Rhc2tpbmZvLmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvL3ZpZXcgVGFzawogICAgICAgICAgICBmdW5jdGlvbiBWaWV3VGFzayhvcCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9IitvcDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93VGFza0luZm8oeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvdGFzaycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3V0RGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gSGlkZVRhYmxlKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZXZpZXcnKTsKICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd1RhYmxlKHRhYmlkLCB0YWJuYW1lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtc1snZGJlZGl0Zm9ybSddWyd0YWJsZWlkJ10udmFsdWUgPSB0YWJpZDsKICAgICAgICAgICAgICAgIHZhciBvdHh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYm5hbWUnKTsKICAgICAgICAgICAgICAgICAgICBvdHh0LmlubmVySFRNTCA9IHRhYm5hbWU7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxldmlldycpOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc2V0REIoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb2RiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ric2VsZWN0Jyk7CiAgICAgICAgICAgICAgICAgICAgb2RiLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgdmFyIG9kYmYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJmaWVsZHMnKTsKICAgICAgICAgICAgICAgICAgICBvZGJmLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgSGlkZVRhYmxlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld0RCKHR4dCwgdG5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkYiA9IGV2YWwodHh0KTsKICAgICAgICAgICAgICAgIHZhciB0YWJsZXMgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoZGIgJiYgKHRhYmxlcyA9IGRiWyd0YWJsZXMnXSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmlkID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgbmZpZWxkcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYm5hbWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICIiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjx1bCBjbGFzcz0ndWx0YWInPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yICh4IGluIHRhYmxlcykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmlkID0geDsKICAgICAgICAgICAgICAgICAgICAgICAgdGFibmFtZSA9IHRhYmxlc1t4XVsnbmFtZSddOwogICAgICAgICAgICAgICAgICAgICAgICBuZmllbGRzID0gdGFibGVzW3hdWyduZmllbGRzJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0nbHRhYicgb25tb3VzZW1vdmU9XCJvbkRpdih0aGlzLCAnbHRhYi1zZWxlY3RlZCcpXCIgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywgJ2x0YWInKVwiID4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nbHRhYm5hbWUnIG9uY2xpY2s9J1ZpZXdUYWJsZShcIiIrdGFiaWQrIlwiLFwiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSB0YWJuYW1lKyJcIiknICB0aXRsZT0n54K55Ye76L+b5YWl5pWw5o2u6KGo566h55CGJyA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSB0YWJuYW1lKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2V1cGRhdGUnIHRpdGxlPSdSZW5hbWUnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJEQlhFZGl0KGV2ZW50LCIrdGFiaWQrIiwgJyIrdGFibmFtZSsiJylcIj4iK2NocmVkaXQrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRlbGV0ZVRhYmxlKCIrdGFiaWQrIiwgJyIrdGFibmFtZSsiJylcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgLy9odG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWFkZCcgdGl0bGU9J+eCueWHu+a3u+WKoOWtl+autScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgLy9odG1sc3RyICs9ICJvbmNsaWNrPVwiREJGWEFkZChldmVudCwgJyIrdGFiaWQrIicpXCI+IitjaHJhZGQrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhYm5hbWUgPT0gdG5hbWUpIFNob3dUYWJsZSh0YWJpZCwgdGFibmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvdWw+IjsKICAgICAgICAgICAgICAgICAgICB2YXIgb2RiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ric2VsZWN0Jyk7CiAgICAgICAgICAgICAgICAgICAgb2RiLmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEFkZFRhYmxlKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB0YWJuYW1lID0gZm9ybVsndGFibmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYodGFibmFtZSAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV9hZGQmbmFtZT0iK3RhYm5hbWU7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy90YWJsZScsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RCKHhtbEh0dHAucmVzcG9uc2VUZXh0LCB0YWJuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtWyd0YWJuYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgUmVzZXREQigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gRGVsZXRlVGFibGUodGFiaWQsIHRhYm5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSBkZWxldGUgdGFiYmxlOiIrdGFibmFtZSsiID8iKSAKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV9kZWxldGUmdGFibGVpZD0iK3RhYmlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvdGFiZGVsJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3REIoeG1sSHR0cC5yZXNwb25zZVRleHQsJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXdEYXRhYmFzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICBSZXNldERCKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0xpc3QgVGFibGUgRmllbGRzCiAgICAgICAgICAgIGZ1bmN0aW9uIFZpZXdGaWVsZHModHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgdGFiID0gZXZhbCh0eHQpOwogICAgICAgICAgICAgICAgaWYodGFiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciB0YWJpZCA9IHRhYlsnaWQnXTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibmFtZSA9IHRhYlsnbmFtZSddOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciBmbmFtZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZ0eXBlID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4X3R5cGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciA9ICAiPHVsIGNsYXNzPSd1bHRhYicgPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yICh4IGluIHRhYlsnZmllbGRzJ10pCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBmdHlwZSA9ICh0YWJbJ2ZpZWxkcyddW3hdLmZsYWcgJiAoMXwyfDR8OCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihsYXN0ICE9IHRhYlsnZmllbGRzJ11beF0uZmxhZykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFiWydmaWVsZHMnXVt4XS5mbGFnICYgMzIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZnR5cGUgPT0gMSkgaW5kZXhfdHlwZSA9ICJpbnTntKLlvJXlrZfmrrUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZnR5cGUgPT0gMikgaW5kZXhfdHlwZSA9ICJkb3VibGXntKLlvJXlrZfmrrUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZnR5cGUgPT0gNCkgaW5kZXhfdHlwZSA9ICLmlofmnKzntKLlvJXlrZfmrrUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZnR5cGUgPT0gOCkgaW5kZXhfdHlwZSA9ICJsb25n57Si5byV5a2X5q61IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaW5kZXhfdHlwZSA9ICLpnZ7ntKLlvJXlrZfmrrUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdmaWVsZC10aXRsZSc+IitpbmRleF90eXBlKyI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0ID0gdGFiWydmaWVsZHMnXVt4XS5mbGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZpZCA9IHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lID0gdGFiWydmaWVsZHMnXVt4XVsnbmFtZSddOwogICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdGFiWydmaWVsZHMnXVt4XVsnZmxhZyddOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8bGkgY2xhc3M9J2xmaWVsZCcgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ2xmaWVsZC1zZWxlY3RlZCcpXCIgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywgJ2xmaWVsZCcpO1wiID4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nbGZuYW1lJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiREJGWEVkaXQoZXZlbnQsICIrdGFiaWQrIiwiK2ZpZCsiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiciK2ZuYW1lKyInLCAiK2Z0eXBlKyIsICIrZmxhZysiKVwiPiIrZm5hbWUrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXVwZGF0ZScgdGl0bGU9J0NoYW5nZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRCRlhFZGl0KGV2ZW50LCAiK3RhYmlkKyIsIitmaWQrIiwiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICInIitmbmFtZSsiJywgIitmdHlwZSsiLCAiK2ZsYWcrIilcIj4iK2NocmVkaXQrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRlbGV0ZUZpZWxkKCIrdGFiaWQrIiwiK2ZpZCsiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiciK3RhYm5hbWUrIicsICciK2ZuYW1lKyInKVwiPiIrY2hyZGVsKyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L3VsPiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9kYmZpZWxkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZpZWxkcycpOwogICAgICAgICAgICAgICAgICAgIG9kYmZpZWxkcy5pbm5lckhUTUwgPSBodG1sc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vTGlzdC9WaWV3IEZpZWxkCiAgICAgICAgICAgIGZ1bmN0aW9uIFZpZXdUYWJsZSh0YWJpZCwgdGFibmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYodGFiaWQgPj0gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBTaG93VGFibGUodGFiaWQsIHRhYm5hbWUpOwogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXRhYmxlX3ZpZXcmdGFibGVpZD0iK3RhYmlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvdGFidmlldycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0ZpZWxkcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICAvL1ZpZXcgZGF0YWJhc2UKICAgICAgICAgICAgZnVuY3Rpb24gVmlld0RhdGFiYXNlKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9ZGF0YWJhc2VfdmlldyI7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9kYnZpZXcnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YWJhc2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZGIuc2V0QXR0cmlidXRlKCdkYmFzZScsIHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2FkTGlua09wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL0xpc3QgVGFibGVzCiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3RUYWJsZXMoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZigoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10YWJsZV9saXN0IjsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3RhYmxlbGlzdCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RCKHhtbEh0dHAucmVzcG9uc2VUZXh0LCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGRlbkRCZm9ybSgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJmb3JtJyk7CiAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIERCWEFkZChlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYmZvcm0iKTsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbInhkYmZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAndGFibGVfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEQlhFZGl0KGUsIGlkLCBuYW1lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYmZvcm0iKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbInhkYmZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAndGFibGVfcmVuYW1lJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9IGlkOwogICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10udmFsdWUgPSBuYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEVkaXREQihmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihmb3JtID09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IGZvcm1bJ3RhYmxlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gZm9ybVsnbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgaWYob3AgPT0gJ3RhYmxlX2FkZCcgJiYgbmFtZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPXRhYmxlX2FkZCZuYW1lPSIrbmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYob3AgPT0gJ3RhYmxlX3JlbmFtZScgJiYgdGFibGVpZCA+PSAwICYmIG5hbWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD10YWJsZV9yZW5hbWUmdGFibGVpZD0iK3RhYmxlaWQrIiZuYW1lPSIrbmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYob3AgPT0gJ3RhYmxlX2RlbGV0ZScgJiYgdGFibGVpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFyZ3YgPSAib3A9dGFibGVfZGVsZXRlJnRhYmxlaWQ9Iit0YWJsZWlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2RiJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3REIoeG1sSHR0cC5yZXNwb25zZVRleHQsIG5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBIaWRkZW5EQmZvcm0oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEQkZYQWRkKGUsIHRhYmlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYmZpZWxkZm9ybSIpOwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKFhkaXYpOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1siZGJmaWVsZGZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ29wJ10udmFsdWUgPSAnZmllbGRfYWRkJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9IHRhYmlkOwogICAgICAgICAgICAgICAgZm9ybVsnZmllbGRpZCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydvbGRuYW1lJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3R5cGUnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydpc19pbmRleCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vZm9ybVsnaXNfbnVsbCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gREJGWEVkaXQoZSwgdGFiaWQsIGZpZWxkaWQsIGZuYW1lLCBmdHlwZSwgZmxhZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgICAgICAgICAgICB2YXIgWGRpdiA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGJmaWVsZGZvcm0iKTsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUubGVmdCA9IHg7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLnRvcCA9IHkgKyAxMDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbImRiZmllbGRmb3JtIl07CiAgICAgICAgICAgICAgICBmb3JtWydvcCddLnZhbHVlID0gJ2ZpZWxkX3VwZGF0ZSc7CiAgICAgICAgICAgICAgICBmb3JtWyd0YWJsZWlkJ10udmFsdWUgPSB0YWJpZDsKICAgICAgICAgICAgICAgIGZvcm1bJ2ZpZWxkaWQnXS52YWx1ZSA9IGZpZWxkaWQ7CiAgICAgICAgICAgICAgICBmb3JtWydvbGRuYW1lJ10udmFsdWUgPSBmbmFtZTsKICAgICAgICAgICAgICAgIGZvcm1bJ3R5cGUnXS52YWx1ZSA9IGZ0eXBlOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gZmxhZzsKICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2luZGV4J10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgLy9mb3JtWydpc19udWxsJ10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgZm9ybVsnZnR5cGUnXS5vcHRpb25zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2Z0eXBlJ10ub3B0aW9uc1tpXS52YWx1ZSA9PSBmdHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnZnR5cGUnXS5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydmdHlwZSddLm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGZsYWcgJiAzMikgZm9ybVsnaXNfaW5kZXgnXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIC8vaWYoZmxhZyAmIDE2KSBmb3JtWydpc19udWxsJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JtWyduYW1lJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS52YWx1ZSA9IGZuYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEhpZGRlbkRCRmllbGRmb3JtKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZpZWxkZm9ybScpOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldERCRmllbGRmb3JtKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ29wJ10udmFsdWUgPT0gJ2ZpZWxkX2FkZCcpCiAgICAgICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgSGlkZGVuREJGaWVsZGZvcm0oKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEVkaXRGaWVsZChmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihmb3JtID09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IGZvcm1bJ3RhYmxlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmaWVsZGlkID0gZm9ybVsnZmllbGRpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIGZuYW1lID0gZm9ybVsnbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIGZ0eXBlID0gZm9ybVsnZnR5cGUnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBvbGRuYW1lID0gZm9ybVsnb2xkbmFtZSddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG9sZHR5cGUgPSBmb3JtWyd0eXBlJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgb2xkZmxhZyA9IGZvcm1bJ2ZsYWcnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgIGlmKG9wID09ICdmaWVsZF9hZGQnICYmIHRhYmxlaWQgPiAwICYmIGZuYW1lICYmIGZ0eXBlID4gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPWZpZWxkX2FkZCZ0YWJsZWlkPSIrdGFibGVpZCsiJm5hbWU9IitmbmFtZTsKICAgICAgICAgICAgICAgICAgICAvL2lmKGZvcm1bJ2lzX251bGwnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gMTY7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfaW5kZXgnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gKDMyfGZ0eXBlKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGZsYWcgfD0gNDsKICAgICAgICAgICAgICAgICAgICBpZihmbGFnID4gMCkgYXJndiArPSAiJmZsYWc9IitmbGFnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihvcCA9PSAnZmllbGRfdXBkYXRlJyAmJiB0YWJsZWlkID4gMCAmJiBmaWVsZGlkID49IDApIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBlYXJndiA9ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKGZuYW1lICYmIGZuYW1lICE9IG9sZG5hbWUpIGVhcmd2ICs9ICImbmFtZT0iK2ZuYW1lOwogICAgICAgICAgICAgICAgICAgIGlmKGVhcmd2KQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPWZpZWxkX3JlbmFtZSZ0YWJsZWlkPSIrdGFibGVpZCsiJmZpZWxkaWQ9IitmaWVsZGlkK2Vhcmd2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2ZpZWxkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3RmllbGRzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3RGF0YWJhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gUmVzZXREQkZpZWxkZm9ybShmb3JtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVGaWVsZCh0YWJpZCwgZmllbGRpZCwgdGFibmFtZSwgZmllbGRuYW1lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihjb25maXJtKCJBcmUgeW91IHN1cmUgZGVsZXRlIFRhYmxlOiIrdGFibmFtZSsiIEZpZWxkOiIrZmllbGRuYW1lKyI/IikgCiAgICAgICAgICAgICAgICAgICAgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9ZmllbGRfZGVsZXRlJnRhYmxlaWQ9Iit0YWJpZCsiJmZpZWxkaWQ9IitmaWVsZGlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvZmllbGQnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXdGaWVsZHMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXdEYXRhYmFzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZGVsZXRlIGRpdgogICAgICAgICAgICBmdW5jdGlvbiBkaXZyZW1vdmUoZWxlbWVudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRpdmhpZGRlbihlbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZihlbGVtZW50ICYmIGVsZW1lbnQuaW5uZXJIVE1MKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vbW92aW5nIGRpdgogICAgICAgICAgICBmdW5jdGlvbiBkaXZtb3ZlKGUsIG8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG8ub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4oZmFsc2UpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG8ub25tb3VzZWRvd24gPSBmdW5jdGlvbihlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGUgPSBlfHx3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUludChlLmNsaWVudFggLSBvLnBhcmVudE5vZGUub2Zmc2V0TGVmdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUludChlLmNsaWVudFkgLSBvLnBhcmVudE5vZGUub2Zmc2V0VG9wKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBlPWV8fHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgICAgICAgICAgby5wYXJlbnROb2RlLnN0eWxlLmxlZnQ9KGUuY2xpZW50WC14KSsicHgiOwogICAgICAgICAgICAgICAgICAgICAgICBvLnBhcmVudE5vZGUuc3R5bGUudG9wPShlLmNsaWVudFkteSkrInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlckJGcmFtZShvLnBhcmVudE5vZGUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlPW51bGw7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc2V0VGVtcGxhdGVmb3JtKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sidGVtcGxhdGVmb3JtIl07CiAgICAgICAgICAgICAgICBmb3JtWydvcCddLnZhbHVlID0gJ3RlbXBsYXRlX2FkZCc7CiAgICAgICAgICAgICAgICBmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWUgPSAtMTsKICAgICAgICAgICAgICAgIGZvcm1bJ3BhdHRlcm4nXS52YWx1ZSA9ICcnCiAgICAgICAgICAgICAgICBmb3JtWydpc19zdWInXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydpc19nbG9iYWwnXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydpc19pZ25vcmVjYXNlJ10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWyduZmllbGRzJ10udmFsdWUgPSAwOwogICAgICAgICAgICAgICAgZm9ybVsnbGluayddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rbWFwJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ21hcCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX21ldGhvZCddWzBdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19saXN0J10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua190YWJsZSddLm9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19maWVsZCddLm9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19ub2RlJ10ub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gWFRSZXNldCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV92aWV3Jyk7CiAgICAgICAgICAgICAgICBpZihvZGl2KSBvZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sidGVtcGxhdGVmb3JtIl07CiAgICAgICAgICAgICAgICBmb3JtWydvcCddLnZhbHVlID0gJ3RlbXBsYXRlX2FkZCc7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlaWQnXS52YWx1ZSA9IC0xOwogICAgICAgICAgICAgICAgZm9ybVsndGVtcGxhdGVpZCddLnZhbHVlID0gLTE7CiAgICAgICAgICAgICAgICBmb3JtWydjb2RlJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3BhdHRlcm4nXS52YWx1ZSA9ICcnCiAgICAgICAgICAgICAgICBmb3JtWydpc19zdWInXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydpc19nbG9iYWwnXS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3JtWydpc19pZ25vcmVjYXNlJ10uY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9ybVsnZmxhZyddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWyduZmllbGRzJ10udmFsdWUgPSAwOwogICAgICAgICAgICAgICAgZm9ybVsndXJsJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmsnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua21hcCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBmb3JtWydtYXAnXS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZm9ybVsnbWV0aG9kJ10udmFsdWUgPSAwOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19tZXRob2QnXVswXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmtfbGlzdCddLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvcm1bJ2xpbmtfdGFibGUnXS5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICBmb3JtWydsaW5rX2ZpZWxkJ10ub3B0aW9ucy5sZW5ndGggPSAxOwogICAgICAgICAgICAgICAgZm9ybVsnbGlua19ub2RlJ10ub3B0aW9ucy5sZW5ndGggPSAxOwogICAgICAgICAgICAgICAgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyd1cmxmb3JtJ107CiAgICAgICAgICAgICAgICBmb3JtWydtZXRob2QnXVswXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYVEFkZChub2RlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ4dGVtcGxhdGVmb3JtIik7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgIFhUUmVzZXQoKTsKICAgICAgICAgICAgICAgIHZhciB4Zm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ0ZW1wbGF0ZWZvcm0iXTsKICAgICAgICAgICAgICAgIHhmb3JtWydub2RlaWQnXS52YWx1ZSA9IG5vZGVpZDsKICAgICAgICAgICAgICAgIHZhciB1cmxmb3JtID0gZG9jdW1lbnQuZm9ybXNbInVybGZvcm0iXTsKICAgICAgICAgICAgICAgIHVybGZvcm1bJ21ldGhvZCddWzBdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgdXJsZm9ybVsndXJsJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIHVybGZvcm1bJ3VybCddLnZhbHVlID0gJ2h0dHA6Ly8nOwogICAgICAgICAgICAgICAgdXJsZm9ybVsndXJsJ10uc2VsZWN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gWFRFZGl0KGZvcm1pZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgWFRSZXNldCgpOwogICAgICAgICAgICAgICAgdmFyIHhmb3JtID0gZG9jdW1lbnQuZm9ybXNbInRlbXBsYXRlZm9ybSJdOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtaWRdOwogICAgICAgICAgICAgICAgeGZvcm1bJ29wJ10udmFsdWUgPSAndGVtcGxhdGVfdXBkYXRlJzsKICAgICAgICAgICAgICAgIHhmb3JtWydub2RlaWQnXS52YWx1ZSA9IGZvcm1bJ25vZGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ3RhYmxlaWQnXS52YWx1ZSA9IGZvcm1bJ3RhYmxlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWUgPSBmb3JtWyd0ZW1wbGF0ZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsncGF0dGVybiddLnZhbHVlID0gZm9ybVsncGF0dGVybiddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ2ZsYWcnXS52YWx1ZSA9IGZvcm1bJ2ZsYWcnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWyduZmllbGRzJ10udmFsdWUgPSBmb3JtWyduZmllbGRzJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsndXJsJ10udmFsdWUgPSBmb3JtWyd1cmwnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHhmb3JtWydsaW5rJ10udmFsdWUgPSBmb3JtWydsaW5rJ10udmFsdWU7CiAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua21hcCddLnZhbHVlID0gZm9ybVsnbGlua21hcCddLnZhbHVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ21hcCddLnZhbHVlID0gZm9ybVsnbWFwJ10udmFsdWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgMSkKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfc3ViJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgMikKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfZ2xvYmFsJ10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBpZih4Zm9ybVsnZmxhZyddLnZhbHVlICYgNCkKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnaXNfaWdub3JlY2FzZSddLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgeGZvcm1bJ21ldGhvZCddLnZhbHVlID0gMDsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ21ldGhvZCddLnZhbHVlID09IDEpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgeGZvcm1bJ21ldGhvZCddLnZhbHVlID0gMTsKICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnZmxhZyddLnZhbHVlIHw9IDE2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHN0cmxpbmttYXAgPSBmb3JtWydsaW5rbWFwJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbGlua21hcCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihzdHJsaW5rbWFwICYmIChsaW5rbWFwID0gZXZhbChzdHJsaW5rbWFwKSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcFsnZmxhZyddICYgMTYpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua19tZXRob2QnXVsxXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcFsnZmxhZyddICYgNjQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4Zm9ybVsnbGlua19saXN0J10uY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGVkaXYgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKGVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneHRlbXBsYXRlZm9ybScpKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigoZWRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wbGF0ZWRpdicpKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdXJsZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ1cmxmb3JtIl07CiAgICAgICAgICAgICAgICB1cmxmb3JtWydtZXRob2QnXVswXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2ZsYWcnXS52YWx1ZSAmIDE2KQogICAgICAgICAgICAgICAgICAgIHVybGZvcm1bJ21ldGhvZCddWzFdLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgdXJsZm9ybVsndXJsJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ3VybCddLnZhbHVlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVybGZvcm1bJ3VybCddLnZhbHVlID0gZm9ybVsndXJsJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgTG9hZFVSTCh1cmxmb3JtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYVERlbGV0ZShub2RlaWQsIHRlbXBsYXRlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSAiQXJlIHlvdSBzdXJlIGRlbGV0ZSB0ZW1wbGF0ZVsiK3RlbXBsYXRlaWQrIl0gZnJvbSBub2RlWyIrbm9kZWlkKyJdID8iOwogICAgICAgICAgICAgICAgaWYoY29uZmlybShtc2cpICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXRlbXBsYXRlX2RlbGV0ZSZub2RlaWQ9Iitub2RlaWQrIiZ0ZW1wbGF0ZWlkPSIrdGVtcGxhdGVpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3RlbXAnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSGlkZGVuVGVtcGxhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93VGVtcGxhdGVzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBIaWRkZW5UZW1wbGF0ZSgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wbGF0ZS1jb25maWcnKSkpCiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgaWYoKGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlLXRlbXBsYXRlJykpKQogICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGlmKChkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlX3ZpZXcnKSkpCiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgaWYoKGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfY29kZV9vcCcpKSkKICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGlmKChkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcGxhdGVkaXYnKSkpCiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBpZigoZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3h0ZW1wbGF0ZWZvcm0nKSkpCiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBYVFJlc2V0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VUYWJsZShmb3JtLCBmc2VsZWN0aWQsIGVsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb2RpdiA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgc3RyZGIgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGRiYXNlID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBmaWVsZHMgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHRhYmlkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgZmllbGRzb3B0aW9ucyA9ICIiOwogICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9IGZvcm1bZnNlbGVjdGlkXTsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdCkgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YWJhc2UnKSkgCiAgICAgICAgICAgICAgICAgICAgJiYgKHN0cmRiID0gb2Rpdi5nZXRBdHRyaWJ1dGUoJ2RiYXNlJykpICYmIChkYmFzZSA9IGV2YWwoc3RyZGIpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigodGFiaWQgPSBlbC5vcHRpb25zW2VsLnNlbGVjdGVkSW5kZXhdLnZhbHVlKSA+PSAwIAogICAgICAgICAgICAgICAgICAgICAgICAmJiAoZmllbGRzID0gZGJhc2VbJ3RhYmxlcyddW3RhYmlkXVsnZmllbGRzJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICYmIHNlbGVjdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBmaWVsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC5vcHRpb25zW2krK10gPSBuZXcgT3B0aW9uKGZpZWxkc1t4XVsnbmFtZSddLCB4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGZpZWxkc29wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RVUkwoZm9ybSwgYm94LCBpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiBib3ggJiYgaWQgPj0gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZihib3guY2hlY2tlZCA9PSB0cnVlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfdW5pcWVfJytpZF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfbGlzdF8nK2lkXS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc19maWxlXycraWRdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2lzX3BhZ2VfJytpZF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfdXJsXycraWRdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnbm9kZWlkXycraWRdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2lzX3VuaXFlXycraWRdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfbGlzdF8nK2lkXS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2lzX2ZpbGVfJytpZF0uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBmb3JtWydpc19wYWdlXycraWRdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaXNfdXJsXycraWRdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ25vZGVpZF8nK2lkXS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ29uZmlnVGVtcGxhdGUoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5zID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgYXJyID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBjb2RlID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKHBhdHRlcm4gPSBmb3JtWydwYXR0ZXJuJ10udmFsdWUpICYmIChjb2RlID0gZm9ybVsnY29kZSddLnZhbHVlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwYXR0ZXJucyA9IHBhdHRlcm4ucmVwbGFjZSgvXHIvbWlnLCcnKTsgCiAgICAgICAgICAgICAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXHJ8XG4vbWlnLCcnKTsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19zdWInXS5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHBhdHRlcm4uc3BsaXQoIlxuIik7ICAKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAwID0gbGlzdFswXS5yZXBsYWNlKC9ccnxcbi9taWcsJycpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcDEgPSBsaXN0WzFdLnJlcGxhY2UoL1xyfFxuL21pZywnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBuZXcgUmVnRXhwKHAwLCAnbScpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gdG9wLmV4ZWMoY29kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSByZXNbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBwMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHBhdHRlcm4ucmVwbGFjZSgvXHJ8XG4vbWlnLCcnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVpZCA9IGZvcm1bJ25vZGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZWlkID0gZm9ybVsnbGlua190YWJsZSddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZWlkID0gZm9ybVsndGVtcGxhdGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBmb3JtWyd1cmwnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gZm9ybVsnbWV0aG9kJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gZm9ybVsnb3AnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gIm0iOwogICAgICAgICAgICAgICAgICAgIHZhciBpc19zdWIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNfaWdub3JlY2FzZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBpc19nbG9iYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19zdWInXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3ViID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfaWdub3JlY2FzZSddLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpc19pZ25vcmVjYXNlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uICs9ICJpIjsgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpc19nbG9iYWwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVnID0gbmV3ICBSZWdFeHAocGF0dGVybiwgY29uZGl0aW9uKTsKICAgICAgICAgICAgICAgICAgICBpZigoYXJyID0gcmVnLmV4ZWMoY29kZSkpICYmIGFyci5sZW5ndGggPiAxKSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoZm9ybVsnbWFwJ10udmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydtYXAnXS52YWx1ZSkgbWFwID0gZXZhbChmb3JtWydtYXAnXS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ25maWVsZHMnXS52YWx1ZSA9IGFyci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZGl2ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkc29wdGlvbnMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkc29wdGlvbnMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoKG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YWJhc2UnKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJkYiA9IG9kaXYuZ2V0QXR0cmlidXRlKCdkYmFzZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRiYXNlID0gZXZhbChzdHJkYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYmFzZSAmJiBkYmFzZVsndGFibGVzJ11bdGFibGVpZF0gJiYgdGFibGVpZCA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGRiYXNlWyd0YWJsZXMnXVt0YWJsZWlkXVsnZmllbGRzJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNvcHRpb25zICs9ICI8b3B0aW9uIHZhbHVlPSciK3grIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzb3B0aW9ucyArPSBkYmFzZVsndGFibGVzJ11bdGFibGVpZF1bJ2ZpZWxkcyddW3hdWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiPC9vcHRpb24+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCAmJiAob2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlJytub2RlaWQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmNoaWxkcyA9IG9kaXYuZ2V0QXR0cmlidXRlKCdjaGlsZHMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHMgPSBldmFsKHN0cmNoaWxkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gY2hpbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRzb3B0aW9ucyArPSAiPG9wdGlvbiB2YWx1ZT0nIit4KyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkc29wdGlvbnMgKz0gY2hpbGRzW3hdKyIgPC9vcHRpb24+XG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wbGF0ZWlkID4gMCkgb3AgPSAidGVtcGxhdGVfdXBkYXRlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9ICI8ZGl2IGNsYXNzPSd0ZW1wbGF0ZS1iYXInICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIm9ubW91c2Vkb3duPSdkaXZtb3ZlKGV2ZW50LCB0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPHRhYmxlIHdpZHRoPTEwMCU+PHRyPjx0ZCBhbGlnbj1sZWZ0PiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuIGNsYXNzPSdjbG9zZXR4dCcgb25jbGljaz0nQ2xvc2VUaGlzVGlwKHRoaXMpJz7lhbPpl608L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPC90ZD48dGQgYWxpZ249cmlnaHQ+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPHNwYW4gY2xhc3M9J2Nsb3NlYnV0dG9uJyBvbmNsaWNrPSdDbG9zZVRoaXNUaXAodGhpcyknPuKVszwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L3RkPjwvdHI+PC90YWJsZT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgIHZhciAgYmxvY2sgPSAiPGRpdiBpZD0ndGVtcGxhdGUtY29uZmlnLWJsb2NrJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxmb3JtIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyBjbGFzcz0nbGlzdGZvcm0nICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAib25zdWJtaXQ9J0VkaXRUZW1wbGF0ZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZSknID4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdub2RlaWQnIHZhbHVlPSciK25vZGVpZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9JyIrb3ArIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbWV0aG9kJyB2YWx1ZT0nIittZXRob2QrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9JyIrdGFibGVpZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0ZW1wbGF0ZWlkJyB2YWx1ZT0nIit0ZW1wbGF0ZWlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25maWVsZHMnIHZhbHVlPSciK2Fyci5sZW5ndGgrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIlVSTDo8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J3VybCcgc2l6ZT04MCB2YWx1ZT0nIit1cmwrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8YnI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICLmqKHniYg6PHRleHRhcmVhIG5hbWU9J3BhdHRlcm4nIGNvbHM9NzYgcm93cz00PiIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgK3BhdHRlcm5zKyI8L3RleHRhcmVhPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGJyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19zdWInICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc19zdWIpIGJsb2NrICs9ICJjaGVja2VkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+57uT5p6c5LqM5qyh5Yy56YWNIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19nbG9iYWwnICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc19nbG9iYWwpIGJsb2NrICs9ICJjaGVja2VkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+6YeN5aSN5Yy56YWN5aSa5p2hIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2lnbm9yZWNhc2UnICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc19pZ25vcmVjYXNlKSBibG9jayArPSAiY2hlY2tlZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuW/veeVpeWkp+Wwj+WGmSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGhyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMTsgaSA8IGFyci5sZW5ndGg7aSsrKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPCAxMCkgYmxvY2sgKz0gJzAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gaSsiOiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHRleHRhcmVhIG5hbWU9J3JfIitpKyInIGNvbHM9NzYgcm93cz0xIHJlYWRvbmx5L2Rpc2FibGVkPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSBhcnJbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPC90ZXh0YXJlYT48YnI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzZWxlY3QgbmFtZT0nbm9kZWlkXyIraSsiJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIG1hcC5sZW5ndGggPj0gYXJyLmxlbmd0aCAmJiAobWFwW2ktMV1bJ2ZsYWcnXSAmIDEpKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJsb2NrICs9ICIgZGlzYWJsZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+5YWz6IGU6IqC54K5PC9vcHRpb24+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPG9wdGlvbiB2YWx1ZT0nIit4KyInICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXAubGVuZ3RoID49IGFyci5sZW5ndGggJiYgbWFwW2ktMV1bJ25vZGVpZCddID09IHgpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBzZWxlY3RlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPiIrIGNoaWxkc1t4XSsiIDwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9IGNoaWxkc29wdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPC9zZWxlY3Q+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfoh6rliqjmi7zmjqXkuLrlrozmiJDpk77mjqUnPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfbGlua18iK2krIiciOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIG1hcC5sZW5ndGggPj0gYXJyLmxlbmd0aCAmJiAobWFwW2ktMV1bJ2ZsYWcnXSAmIDEpKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgb25jbGljaz0nc2VsZWN0VVJMKHRoaXMuZm9ybSx0aGlzLCIraSsiKSc+6ZO+5o6lPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfpk77mjqXmoIfor4bkuIDmnaHlrozmlbTkv6Hmga/nmoTnu5PmnZ8nPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfdW5pcWVfIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXAubGVuZ3RoID49IGFyci5sZW5ndGggJiYgKG1hcFtpLTFdWydmbGFnJ10gJiAxKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwW2ktMV1bJ2ZsYWcnXSAmIDMyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBkaXNhYmxlZD10cnVlICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuagh+ivhuaAp+mTvuaOpTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gdGl0bGU9J+WIl+ihqOmhteWwhuS8muS8mOWFiOS4i+i9veW5tuS4lOS8muWumuacn+abtOaWsCc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19saXN0XyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwLmxlbmd0aCA+PSBhcnIubGVuZ3RoICYmIChtYXBbaS0xXVsnZmxhZyddICYgMSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiA2NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgZGlzYWJsZWQ9dHJ1ZSAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7liJfooajpobU8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfkuIvovb3lrZjlgqjkuLrmlofku7bmr5TlpoI65Zu+54mHLG1wM+etiSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19maWxlXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwLmxlbmd0aCA+PSBhcnIubGVuZ3RoICYmIChtYXBbaS0xXVsnZmxhZyddICYgMSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGNoZWNrZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBkaXNhYmxlZD10cnVlICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuaWh+S7tjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gdGl0bGU9J+WIl+ihqOmhteWIhumhtSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19wYWdlXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwLmxlbmd0aCA+PSBhcnIubGVuZ3RoICYmIChtYXBbaS0xXVsnZmxhZyddICYgMSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcFtpLTFdWydmbGFnJ10gJiAyNTYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiIGRpc2FibGVkPXRydWUgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI+5YiG6aG1PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGJyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c2VsZWN0IG5hbWU9J2ZpZWxkaWRfIitpKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuWvueW6lOWtl+autTwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgdGFibGVpZCA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIGRiYXNlWyd0YWJsZXMnXVt0YWJsZWlkXVsnZmllbGRzJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPG9wdGlvbiB2YWx1ZT0nIit4KyInICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXAubGVuZ3RoID49IGFyci5sZW5ndGggJiYgbWFwW2ktMV1bJ2ZpZWxkaWQnXSA9PSB4KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgc2VsZWN0ZWQgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj4iK2RiYXNlWyd0YWJsZXMnXVt0YWJsZWlkXVsnZmllbGRzJ11beF1bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyI8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSBmaWVsZHNvcHRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvc2VsZWN0PiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8c3BhbiB0aXRsZT0n5ZCM5LiA5a2X5q615aSa5Z2X5YaF5a655ZCI5bm25Zyo5LiA6LW3Jz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX211bHRpcGxlXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwLmxlbmd0aCA+PSBhcnIubGVuZ3RoICYmIChtYXBbaS0xXVsnZmxhZyddICYgMTAyNCkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7lhoXlrrnlkIjlubY8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfovazmjaLml7bpl7TmiLPkuLpVTklYVElNRSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19kYXRldGltZV8iK2krIiciOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIG1hcC5sZW5ndGggPj0gYXJyLmxlbmd0aCAmJiAobWFwW2ktMV1bJ2ZsYWcnXSAmIDUxMikpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7ml7bpl7TmiLM8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfmi7zmjqXlrozmlbTnmoRVUkzlnLDlnYAnPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfdXJsXyIraSsiJyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAgJiYgbWFwLmxlbmd0aCA+PSBhcnIubGVuZ3RoICYmIChtYXBbaS0xXVsnZmxhZyddICYgMTI4KSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPlVSTDwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gdGl0bGU9J+WOu+aOiWh0bWzmoIfnrb7lkI7nmoTmlofmnKzlhoXlrrknPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfbmVlZF9jbGVhcmh0bWxfIitpKyInIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hcCAmJiBtYXAubGVuZ3RoID49IGFyci5sZW5ndGggJiYgKG1hcFtpLTFdWydmbGFnJ10gJiA0KSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIiBjaGVja2VkICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPuWOu0hUTUw8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxzcGFuIHRpdGxlPSfljrvmjonnlpHkvLzlub/lkYrnmoTpg6jliIblhoXlrrnvvIzor6Xlip/og73osKjmhY7kvb/nlKgnPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfbmVlZF9hbnRpc3BhbV8iK2krIiciOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWFwICYmIG1hcC5sZW5ndGggPj0gYXJyLmxlbmd0aCAmJiAobWFwW2ktMV1bJ2ZsYWcnXSAmIDgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICIgY2hlY2tlZCAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIj7ljrvlub/lkYo8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrICs9ICI8aHI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nT0snID4iOwogICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPC9mb3JtPjwvZGl2PiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcGxhdGUtY29uZmlnJykpKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzdHIgKyBibG9jazsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pZCA9ICd0ZW1wbGF0ZS1jb25maWcnOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2d2lkdGggPSA3MjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluZnJhbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhsZWZ0ID0gcGFyc2VJbnQob2JvZHkub2Zmc2V0V2lkdGgpIC0gZGl2d2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gb2JvZHkub2Zmc2V0TGVmdCArKHhsZWZ0LzIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IDIwICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IHgrJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB5KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBkaXZ3aWR0aCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJCRnJhbWUoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5pZCA9ICd0ZW1wbGF0ZS1jb25maWctZnJhbWUnOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5vcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoYmxvY2spOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVGVzdFRlbXBsYXRlKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgbGluayA9ICIiOwogICAgICAgICAgICAgICAgdmFyIGNvZGUgPSAiIjsKICAgICAgICAgICAgICAgIHZhciBhcnIgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9ICJtIjsKICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgaXNfZ2xvYmFsPSAwOwogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAocGF0dGVybiA9IGZvcm1bJ3BhdHRlcm4nXS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAmJiAoY29kZSA9IGZvcm1bJ2NvZGUnXS52YWx1ZSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXHJ8XG4vbWlnLCcnKTsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19zdWInXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBwYXR0ZXJuLnNwbGl0KCJcbiIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAwID0gbGlzdFswXS5yZXBsYWNlKC9ccnxcbi9taWcsJycpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcDEgPSBsaXN0WzFdLnJlcGxhY2UoL1xyfFxuL21pZywnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBuZXcgUmVnRXhwKHAwLCAnbScpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gdG9wLmV4ZWMoY29kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSByZXNbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSBwMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHBhdHRlcm4ucmVwbGFjZSgvXHJ8XG4vbWlnLCcnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfaWdub3JlY2FzZSddLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiArPSAiaSI7IAogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpc19nbG9iYWwgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb24gKz0gImciOyAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChwYXR0ZXJuKTsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGNvbmRpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyAgUmVnRXhwKHBhdHRlcm4sIGNvbmRpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICBpZihpc19nbG9iYWwpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSgoYXJyID0gcmVnLmV4ZWMoY29kZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBhcnIubGVuZ3RoID4gMSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcnJbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc1tjb3VudCsrXSA9IGFycjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZigoYXJyID0gcmVnLmV4ZWMoY29kZSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgYXJyLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXNbY291bnQrK10gPSBhcnI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIjxkaXYgaWQ9J3RlbXBsYXRlLXRlc3QtaGVhZGVyJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIm9ubW91c2Vkb3duPSdkaXZtb3ZlKGV2ZW50LCB0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8dGFibGUgd2lkdGg9MTAwJT48dHI+PHRkIGFsaWduPWxlZnQ+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9J0Nsb3NlVGhpc1RpcCh0aGlzKSc+5YWz6ZetPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiJm5ic3A7Jm5ic3A7PHNwYW4gc3R5bGU9J2NvbG9yOiNGRTY0MkU7Jz7ljLnphY3mlbDph486Iitjb3VudCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPC90ZD48dGQgYWxpZ249cmlnaHQ+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8c3BhbiBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9J0Nsb3NlVGhpc1RpcCh0aGlzKSc+4pWzPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPC90ZD48L3RyPjwvdGFibGU+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxkaXYgaWQ9J3RlbXBsYXRlLW1hdGNoZXMnID4iOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBmb3JtWydsaW5rJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGNvdW50OyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmspIHVybCA9IGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuPnJlc3VsdDoiK2krIjxocj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGogPSAxOyBqIDwgbWF0Y2hlc1tpXS5sZW5ndGg7IGorKykgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaiA8IDEwKSBzdHIgKz0gIjAiOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gaisiOjx0ZXh0YXJlYSBjb2xzPTc2IHJvd3M9MT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICttYXRjaGVzW2ldW2pdKyI8L3RleHRhcmVhPjxicj4iOyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnID0gbmV3IFJlZ0V4cCgiPCIraisiPiIsICJpZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShyZWcsIG1hdGNoZXNbaV1bal0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVybCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIlVSTDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9NDggdmFsdWU9JyIrdXJsKyInPjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L3NwYW4+PGhyPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLXRlc3QnKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHN0cjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pZCA9ICd0ZW1wbGF0ZS10ZXN0JzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdndpZHRoID0gNzAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbmZyYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4bGVmdCA9IHBhcnNlSW50KG9ib2R5Lm9mZnNldFdpZHRoKSAtIGRpdndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG9ib2R5Lm9mZnNldExlZnQgKyh4bGVmdC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAyMCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSB4KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0geSsncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gZGl2d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVyQkZyYW1lKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuaWQgPSAndGVtcGxhdGUtdmlld2VyJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGNvdW50OyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmspIHVybCA9IGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jayArPSAiPHNwYW4gY2xhc3M9J2N0eHRfYmxvY2snPlJlc3VsdDoiK2krIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoaiA9IDE7IGogPCBtYXRjaGVzW2ldLmxlbmd0aDsgaisrKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihqIDwgMTApIGJsb2NrICs9ICIwIjsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gaisiOjx0ZXh0YXJlYSBjb2xzPTc2IHJvd3M9MT4iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArbWF0Y2hlc1tpXVtqXSsiPC90ZXh0YXJlYT48YnI+IjsgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGluaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZyA9IG5ldyBSZWdFeHAoIjwiK2orIj4iLCAiaWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UocmVnLCBtYXRjaGVzW2ldW2pdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIlVSTDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9NDggdmFsdWU9JyIrdXJsKyInPjxicj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgKz0gIjwvc3Bhbj48aHI+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Lm9wZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC53cml0ZShibG9jayk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93VGVtcGxhdGVzKHR4dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGFyciA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZWRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlLXRlbXBsYXRlJyk7CiAgICAgICAgICAgICAgICBpZihlZGl2KSBlZGl2LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIGVkaXYgJiYgKGFyciA9IGV2YWwodHh0KSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh0eHQpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gYXJyWydpZCddOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1waWQgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJtYXAgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5maWVsZHMgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rbWFwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RybGlua21hcCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXJyWyduYW1lJ107CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZm9ybXNbJ3RlbXBsYXRlZm9ybSddWydub2RlaWQnXS52YWx1ZSA9IG5vZGVpZDsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICAiPHVsIGNsYXNzPSd1bHRhYicgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0ndGVtcGxhdGUtaGVhZGVyJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLovpPlhaVVUkzmtYvor5XmqKHniYgiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLnhLblkI7mt7vliqDliLAmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9IG5hbWUgKyAiWyIgKyBhcnJbJ250ZW1wbGF0ZXMnXSArICJdIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9saT4iOwogICAgICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGFyclsnbnRlbXBsYXRlcyddOyBpKyspCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gYXJyWyd0ZW1wbGF0ZXMnXVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IGJhc2U2NHN0cmRlY29kZSh0ZW1wWydwYXR0ZXJuJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdGVtcFsnZmxhZ3MnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGlkID0gdGVtcFsnaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVpZCA9IHRlbXBbJ3RhYmxlaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFwID0gdGVtcFsnbWFwJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmttYXAgPSB0ZW1wWydsaW5rbWFwJ107CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm1hcCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXAubGVuZ3RoID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybWFwID0gIntbIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIG1hcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJtYXAgKz0gIntmaWVsZGlkOiIrbWFwW3hdWydmaWVsZGlkJ10rICIsIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyJub2RlaWQ6IittYXBbeF1bJ25vZGVpZCddKyAiLCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmxhZzoiK21hcFt4XVsnZmxhZyddKyAifSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCA8IChtYXAubGVuZ3RoIC0gMSkpIHN0cm1hcCArPSAiLCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJtYXAgKz0gIl19IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHJsaW5rbWFwID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmttYXApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxpbmttYXAgPSAiKHsiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmllbGRpZDonIitsaW5rbWFwWydmaWVsZGlkJ10rIicsIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIm5vZGVpZDonIitsaW5rbWFwWydub2RlaWQnXSsiJywiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsiZmxhZzonIitsaW5rbWFwWydmbGFnJ10rIiciIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsifSkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRlbXBbJ3VybCddOwogICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gdGVtcFsnbGluayddOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpJTIpIGNzc25hbWUgPSAnbHRlbXBsYXRlJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjc3NuYW1lID0gJ2x0ZW1wbGF0ZS1obCc7CiAgICAgICAgICAgICAgICAgICAgICAgIG5maWVsZHMgPSB0ZW1wWyduZmllbGRzJ10rMTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGZvcm0gYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzPSdsaXN0Zm9ybScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG5hbWU9J3hmb3JtIit0ZW1waWQrIicgb25zdWJtaXQ9J1hURWRpdCh0aGlzKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSciK2Nzc25hbWUrIicgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjx0ZXh0YXJlYSBuYW1lPSdwYXR0ZXJuJyBjb2xzPTgwIHJvd3M9MSByZWFkb25seS9kaXNhYmxlZCA+IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICtwYXR0ZXJuKyI8L3RleHRhcmVhPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdub2RlaWQnIHZhbHVlPSciK25vZGVpZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGVtcGxhdGVpZCcgdmFsdWU9JyIrdGVtcGlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdmbGFnJyB2YWx1ZT0nIitmbGFnKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0YWJsZWlkJyB2YWx1ZT0nIit0YWJsZWlkKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSduZmllbGRzJyB2YWx1ZT0nIituZmllbGRzKyInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdtYXAnIHZhbHVlPSciK3N0cm1hcCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbGluaycgdmFsdWU9JyIrbGluaysiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbGlua21hcCcgdmFsdWU9XCIiK3N0cmxpbmttYXArIlwiPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd1cmwnIHZhbHVlPSciK3VybCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZXVwZGF0ZScgdGl0bGU9J0NoYW5nZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIlhURWRpdCgneGZvcm0iK3RlbXBpZCsiJylcIiA+IitjaHJlZGl0KyI8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2VkZWxldGUnIHRpdGxlPSdEZWxldGUnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9J1hURGVsZXRlKCIrbm9kZWlkKyIsICIrdGVtcGlkKyIpJz4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC9mb3JtPiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvdWw+IjsKICAgICAgICAgICAgICAgICAgICBlZGl2LmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld1RlbXBsYXRlcyhub2RlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvbGRub2RlaWQgPSBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ11bJ25vZGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgaWYob2xkbm9kZWlkICE9IG5vZGVpZCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBIaWRkZW5UZW1wbGF0ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgRm9sZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZF8nK25vZGVpZCkpOwogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD10ZW1wbGF0ZV9saXN0Jm5vZGVpZD0iK25vZGVpZDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3RlbXBsYXRlJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93VGVtcGxhdGVzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYVEFkZChub2RlaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZWRpdCBMaW5rCiAgICAgICAgICAgIGZ1bmN0aW9uIEVkaXRMaW5rKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBsaW5rID0gIiI7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChsaW5rID0gZm9ybVsnbGluayddLnZhbHVlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgb3AgPSBmb3JtWydvcCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVpZCA9IGZvcm1bJ2xpbmtfdGFibGUnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVpZCA9IGZvcm1bJ3RlbXBsYXRlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IGZvcm1bJ3BhdHRlcm4nXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGZvcm1bJ2xpbmsnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZm9ybVsndXJsJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZsYWcgPSA4OwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX3N1YiddLmNoZWNrZWQgPT0gdHJ1ZSkgZmxhZyB8PSAxOwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPT0gdHJ1ZSkgZmxhZyB8PSAyOwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2lnbm9yZWNhc2UnXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gNDsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydtZXRob2QnXS52YWx1ZSA9PSAxKSBmbGFnIHw9IDE2OwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rX2ZsYWcgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2xpbmtfbWV0aG9kJ11bMV0uY2hlY2tlZCA9PSB0cnVlKSBsaW5rX2ZsYWcgfD0gMTY7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnbGlua19saXN0J10uY2hlY2tlZCA9PSB0cnVlKSBsaW5rX2ZsYWcgfD0gNjQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmttYXAgPSAiWyIgKyBmb3JtWydsaW5rX2ZpZWxkJ10udmFsdWUgKyAnLCcKICAgICAgICAgICAgICAgICAgICAgICAgKyBmb3JtWydsaW5rX25vZGUnXS52YWx1ZSArICcsJwogICAgICAgICAgICAgICAgICAgICAgICArIGxpbmtfZmxhZyArICddJzsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGxpbmttYXApOwogICAgICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJub2RlaWQ9Iitub2RlaWQrIiZ0YWJsZWlkPSIrdGFibGVpZCsiJmZsYWc9IitmbGFnCiAgICAgICAgICAgICAgICAgICAgICAgICsiJmxpbmttYXA9IitlbmNvZGVVUklDb21wb25lbnQobGlua21hcCkKICAgICAgICAgICAgICAgICAgICAgICAgKyImbGluaz0iK2VuY29kZVVSSUNvbXBvbmVudChsaW5rKQogICAgICAgICAgICAgICAgICAgICAgICArIiZwYXR0ZXJuPSIrZW5jb2RlVVJJQ29tcG9uZW50KHBhdHRlcm4pOwogICAgICAgICAgICAgICAgICAgIGlmKHVybCkgYXJndiArPSAiJnVybD0iK2VuY29kZVVSSUNvbXBvbmVudCh1cmwpOwogICAgICAgICAgICAgICAgICAgIGlmKG9wID09ICd0ZW1wbGF0ZV9hZGQnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiArPSAiJm9wPXRlbXBsYXRlX2FkZCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYob3AgPT0gJ3RlbXBsYXRlX3VwZGF0ZScpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImb3A9dGVtcGxhdGVfdXBkYXRlJnRlbXBsYXRlaWQ9Iit0ZW1wbGF0ZWlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZihhcmd2ICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9lZGl0bGluaycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcCA9PSAndGVtcGxhdGVfYWRkJykgUmVzZXRUZW1wbGF0ZWZvcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBIaWRkZW5UZW1wbGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93VGVtcGxhdGVzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2VkaXQgdGVtcGxhdGUKICAgICAgICAgICAgZnVuY3Rpb24gRWRpdFRlbXBsYXRlKGZvcm0sIGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvcCA9IGZvcm1bJ29wJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gZm9ybVsnbm9kZWlkJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVpZCA9IGZvcm1bJ3RlbXBsYXRlaWQnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciB0YWJsZWlkID0gZm9ybVsndGFibGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBmb3JtWydwYXR0ZXJuJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gZm9ybVsndXJsJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gZm9ybVsnbWV0aG9kJ10udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IDA7CiAgICAgICAgICAgICAgICBpZihmb3JtWydpc19zdWInXS5jaGVja2VkID09IHRydWUpIGZsYWcgfD0gMTsKICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2dsb2JhbCddLmNoZWNrZWQgPT0gdHJ1ZSkgZmxhZyB8PSAyOwogICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfaWdub3JlY2FzZSddLmNoZWNrZWQgPT0gdHJ1ZSkgZmxhZyB8PSA0OwogICAgICAgICAgICAgICAgaWYobWV0aG9kID09IDEpIGZsYWcgfD0gMTY7CiAgICAgICAgICAgICAgICB2YXIgbmZpZWxkcyA9IGZvcm1bJ25maWVsZHMnXS52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBmaWVsZGlkID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBpc19saW5rID0gMDsKICAgICAgICAgICAgICAgIHZhciBpc191cmwgPSAwOwogICAgICAgICAgICAgICAgdmFyIGlzX211bHRpcGxlID0gMDsKICAgICAgICAgICAgICAgIHZhciBpc19maWxlID0gMDsKICAgICAgICAgICAgICAgIHZhciBpc19uZWVkX2NsZWFyaHRtbCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgaXNfbmVlZF9hbnRpc3BhbSA9IDA7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGRfbm9kZWlkID0gMDsKICAgICAgICAgICAgICAgIHZhciBjaGlsZF9mbGFnID0gMDsKICAgICAgICAgICAgICAgIHZhciBtYXAgPSAieyI7CiAgICAgICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBuZmllbGRzOyBpKyspCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZmllbGRpZCA9ICBmb3JtWydmaWVsZGlkXycraV0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICBub2RlX2lkID0gLTE7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfbGlua18nK2ldLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfdW5pcWVfJytpXS5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gMzI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2ZpbGVfJytpXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX2xpc3RfJytpXS5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gNjQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX3BhZ2VfJytpXS5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gMjU2OwogICAgICAgICAgICAgICAgICAgICAgICBub2RlX2lkID0gZm9ybVsnbm9kZWlkXycraV0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGZvcm1bJ2lzX211bHRpcGxlXycraV0uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDEwMjQ7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfdXJsXycraV0uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDEyODsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19kYXRldGltZV8nK2ldLmNoZWNrZWQgPT0gdHJ1ZSkgCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVfZmxhZyB8PSA1MTI7CiAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVsnaXNfbmVlZF9jbGVhcmh0bWxfJytpXS5jaGVja2VkID09IHRydWUpIAogICAgICAgICAgICAgICAgICAgICAgICBub2RlX2ZsYWcgfD0gNDsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydpc19uZWVkX2FudGlzcGFtXycraV0uY2hlY2tlZCA9PSB0cnVlKSAKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9mbGFnIHw9IDg7CiAgICAgICAgICAgICAgICAgICAgbWFwICs9ICJbIitmaWVsZGlkKyIsIitub2RlX2lkKyIsIitub2RlX2ZsYWcrIl0iOwogICAgICAgICAgICAgICAgICAgIGlmKGkgPCAobmZpZWxkcyAtIDEpKSBtYXAgKz0gIjsiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbWFwICs9ICJ9IjsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm5vZGVpZD0iK25vZGVpZCsiJnRhYmxlaWQ9Iit0YWJsZWlkKyImZmxhZz0iIAogICAgICAgICAgICAgICAgICAgICtmbGFnKyImbWFwPSIrZW5jb2RlVVJJQ29tcG9uZW50KG1hcCkKICAgICAgICAgICAgICAgICAgICArIiZwYXR0ZXJuPSIrZW5jb2RlVVJJQ29tcG9uZW50KHBhdHRlcm4pOwogICAgICAgICAgICAgICAgaWYodXJsKSBhcmd2ICs9ICImdXJsPSIrZW5jb2RlVVJJQ29tcG9uZW50KHVybCk7CiAgICAgICAgICAgICAgICBpZihvcCA9PSAndGVtcGxhdGVfYWRkJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImb3A9dGVtcGxhdGVfYWRkIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYob3AgPT0gJ3RlbXBsYXRlX3VwZGF0ZScpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXJndiArPSAiJm9wPXRlbXBsYXRlX3VwZGF0ZSZ0ZW1wbGF0ZWlkPSIrdGVtcGxhdGVpZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgIGlmKGFyZ3YgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2VkaXR0ZW1wJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZyZW1vdmUoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3AgPT0gJ3RlbXBsYXRlX2FkZCcpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNldFRlbXBsYXRlZm9ybSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhpZGRlblRlbXBsYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1RlbXBsYXRlcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9kYXRhYmFzZQogICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RWaWV3KGRpdiwgZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGVsaXN0ID0gbmV3IEFycmF5KCd0YXNraW5mbycsJ2RhdGFiYXNlJywgJ3RlbXBsYXRlJywgCiAgICAgICAgICAgICAgICAgICAgJ3VybGJsb2NrJywgJ2RucycsICdwcm94eScsICdodHRweCcsICdkYXRhJywgJ3VzZXInKTsKICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwogICAgICAgICAgICAgICAgdmFyIG9saSA9IG51bGwsIG9iID0gbnVsbCwgb2RpdiA9IG51bGw7CiAgICAgICAgICAgICAgICBoaWRlQkZyYW1lKCk7CiAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBlbGlzdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigob2xpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYicraSkpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYob2xpID09IGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGkuY2xhc3NOYW1lID0gJ3RhYi1zZWxlY3RlZCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGkuY2xhc3NOYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRpdiA9PSBlbGlzdFtpXSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxpc3RbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICBvYi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGlzdFtpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9kaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxpc3RbaV0gPT0gJ3Rhc2tpbmZvJykgCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9UaW1lcikgd2luZG93LmNsZWFySW50ZXJ2YWwob1RpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9UaW1lciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihlbGlzdFtpXSA9PSAnZGF0YWJhc2UnKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2Zm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYmZvcm0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpdmZvcm0pIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RiZmllbGRmb3JtJykpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGVsaXN0W2ldID09ICd0ZW1wbGF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dGZvcm0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpdmZvcm0pIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLXRlc3QnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkaXZmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlLWNvbmZpZycpKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2Zm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZWxpc3RbaV0gPT0gJ3VybGJsb2NrJykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpdmZvcm0gPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybGxpc3QtZm9ybScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGl2Zm9ybSkgZGl2Zm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGRpdmZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkLXZpZXcnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGRpdiA9PSAndGFza2luZm8nKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ09LJyk7CiAgICAgICAgICAgICAgICAgICAgbG9hZFRhc2tJbmZvKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGRpdiA9PSAnZGF0YWJhc2UnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBvZGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGJzZWxlY3QnKTsKICAgICAgICAgICAgICAgICAgICBpZihvZGIuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlzdFRhYmxlcygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICd0ZW1wbGF0ZScpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVib2R5Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYodHJlZWJvZHkuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgQWRkTm9kZSgtMSwwLCJSb290IiwwKTsKICAgICAgICAgICAgICAgICAgICAgICAgRm9sZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9sZF8wJykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICd1cmxibG9jaycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybGJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybGJsb2NrJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodXJsYmxvY2spCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB1cmxibG9jay5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybC1saXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVybGxpc3QuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3VybGJsb2NrZm9ybSddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdFBOb2RlcygwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICdkYXRhJykKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGRpdiA9PSAnZG5zJykKICAgICAgICAgICAgICAgIC8vJiYgb2IuaW5uZXJIVE1MID09ICcnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc2V0RE5TTGlzdCgpOwogICAgICAgICAgICAgICAgICAgIExpc3RETlMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICdwcm94eScpCiAgICAgICAgICAgICAgICAvLyYmIG9iLmlubmVySFRNTCA9PSAnJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldFByb3h5TGlzdCgpOwogICAgICAgICAgICAgICAgICAgIExpc3RQcm94eSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihkaXYgPT0gJ2h0dHB4JykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldEh0dHBIZWFkZXJzKCk7CiAgICAgICAgICAgICAgICAgICAgR2V0SHR0cEhlYWRlcnMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoZGl2ID09ICd1c2VyJykKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbG9hZFRhc2tJbmZvKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVmlld1Rhc2soJ3Rhc2tfdmlldycpOwogICAgICAgICAgICAgICAgb1RpbWVyID0gd2luZG93LnNldEludGVydmFsKCJWaWV3VGFzaygndGFza192aWV3JykiLCAxMDAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gR2V0Q29udGVudCh1cmwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKGFyZ3YgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIC8veG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAvL3htbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gSGlkZGVuREJGaWVsZGZvcm0oKTsKICAgICAgICAgICAgfQoJICAgICAgICBmdW5jdGlvbiBnZXRGcmFtZURvY3VtZW50KGlkKQoJICAgICAgICB7CgkgICAgICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwoJICAgICAgICAgICAgdmFyIERvYyA9IG51bGw7CgkgICAgICAgICAgICBpZihpZnJhbWUpCgkgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJyb3dzZXIgPSBuYXZpZ2F0b3IuYXBwTmFtZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uOwogICAgICAgICAgICAgICAgICAgIGlmKHZlcnNpb24ubWF0Y2goL01TSUUvaSkgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIC8vSUUKCSAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgIERvYyA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmKGlmcmFtZS5jb250ZW50RG9jdW1lbnQpIC8vIEZvciBOUzYKCSAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgIERvYyA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYoaWZyYW1lLmRvY3VtZW50KQoJICAgICAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAgICAgRG9jID0gaWZyYW1lLmRvY3VtZW50OwoJICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBudWxsOwoJICAgICAgICAgICAgICAgIGlmKERvYykKCSAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgIGlmKERvYy5kZXNpZ25Nb2RlKSBEb2MuZGVzaWduTW9kZSA9ICdPbic7CgkgICAgICAgICAgICAgICAgICAgIGlmKERvYy5jb250ZW50RWRpdGFibGUpIERvYy5jb250ZW50RWRpdGFibGUgPSB0cnVlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiBEb2M7CgkgICAgICAgIH0KCSAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0Q29udGVudChpZCkKCSAgICAgICAgewoJICAgICAgICAgICAgdmFyIERvYyA9IGdldEZyYW1lRG9jdW1lbnQoaWQpOwoJICAgICAgICAgICAgaWYoRG9jKQoJICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKERvYy5nZXRTZWxlY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICAgICBhbGVydChEb2MuZ2V0U2VsZWN0aW9uKCkucGFyZW50Tm9kZS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKERvYy5zZWxlY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydChEb2Muc2VsZWN0aW9uLnBhcmVudE5vZGUuaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld1NlbGVjdChlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuaW5uZXJIVE1MKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVsZW1lbnQucGFyZW50Tm9kZS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIExvYWRMaW5rT3B0aW9ucygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciB0YWJsZWlkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IDA7CiAgICAgICAgICAgICAgICB2YXIgb2RpdiA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgbGlua21hcCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgb3NlbGVjdCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZGJhc2UgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ107CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZSkgPiAwICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydsaW5rbWFwJ10udmFsdWUpIGxpbmttYXAgPSBldmFsKGZvcm1bJ2xpbmttYXAnXS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZvcm1bJ2ZsYWcnXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICB0YWJsZWlkID0gZm9ybVsndGFibGVpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmKChvZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGFiYXNlJykpCiAgICAgICAgICAgICAgICAgICAgICAgICYmIChzdHJkYiA9IG9kaXYuZ2V0QXR0cmlidXRlKCdkYmFzZScpKSAKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKGRiYXNlID0gZXZhbChzdHJkYikpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdCA9IGZvcm1bJ2xpbmtfdGFibGUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoeCBpbiBkYmFzZVsndGFibGVzJ10pCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlID0gZGJhc2VbJ3RhYmxlcyddW3hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbih0YWJsZVsnbmFtZSddLCB4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmttYXAgJiYgeCA9PSB0YWJsZWlkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2k7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcCAmJiB0YWJsZWlkICA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRzID0gZGJhc2VbJ3RhYmxlcyddW3RhYmxlaWRdWydmaWVsZHMnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3QgPSBmb3JtWydsaW5rX2ZpZWxkJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gZmllbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1tpXSA9IG5ldyBPcHRpb24oZmllbGRzW3hdWyduYW1lJ10sIHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmttYXAgJiYgZmxhZyA+PSAwICYmIChmbGFnICYgOCkgJiYgeCA9PSBsaW5rbWFwWydmaWVsZGlkJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmNoaWxkcyA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+IDAgJiYgKG9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9kZScrbm9kZWlkKSkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHN0cmNoaWxkcyA9IG9kaXYuZ2V0QXR0cmlidXRlKCdjaGlsZHMnKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICYmIChjaGlsZHMgPSBldmFsKHN0cmNoaWxkcykpICkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChmb3JtWydsaW5rbWFwJ10udmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0ID0gZm9ybVsnbGlua19ub2RlJ107CiAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9ucy5sZW5ndGggPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gY2hpbGRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1tpXSA9IG5ldyBPcHRpb24oY2hpbGRzW3hdLCB4KTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlua21hcCAmJiB4ID09IGxpbmttYXBbJ25vZGVpZCddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoc3RyY2hpbGRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCQkgICAgZnVuY3Rpb24gTG9hZFVSTChmb3JtKQoJCSAgICB7CgkJICAgICAgICB2YXIgdXJsID0gZm9ybVsndXJsJ10udmFsdWU7CgkJICAgICAgICBpZih1cmwpCgkJICAgICAgICB7CgkJICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwoJCSAgICAgICAgICAgIGlmKCh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQoJCSAgICAgICAgICAgIHsKCQkgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVUkwgPSAnL3Byb3h5LycrdXJsOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmb3JtWydtZXRob2QnXVsxXS5jaGVja2VkID09IHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChwb3MgPSB1cmwuaW5kZXhPZignPycpKSA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RVUkwgPSAnL3Byb3h5LycrdXJsLnN1YnN0cmluZygwLCBwb3MtMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9IHVybC5zdWJzdHJpbmcocG9zICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFVSTCA9ICcvcHJveHkvJyt1cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgcmVxdWVzdFVSTCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CgkJICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VVJMID0gJy9wcm94eS8nK3VybDsKCQkgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignR0VUJywgcmVxdWVzdFVSTCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCgkJICAgICAgICAgICAgICAgIHsKCQkgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKCQkgICAgICAgICAgICAgICAgICAgIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCgkJICAgICAgICAgICAgICAgICAgICAgICAgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0geG1sSHR0cC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl2ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlX2NvZGVfb3AnKSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdXJjZV92aWV3Jyk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQpIGVsZW1lbnQuaW5uZXJIVE1MID0gIiI7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChlZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBsYXRlZGl2JykpKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdi5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ11bJ2NvZGUnXS52YWx1ZSA9IHN0cjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXVsndXJsJ10udmFsdWUgPSB1cmw7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtc1sndGVtcGxhdGVmb3JtJ11bJ21ldGhvZCddLnZhbHVlID0gbWV0aG9kOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKCJpZCIsICdlZGl0b3ItZnJhbWUnKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZSgic3JjIiwgJ2Fib3V0OmJsYW5rJyk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChkb2MgPSBnZXRGcmFtZURvY3VtZW50KCdlZGl0b3ItZnJhbWUnKSkpCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sc3RyID0gc3RyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RyLm1hdGNoKC88YmFzZSAuKj9ocmVmPS4qPz4vaSkgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZXVybCA9IHVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKHBvcyA9IHVybC5sYXN0SW5kZXhPZignLycpKSA+IDYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNldXJsID0gdXJsLnN1YnN0cmluZygwLCBwb3MrMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlaHJlZiA9ICI8aGVhZD48YmFzZSBocmVmPSciK2Jhc2V1cmwrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyID0gc3RyLnJlcGxhY2UoLzxoZWFkPi9pLCBiYXNlaHJlZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Mub3BlbigpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLndyaXRlKGh0bWxzdHIpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlld0RhdGFiYXNlKCk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvcm1zWyd0ZW1wbGF0ZWZvcm0nXVsnY29kZSddLnZhbHVlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSB4bWxIdHRwLmdldEFsbFJlc3BvbnNlSGVhZGVycygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJfd2FpdCgpOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfd2FpdCgpOwoJCSAgICAgICAgICAgIH0KCQkgICAgICAgIH0KCQkgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldERpdihpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgICAgICAgICAgICAgIGlmKGRpdikgZGl2LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc2V0VVJMTGlzdCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3VybGJsb2NrZm9ybSddOwogICAgICAgICAgICAgICAgaWYoZm9ybSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldERpdigndXJsLWxpc3QnKTsKICAgICAgICAgICAgICAgICAgICAvL2Zvcm1bJ2xldmVsJ10ub3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZm9ybVsndXJsJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICBmb3JtWyd1cmwnXS52YWx1ZSA9ICdodHRwOi8vJzsKICAgICAgICAgICAgICAgICAgICBmb3JtWyd1cmwnXS5zZWxlY3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0UE5vZGVzKG5vZGVpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sndXJsYmxvY2tmb3JtJ107CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIG5vZGVpZCA+PSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD1ub2RlX2Jyb3RoZXImbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgPSAib3A9bm9kZV9jaGlsZHMmbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmKGFyZ3YgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL25vZGVsaXN0JywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SZXNldFVSTExpc3QoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG5vZGUgPSBldmFsKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9zZWxlY3QgPSBmb3JtWydub2RlaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3NlbGVjdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDAsIHggPSAxLCB0aWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRuYW1lID0gIi4uIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRub2RlWydpZCddID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsZWN0Lm9wdGlvbnNbeCsrXT1uZXcgT3B0aW9uKHRuYW1lLCB0bm9kZVsnaWQnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCB0bm9kZVsnbmNoaWxkcyddOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlkID0gdG5vZGVbJ2NoaWxkcyddW2ldWydpZCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRuYW1lID0gdG5vZGVbJ2NoaWxkcyddW2ldWyduYW1lJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobm9kZWlkID09IHRpZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3NlbGVjdC5vcHRpb25zW3hdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWxlY3Qub3B0aW9uc1t4XSA9IG5ldyBPcHRpb24odG5hbWUsIHRpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyt4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtb3ZlQ2hpbGROb2Rlcyhmb3JtLCBub2RlaWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvbGlzdCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgb2NoaWxkcyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChvbGlzdCA9IGZvcm1bJ25vZGVpZCddKSAmJiAob2NoaWxkcyA9IGZvcm1bJ2NoaWxkcyddKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvbGlzdC5vcHRpb25zLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgeCA9IDE7CiAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgb2NoaWxkcy5vcHRpb25zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG5hbWUgPSBvY2hpbGRzLm9wdGlvbnNbaV0udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgdGlkID0gb2NoaWxkcy5vcHRpb25zW2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aWQgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0bmFtZSA9PSAnKicpIHRuYW1lID0gJy4uJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA9PSB0aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xpc3Qub3B0aW9uc1t4KytdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xpc3Qub3B0aW9uc1t4KytdID0gbmV3IE9wdGlvbih0bmFtZSwgdGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvY2hpbGRzLm9wdGlvbnMubGVuZ3RoID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0Tm9kZVVSTHMoZm9ybSwgb25hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBsZXZlbCA9IC0xOwogICAgICAgICAgICAgICAgdmFyIG9zZWxlY3QgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgICAgICAgIHZhciBvdGV4dCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChvc2VsZWN0ID0gZm9ybVtvbmFtZV0pICYmIChpbmRleCA9IG9zZWxlY3Quc2VsZWN0ZWRJbmRleCkgPiAwIAogICAgICAgICAgICAgICAgICAgICYmIChub2RlaWQgPSBvc2VsZWN0Lm9wdGlvbnNbaW5kZXhdLnZhbHVlKSA+PSAwKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL2lmKG9uYW1lID09ICdjaGlsZHMnKSBtb3ZlQ2hpbGROb2Rlcyhmb3JtLCBub2RlaWQpOwogICAgICAgICAgICAgICAgICAgIC8vbGV2ZWwgPSBmb3JtWydsZXZlbCddLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGZvcm1bJ21ldGhvZCddLm9wdGlvbnNbMV0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGZvcm1bJ2xldmVsJ10ub3B0aW9uc1syXS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgUmVzZXRVUkxMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExpc3RVUkxzKCdsaXN0Jywgbm9kZWlkLCBsZXZlbCwgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVmlld0NoaWxkc1VSTCh1cmxub2RlaWQsIGxldmVsLCBwYWdlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYodXJsbm9kZWlkID49IDAgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUmVzZXRVUkxMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9dXJsbm9kZV9jaGlsZHMmdXJsbm9kZWlkPSIrdXJsbm9kZWlkKyImcGFnZT0iK3BhZ2U7CiAgICAgICAgICAgICAgICAgICAgaWYobGV2ZWwgPj0gMCkgYXJndiArPSAiJmxldmVsPSIrbGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy92aWV3Y2hpbGRzJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93Tm9kZVVSTHMoeG1sSHR0cC5yZXNwb25zZVRleHQsIHBhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gTGlzdFVSTHModHlwZSwgbm9kZWlkLCBsZXZlbCwgcGFnZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIGlmKG5vZGVpZCA+PSAwICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc2V0VVJMTGlzdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYodHlwZSA9PSAnbGlzdCcpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPXVybG5vZGVfbGlzdCZub2RlaWQ9Iitub2RlaWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgPSAib3A9dXJsbm9kZV9jaGlsZHMmdXJsbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImcGFnZT0iK3BhZ2U7CiAgICAgICAgICAgICAgICAgICAgLy9pZihsZXZlbCA+PSAwKSBhcmd2ICs9ICImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3VybG5vZGUnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dOb2RlVVJMcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCwgcGFnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dSZWNvcmQodHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcmVzID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBmaWVsZHMgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHggPSAwOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIChyZXMgPSBldmFsKHR4dCkpICE9IG51bGwgJiYgKGZpZWxkcyA9IHJlc1snZmllbGRzJ10pKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIjxkaXYgaWQ9J3JlY29yZC1oZWFkZXInICI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAib25tb3VzZWRvd249J2Rpdm1vdmUoZXZlbnQsIHRoaXMpJz4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjx0YWJsZSB3aWR0aD0xMDAlPjx0cj48dGQgYWxpZ249bGVmdD4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuIGNsYXNzPSdjbG9zZXR4dCcgb25jbGljaz0nQ2xvc2VUaGlzVGlwKHRoaXMpJz7lhbPpl608L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L3RkPjx0ZCBhbGlnbj1yaWdodD4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxzcGFuIGNsYXNzPSdjbG9zZWJ1dHRvbicgb25jbGljaz0nQ2xvc2VUaGlzVGlwKHRoaXMpJz7ilbM8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L3RkPjwvdHI+PC90YWJsZT4iOwogICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjwvZGl2PiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPGRpdiBpZD0ncmVjb3JkLXJlcycgPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gZmllbGRzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8ZGl2IGNsYXNzPSdyZWNvcmQtdGl0bGUnPiIreCsiPC9kaXY+IjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8ZGl2IGNsYXNzPSdyZWNvcmQtdHh0Jz4iCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSAiPHRleHRhcmVhIGNvbHM9OTAgcm93cz00ID4iK2Jhc2U2NHN0cmRlY29kZShmaWVsZHNbeF0pCiAgICAgICAgICAgICAgICAgICAgICAgICsiPC90ZXh0YXJlYT4iOyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjwvZGl2PiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmKChlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZC12aWV3JykpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc3RyOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSAncmVjb3JkLXZpZXcnOwogICAgICAgICAgICAgICAgICAgIHZhciBkaXZ3aWR0aCA9IDY4MDsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbmZyYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHhsZWZ0ID0gcGFyc2VJbnQob2JvZHkub2Zmc2V0V2lkdGgpIC0gZGl2d2lkdGg7CiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBvYm9keS5vZmZzZXRMZWZ0ICsoeGxlZnQvMik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAyMCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IHgrJ3B4JzsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IHkrJ3B4JzsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gZGl2d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAgICAgb3ZlckJGcmFtZShlbGVtZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBWaWV3UmVjb3JkKHVybGlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYodXJsaWQgPiAwICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXJlY29yZF92aWV3JnVybG5vZGVpZD0iK3VybGlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvcmVjb3JkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93UmVjb3JkKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLyogU2hvdyBOb2RlIFVSTHMgKi8KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd05vZGVVUkxzKHR4dCwgcGFnZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1sndXJsYmxvY2tmb3JtJ107CiAgICAgICAgICAgICAgICB2YXIgdXJsbGlzdCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZih0eHQgJiYgZm9ybSAmJiAodXJsbGlzdCA9IGV2YWwodHh0KSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBSZXNldFVSTExpc3QoKTsgCiAgICAgICAgICAgICAgICAgICAgdmFyIHVybGl0ZW0gPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHZhciB0bmFtZSA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBuY2hpbGRzID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsbm9kZWlkID0gLTE7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY29yZGlkID0gLTE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwLCB4ID0gMTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICI8dWwgY2xhc3M9J3VybC11bCc+IjsKICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IDAsIHRvID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgcGh0bWxzdHIgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSAwOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdHR5cGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgcHBpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAiY2hpbGRzIjsKICAgICAgICAgICAgICAgICAgICB1cmxub2RlaWQgPSB1cmxsaXN0WydpZCddOwogICAgICAgICAgICAgICAgICAgIGZyb20gPSBwYXJzZUludChwYWdlKSAtIDEwOwogICAgICAgICAgICAgICAgICAgIGlmKGZyb20gPCAxKSBmcm9tID0gMTsKICAgICAgICAgICAgICAgICAgICB0byA9IGZyb20gKyAyMDsKICAgICAgICAgICAgICAgICAgICBpZih0byA+IHVybGxpc3RbJ3BhZ2VzJ10pIHRvID0gcGFyc2VJbnQodXJsbGlzdFsncGFnZXMnXSkgKyAxOwogICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICI8bGkgY2xhc3M9J3VybGxpLWhlYWRlcic+ICI7CiAgICAgICAgICAgICAgICAgICAgaWYoKHBwaWQgPSB1cmxsaXN0WydwYXJlbnQnXSkgPj0gMCkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZihwcGlkID09IDApIAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0dHlwZSA9ICJsaXN0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBwaWQgPSB1cmxsaXN0WydwcG5vZGUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3R0eXBlID0gdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiWzxhIGhyZWY9J2phdmFzY3JpcHQ6OycgY2xhc3M9J2VhZGQnIG9uY2xpY2s9XCJMaXN0VVJMcygnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgK2xpc3R0eXBlKyInLCIrcHBpZCsiLCAiK2xldmVsKyIsIDEpO1wiPuS4iuS4gOWxgjwvYT5dJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIlVSTOaAu+aVsO+8miIrdXJsbGlzdFsnbmNoaWxkcyddOwogICAgICAgICAgICAgICAgICAgIGlmKHVybGxpc3RbJ3BhZ2VzJ10gPiAxKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIiDlhbEiK3VybGxpc3RbJ3BhZ2VzJ10rIumhtSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmcm9tID4gMjApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICI8YSBjbGFzcz0ndXJsLWxpLXBhZ2UnIGhyZWY9J2phdmFzY3JpcHQ6OycgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICIgb25jbGljaz1cIkxpc3RVUkxzKCciK3R5cGUrIicsICIraWQrIiwnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICtsZXZlbCsiJywnMScpO1wiPjE8L2E+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsuLi4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpID0gZnJvbTsgaSA8IHRvOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSA9PSBwYWdlKSBwaHRtbHN0ciArPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiPGEgY2xhc3M9J3VybC1saS1wYWdlJyBocmVmPSdqYXZhc2NyaXB0OjsnICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJMaXN0VVJMcygnIit0eXBlKyInLCAiK3VybG5vZGVpZCsiLCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICtsZXZlbCsiJywnIitpKyInKTtcIj4iK2krIjwvYT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvIDwgKHVybGxpc3RbJ3BhZ2VzJ10gLSAyMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB1cmxsaXN0WydwYWdlcyddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOy4uLiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAiPGEgY2xhc3M9J3VybC1saS1wYWdlJyBocmVmPSdqYXZhc2NyaXB0OjsnICI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaHRtbHN0ciArPSAib25jbGljaz1cIkxpc3RVUkxzKCciK3R5cGUrIicsICIrdXJsbm9kZWlkICsiLCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgK2xldmVsKyInLCciK2krIicpO1wiPiIraSsiPC9hPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICBpZihwaHRtbHN0ciAhPSAiIilodG1sc3RyICs9IHBodG1sc3RyICsgIjxocj4iOwogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQocGh0bWxzdHIpOwogICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgIGZvcih4IGluIHVybGxpc3RbJ2NoaWxkcyddKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgICB1cmxpdGVtID0gdXJsbGlzdFsnY2hpbGRzJ11beF07CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVpZCA9IHVybGl0ZW1bJ25vZGVpZCddOwogICAgICAgICAgICAgICAgICAgICAgICAvL3VybGlkID0gdXJsaXRlbVsndXJsaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPSB1cmxpdGVtWydsZXZlbCddOwogICAgICAgICAgICAgICAgICAgICAgICB1cmxub2RlaWQgPSB1cmxpdGVtWydpZCddOwogICAgICAgICAgICAgICAgICAgICAgICAvL3JlY29yZGlkID0gdXJsaXRlbVsncmVjb3JkaWQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbmNoaWxkcyA9IHVybGl0ZW1bJ25jaGlsZHMnXTsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsaXRlbVsndXJsJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA9ICd1cmwtbGknOwogICAgICAgICAgICAgICAgICAgICAgICBpZih1cmxpdGVtWydzdGF0dXMnXSA8IDApIGNzcyA9ICd1cmwtbGktd2Fybic7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0nIitjc3MrIicgb25tb3VzZW91dD1cIm91dERpdih0aGlzLCciK2NzcysiJylcIiAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW1vdmU9XCJvbkRpdih0aGlzLCAndXJsLWxpLXNlbGVjdGVkJylcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSBpKyI6Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGEgaHJlZj0nIit1cmwrIicgdGFyZ2V0PSdfYmxhbmsnPiIrdXJsKyI8L2E+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobmNoaWxkcyA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIls8c3BhbiBjbGFzcz0nZXZpZXcnICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbmNsaWNrPVwiVmlld0NoaWxkc1VSTCgiK3VybG5vZGVpZCsiLDAsMSlcIj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSBuY2hpbGRzKyI8L3NwYW4+XSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2V2aWV3JyB0aXRsZT0nVmlldycgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIlZpZXdSZWNvcmQoIit1cmxub2RlaWQrIilcIj4iK2NocnZpZXcrIjwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAib25jbGljaz1cIkRlbGV0ZU5vZGVVUkwoIitub2RlaWQrIiwgIit1cmxub2RlaWQrIiwiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICInIit1cmwrIicsJyIrcGFnZSsiJylcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYodXJsbGlzdFsncGFnZXMnXSA+IDEpIGh0bWxzdHIgKz0gIjxocj4iOwogICAgICAgICAgICAgICAgICAgIGlmKHBodG1sc3RyICE9ICIiKWh0bWxzdHIgKz0gcGh0bWxzdHI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsLWxpc3QnKTsKICAgICAgICAgICAgICAgICAgICBpZihkaXYpIGRpdi5pbm5lckhUTUwgPSBodG1sc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gSGlkZGVuVVJMTGlzdEZvcm0oKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybGxpc3QtZm9ybScpOwogICAgICAgICAgICAgICAgaWYoZGl2KSBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGhpZGVCRnJhbWUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBBZGROb2RlVVJMKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBub2RlaWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBwYXJlbnRpZCA9IC0xOwogICAgICAgICAgICAgICAgdmFyIGxldmVsID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAobm9kZWlkID0gZm9ybVsnbm9kZWlkJ10udmFsdWUpID4gMCAKICAgICAgICAgICAgICAgICAgICAmJiAodXJsID0gZm9ybVsndXJsJ10udmFsdWUpICYmIHVybCAhPSAiaHR0cDovLyIKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD11cmxub2RlX2FkZCZub2RlaWQ9Iitub2RlaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3YgKz0gIiZ1cmw9IitlbmNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgICAgICBpZigocGFyZW50aWQgPSBmb3JtWydwYXJlbnRpZCddLnZhbHVlKSA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImcGFyZW50aWQ9IitwYXJlbnRpZDsKICAgICAgICAgICAgICAgICAgICBpZigobGV2ZWwgPSBmb3JtWydsZXZlbCddLnZhbHVlKSA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2FkZG5vZGV1cmwnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vZGVVUkxzKHhtbEh0dHAucmVzcG9uc2VUZXh0LCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhpZGRlblVSTExpc3RGb3JtKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBYQWRkTm9kZVVSTChlLCBwYXJlbnRpZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgICAgICAgICAgICB2YXIgWGRpdiA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXJsbGlzdC1mb3JtIik7CiAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsKICAgICAgICAgICAgICAgIHZhciB5ID0gZS5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLmxlZnQgPSB4OwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS50b3AgPSB5ICsgMTA7CiAgICAgICAgICAgICAgICBYZGl2LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJzsKICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbInVybGxpc3QtYWRkLWZvcm0iXTsKICAgICAgICAgICAgICAgIGZvcm1bJ3BhcmVudGlkJ10udmFsdWUgPSBwYXJlbnRpZDsKICAgICAgICAgICAgICAgIGZvcm1bJ3VybCddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICBmb3JtWyd1cmwnXS52YWx1ZSA9ICdodHRwOi8vJzsKICAgICAgICAgICAgICAgIGZvcm1bJ3VybCddLnNlbGVjdCgpOwogICAgICAgICAgICAgICAgb3ZlckJGcmFtZShYZGl2KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlTm9kZVVSTCh1cmxpZCwgb3NlbGVjdCwgcGFnZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IChvc2VsZWN0KSA/IG9zZWxlY3Quc2VsZWN0ZWRJbmRleCA6IDA7CiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSAoaW5kZXggPj0gMCkgPyBvc2VsZWN0Lm9wdGlvbnNbaW5kZXhdLnZhbHVlIDogLTE7CiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IChpbmRleCA+PSAwKT8gb3NlbGVjdC5vcHRpb25zW2luZGV4XS50ZXh0IDogIiI7CiAgICAgICAgICAgICAgICBpZih1cmxpZCA+IDAgJiYgbGV2ZWwgPj0gMAogICAgICAgICAgICAgICAgICAgICYmIGNvbmZpcm0oIuaCqOehruiupOS/ruaUueS8mOWFiOe6p+S4ulsiK3RleHQrIl0/IikKICAgICAgICAgICAgICAgICAgICAmJih4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPXVybG5vZGVfdXBkYXRlJnVybG5vZGVpZD0iIAogICAgICAgICAgICAgICAgICAgICAgICArdXJsbm9kZWlkKyImbGV2ZWw9IitsZXZlbDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL3Vwbm9kZXVybCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vZGVVUkxzKHhtbEh0dHAucmVzcG9uc2VUZXh0LCBwYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVOb2RlVVJMKG5vZGVpZCwgdXJsbm9kZWlkLCB1cmwsIHBhZ2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihub2RlaWQgPiAwICYmIHVybG5vZGVpZCA+IDAgCiAgICAgICAgICAgICAgICAgICAgJiYgY29uZmlybSgi5oKo56Gu6K6k5Yig6ZmkVVJMWyIrdXJsKyJdID8iKQogICAgICAgICAgICAgICAgICAgICYmKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9dXJsbm9kZV9kZWxldGUmbm9kZWlkPSIrbm9kZWlkKyImdXJsbm9kZWlkPSIrdXJsbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvbm9kZXVybCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd05vZGVVUkxzKHhtbEh0dHAucmVzcG9uc2VUZXh0LCBwYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgUmVzZXREaXYoJ3VybC1saXN0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBSZXNldEROU0xpc3QoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWydkbnMtYWRkLWZvcm0nXTsKICAgICAgICAgICAgICAgIGlmKGZvcm0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZm9ybVsnaG9zdCddLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgZm9ybVsnaG9zdCddLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd0ROUyh0eHQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG5zLWxpc3QnKTsKICAgICAgICAgICAgICAgIHZhciBvYmpkbnNsaXN0ID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBkbnNsaXN0ID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiBkaXYgJiYgKG9iamRuc2xpc3QgPSBldmFsKHR4dCkpICE9IG51bGwgCiAgICAgICAgICAgICAgICAgICAgJiYgKGRuc2xpc3QgPSBvYmpkbnNsaXN0WydkbnNsaXN0J10pKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc2V0RE5TTGlzdCgpOyAKICAgICAgICAgICAgICAgICAgICB2YXIgaG9zdGlkID0gLTE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGhvc3QgPSAiIjsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gLTE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSAiPHVsIGNsYXNzPSdkbnMtdWwnPiI7CiAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gZG5zbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RpZCA9IHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QgPSAgZG5zbGlzdFt4XVsnaG9zdCddOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSBkbnNsaXN0W3hdWydzdGF0dXMnXTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdkbnMtbGknIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywgJ2Rucy1saScpXCIgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ2Rucy1saS1zZWxlY3RlZCcpXCIgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzID4gMCkgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J3N0YXR1c19lcnInPuacieaViDwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlICBodG1sc3RyICs9ICI8c3BhbiBjbGFzcz0nc3RhdHVzX29rJz7lpLHmlYg8L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2VkZWxldGUnIHRpdGxlPSdEZWxldGUnICI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIm9uY2xpY2s9XCJEZWxldGVETlMoIitob3N0aWQrIiwgJyIraG9zdCsiJylcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQWRkRE5TKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBob3N0ID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAoaG9zdCA9IGZvcm1bJ2hvc3QnXS52YWx1ZSkgCiAgICAgICAgICAgICAgICAgICAgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9ZG5zX2FkZCZob3N0PSIraG9zdDsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2RucycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93RE5TKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVETlMoaG9zdGlkLCBob3N0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoaG9zdGlkID49IDAgJiYgaG9zdAogICAgICAgICAgICAgICAgICAgICYmIGNvbmZpcm0oIuaCqOehruiupOWIoOmZpEROU1siK2hvc3QrIl0gPyIpCiAgICAgICAgICAgICAgICAgICAgJiYoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1kbnNfZGVsZXRlJmhvc3RpZD0iK2hvc3RpZCsiJmhvc3Q9Iitob3N0OwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvZG5zZGVsJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93RE5TKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0RE5TKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOyAKICAgICAgICAgICAgICAgIGlmKCh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPWRuc19saXN0IjsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2Ruc2xpc3QnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dETlMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFJlc2V0SHR0cEhlYWRlcnMoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWydodHRwLWhlYWRlcnMtZm9ybSddOwogICAgICAgICAgICAgICAgaWYoZm9ybSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBmb3JtWydoZWFkZXJzJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICBmb3JtWydoZWFkZXJzJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93SHR0cEhlYWRlcnModHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeGxpc3QgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1snaHR0cC1oZWFkZXJzLWZvcm0nXTsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiBmb3JtICYmICh4bGlzdCA9IGV2YWwodHh0KSkgIT0gbnVsbCAmJiB4bGlzdFsnaGVhZGVycyddKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZvcm1bJ2hlYWRlcnMnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIGZvcm1bJ2hlYWRlcnMnXS52YWx1ZT0gYmFzZTY0ZGVjb2RlKHhsaXN0WydoZWFkZXJzJ10pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEF1dG9IdHRwSGVhZGVycygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZigoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1oZWFkZXJfYXV0byI7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9oZWFkZXJzJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dIdHRwSGVhZGVycyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFNldEh0dHBIZWFkZXJzKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAoaGVhZGVycyA9IGZvcm1bJ2hlYWRlcnMnXS52YWx1ZSkgCiAgICAgICAgICAgICAgICAgICAgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSAiIjsKICAgICAgICAgICAgICAgICAgICBpZigoYXJyID0gaGVhZGVycy5zcGxpdCgiXG4iKSkgJiYgYXJyLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgKz0gYmFzZTY0ZW5jb2RlKGFycltpXSkrInwiOyAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1oZWFkZXJfc2V0JmhlYWRlcnM9IitsaW5lOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvaGVhZGVycycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93SHR0cEhlYWRlcnMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBHZXRIdHRwSGVhZGVycygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZigoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1oZWFkZXJfZ2V0IjsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnL2hlYWRlcnMnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dIdHRwSGVhZGVycyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gUmVzZXRQcm94eUxpc3QoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWydwcm94eS1hZGQtZm9ybSddOwogICAgICAgICAgICAgICAgaWYoZm9ybSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBmb3JtWydob3N0J10uZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICBmb3JtWydob3N0J10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBTaG93UHJveHkodHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb3h5LWxpc3QnKTsKICAgICAgICAgICAgICAgIHZhciBwcm94eWxpc3QgPSBudWxsOwogICAgICAgICAgICAgICAgaWYodHh0ICYmIGRpdiAmJiAocHJveHlsaXN0ID0gZXZhbCh0eHQpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFJlc2V0UHJveHlMaXN0KCk7IAogICAgICAgICAgICAgICAgICAgIHZhciBob3N0aWQgPSAtMTsKICAgICAgICAgICAgICAgICAgICB2YXIgaG9zdCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSAtMTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbHN0ciA9ICI8dWwgY2xhc3M9J3Byb3h5LXVsJz4iOwogICAgICAgICAgICAgICAgICAgIGZvcih4IGluIHByb3h5bGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RpZCA9IHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QgPSAgcHJveHlsaXN0W3hdWydob3N0J107CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHByb3h5bGlzdFt4XVsnc3RhdHVzJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0ncHJveHktbGknIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywgJ3Byb3h5LWxpJylcIiAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW1vdmU9XCJvbkRpdih0aGlzLCAncHJveHktbGktc2VsZWN0ZWQnKVwiID4iOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9IGhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXR1cyA+IDApIGh0bWxzdHIgKz0gIuacieaViCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgIGh0bWxzdHIgKz0gIuWkseaViCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlZGVsZXRlJyB0aXRsZT0nRGVsZXRlJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiRGVsZXRlUHJveHkoIitob3N0aWQrIiwgJyIraG9zdCsiJylcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEFkZFByb3h5KGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBob3N0ID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoZm9ybSA9PSBudWxsIHx8IChob3N0PWZvcm1bJ2hvc3QnXS52YWx1ZSkgPT0gIiIgfHwgaG9zdC5pbmRleE9mKCc6JykgPD0gMCkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+S7o+eQhuacjeWKoeWZqOagvOW8j+S4ujoyMDIuMTA2LjAuMjA6ODg4OCcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGhvc3QgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9cHJveHlfYWRkJmhvc3Q9Iitob3N0OwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvcHJveHlhZGQnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1Byb3h5KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVQcm94eShob3N0aWQsIGhvc3QpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsgCiAgICAgICAgICAgICAgICBpZihob3N0aWQgPj0gMCAmJiBob3N0CiAgICAgICAgICAgICAgICAgICAgJiYgY29uZmlybSgi5oKo56Gu6K6k5Yig6Zmk5Luj55CGWyIraG9zdCsiXSA/IikKICAgICAgICAgICAgICAgICAgICAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD1wcm94eV9kZWxldGUmaG9zdGlkPSIraG9zdGlkKyImaG9zdD0iK2hvc3Q7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9wcm94eWRlbCcsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvd1Byb3h5KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMaXN0UHJveHkoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7IAogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9cHJveHlfbGlzdCI7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy9wcm94eWxpc3QnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3dQcm94eSh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICA8L3NjcmlwdD4KICAgIDwvaGVhZD4KIDxib2R5IG9ubG9hZD0namF2YXNjcmlwdDpsb2FkVGFza0luZm8oKTsnPgogIDxkaXYgaWQ9J21haW5mcmFtZSc+CiAgICA8ZGl2IGlkPSdpdGFiJz4KICAgICAgICA8dWw+CiAgICAgICAgPGxpIGNsYXNzPSd0YWItc2VsZWN0ZWQnIGlkPSd0YWIwJyBvbmNsaWNrPSJzZWxlY3RWaWV3KCd0YXNraW5mbycsZXZlbnQpIiA+6L+Q6KGM54q25oCBPC9saT4KICAgICAgICA8bGkgaWQ9J3RhYjEnIG9uY2xpY2s9InNlbGVjdFZpZXcoJ2RhdGFiYXNlJyxldmVudCkiID7mlbDmja7lupPphY3nva48L2xpPgogICAgICAgIDxsaSBpZD0ndGFiMicgb25jbGljaz0ic2VsZWN0VmlldygndGVtcGxhdGUnLCBldmVudCkiID7mqKHniYjphY3nva48L2xpPgogICAgICAgIDxsaSBpZD0ndGFiMycgb25jbGljaz0ic2VsZWN0VmlldygndXJsYmxvY2snLCBldmVudCkiID5VUkznrqHnkIY8L2xpPgogICAgICAgIDxsaSBpZD0ndGFiNCcgb25jbGljaz0ic2VsZWN0VmlldygnZG5zJywgZXZlbnQpIiA+RE5T566h55CGPC9saT4KICAgICAgICA8bGkgaWQ9J3RhYjUnIG9uY2xpY2s9InNlbGVjdFZpZXcoJ3Byb3h5JywgZXZlbnQpIiA+5Luj55CG6K6+572uPC9saT4KICAgICAgICA8bGkgaWQ9J3RhYjYnIG9uY2xpY2s9InNlbGVjdFZpZXcoJ2h0dHB4JywgZXZlbnQpIiA+SFRUUOiuvue9rjwvbGk+CiAgICAgICAgPCEtLTxsaSBpZD0ndGFiNycgb25jbGljaz0ic2VsZWN0VmlldygndXNlcicsIGV2ZW50KSIgPueUqOaIt+euoeeQhjwvbGk+IC0tPgogICAgICAgIDwvdWw+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3Rhc2tpbmZvJz48L2Rpdj4KICAgIDxkaXYgaWQ9J2RhdGFiYXNlJz4KICAgICAgICA8dGFibGUgd2lkdGg9MTAwJSBoZWlnaHQ9MTAwJSBjZWxsc3BhY2luZz0wIGJvcmRlcj0wIHZhbGlnbj10b3AgYWxpZ249bGVmdCA+CiAgICAgICAgPHRyPgogICAgICAgIDx0ZCBjbGFzcz0nZGJsaXN0JyB2YWxpZ249dG9wIHdpZHRoPTMwMCBoZWlnaHQ9MTAwJSA+CiAgICAgICAgICAgIDx0YWJsZSBjZWxsc3BhY2luZz0wIGJvcmRlcj0wIHZhbGlnbj10b3AgYWxpZ249bGVmdCB3aWR0aD0xMDAlID4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj10b3AgY2xhc3M9J2RidGl0bGUnIHdpZHRoPTEwMCUgPgogICAgICAgICAgICAgICAg54K55Ye7PHNwYW4gY2xhc3M9J2VhZGQnIHRpdGxlPSdBZGQnIG9uY2xpY2s9J0RCWEFkZChldmVudCknPiDinJogPC9zcGFuPua3u+WKoOaVsOaNruihqDwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj10b3Agd2lkdGg9MTAwJSA+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nZGJzZWxlY3QnPjwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICA8L3RkPgogICAgICAgIDx0ZCB2YWxpZ249dG9wIGFsaWduPWxlZnQgY2VsbHNwYWNpbmc9MCBib3JkZXI9MCA+CiAgICAgICAgPGRpdiBpZD0ndGFibGV2aWV3Jz4KICAgICAgICA8ZGl2IGlkPSdkYmVkaXRmb3JtJz4KICAgICAgICA8Zm9ybSBuYW1lPSJkYmVkaXRmb3JtIiBjbGFzcz0nbGlzdGZvcm0nIGFjdGlvbj0iamF2YXNjcmlwdDp2b2lkKDApIiAKICAgICAgICAgICAgb25zdWJtaXQ9InJldHVybiBFZGl0RmllbGQodGhpcyk7Ij4gCiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J2ZpZWxkX2FkZCcgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmllbGRpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb2xkbmFtZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndHlwZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmxhZycgdmFsdWU9JycgPgogICAgICAgICAgICDmlbDmja7ooahbPHNwYW4gaWQ9J3RhYm5hbWUnIGNsYXNzPSdobGlnaHQnPjwvc3Bhbj5dCiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICDlrZfmrrXlkI06PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J25hbWUnIGNsYXNzPSd0eHRpbnB1dCcgc2l6ZT0yND4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIOexu+Weizo8c2VsZWN0IG5hbWU9J2Z0eXBlJyA+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxJz5pbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzInPmRvdWJsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nNCcgc2VsZWN0ZWQ+dGV4dDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nOCc+bG9uZzwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2luZGV4JyB2YWx1ZT0zMiA+57Si5byVCiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J29rJyBjbGFzcz0nc3VibWl0JyA+CiAgICAgICAgPC9mb3JtPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9J2RiZmllbGRzJz48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8L3RkPgogICAgICAgIDwvdHI+CiAgICAgICAgPC90YWJsZT4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ndGVtcGxhdGUnPgogICAgPHRhYmxlIGNlbGxzcGFjaW5nPTAgYm9yZGVyPTAgdmFsaWduPXRvcCBhbGlnbj1sZWZ0IGNsYXNzPSd0ZW1wbGF0ZS10YWInID4KICAgICAgICA8dHI+CiAgICAgICAgPHRkIGNlbGxzcGFjaW5nPTAgYm9yZGVyPTAgdmFsaWduPXRvcCBhbGlnbj1sZWZ0IGhlaWdodD0xMDAlIHdpZHRoPTMwMCBjbGFzcz0ndHJlZXRhYic+CiAgICAgICAgICAgIDxkaXYgaWQ9J3RyZWUtdGl0bGUnPuaKk+WPluagkeeUqOS6juaMh+WvvOeIrOiZq+eahOeIrOWPlui3r+W+hDwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSd0cmVlYm9keScgbGV2ZWw9JzAnPjwvZGl2PgogICAgICAgIDwvdGQ+CiAgICAgICAgPHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjZWxsc3BhY2luZz0wIGJvcmRlcj0wIGNsYXNzPSd0ZW1wdGFiJz4KICAgICAgICAgICAgICA8ZGl2IGlkPSd0ZW1wbGF0ZS10aXRsZSc+5qih54mI55So5LqO5oq95Y+W6Ieq5bex6ZyA6KaB55qE5pWw5o2uPC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBpZD0nbm9kZS10ZW1wbGF0ZSc+PC9kaXY+CiAgICAgICAgICAgICAgPGRpdiBpZD0neHRlbXBsYXRlZm9ybSc+CiAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKTsnIG5hbWU9J3VybGZvcm0nIG9uc3VibWl0PSdyZXR1cm4gTG9hZFVSTCh0aGlzKTsnPgogICAgICAgICAgICAgICAgPGRpdiBpZD11cmxmb3JtID4KICAgICAgICAgICAgICAg6K+36L6T5YWl5Zyw5Z2AOjxpbnB1dCB0eXBlPXRleHQgc2l6ZT0nNjQnIG5hbWU9J3VybCc+CiAgICAgICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9J21ldGhvZCcgdmFsdWU9JzAnIGNoZWNrZWQ+R0VUCiAgICAgICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9J21ldGhvZCcgdmFsdWU9JzEnPlBPU1QKICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSforr/pl64nPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSdzb3VyY2VfY29kZV9vcCc+CiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3NvdXJjZV92aWV3Jz48L2Rpdj4KICAgICAgICAgICAgICAgICAgPCEtLTxkaXYgaWQ9J3NvdXJjZV9vcCc+PC9kaXY+LS0+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3RlbXBsYXRlZGl2Jz4KICAgICAgICAgICAgICAgIDxmb3JtIG5hbWU9InRlbXBsYXRlZm9ybSIgYWN0aW9uPSJqYXZhc2NyaXB0OnZvaWQoMCkiID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J3RlbXBsYXRlX2FkZCcgPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25vZGVpZCcgdmFsdWU9Jy0xJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGVtcGxhdGVpZCcgdmFsdWU9Jy0xJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9Jy0xJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmxhZycgdmFsdWU9JzAnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSduZmllbGRzJyB2YWx1ZT0nLTEnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdtYXAnIHZhbHVlPScnID4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdsaW5rbWFwJyB2YWx1ZT0nJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndXJsJyB2YWx1ZT0nJyA+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbWV0aG9kJyB2YWx1ZT0nJyA+CiAgICAgICAgICAgICAgICDku6PnoIE6PHRleHRhcmVhIG5hbWU9J2NvZGUnIHJvd3M9MTggIGNvbHM9MTIwPjwvdGV4dGFyZWE+IAogICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAg5qih54mIOjx0ZXh0YXJlYSBuYW1lPSdwYXR0ZXJuJyByb3dzPTQgIGNvbHM9MTIwPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICA8c3BhbiBhbGlnbj1jZW50ZXI+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX3N1YicgPue7k+aenOS6jOasoeWMuemFjQogICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPSdpc19nbG9iYWwnID7ph43lpI3ljLnphY3lpJrmnaEKICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfaWdub3JlY2FzZScgPuW/veeVpeWkp+Wwj+WGmQogICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9J2xpbmtfdGFibGUnIG9uY2hhbmdlPSJjaGFuZ2VUYWJsZSh0aGlzLmZvcm0sICdsaW5rX2ZpZWxkJywgdGhpcykiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7mlbDmja7ooag8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nYnV0dG9uJyB2YWx1ZT0n5qih5p2/5rWL6K+VJyBvbmNsaWNrPSJUZXN0VGVtcGxhdGUodGhpcy5mb3JtKSI+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdidXR0b24nIHZhbHVlPSfnoa7orqTmqKHmnb8nIG9uY2xpY2s9IkNvbmZpZ1RlbXBsYXRlKHRoaXMuZm9ybSkiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ndGVtcGxhdGUtYmFyJz7nlKjkuo7mi7zmjqXpmpDol4/nmoTpk77mjqXlkoxBamF45YaF5a655Z2X5Zyw5Z2APC9kaXY+CiAgICAgICAgICAgICAgICBVUkzop4TliJk6PGlucHV0IHR5cGU9dGV4dCBuYW1lPSdsaW5rJyB2YWx1ZT0nJyBzaXplPTQ4PgogICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nYnV0dG9uJyB2YWx1ZT0n5rWL6K+VJyBvbmNsaWNrPSJUZXN0VGVtcGxhdGUodGhpcy5mb3JtKSI+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdidXR0b24nIHZhbHVlPSfnoa7orqQnIG9uY2xpY2s9IkVkaXRMaW5rKHRoaXMuZm9ybSk7Ij4KICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9J2xpbmtfbWV0aG9kJyB2YWx1ZT0nMCcgY2hlY2tlZD5HRVQKICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9cmFkaW8gbmFtZT0nbGlua19tZXRob2QnIHZhbHVlPScxJz5QT1NUCiAgICAgICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPSfliJfooajpobXkvJrlrprmnJ/mm7TmlrAnPjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2xpbmtfbGlzdCcgPuWIl+ihqOmhtTwvc3Bhbj4KICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSdsaW5rX2ZpZWxkJyA+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuWtl+autTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0nbGlua19ub2RlJyA+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuWtkOiKgueCuTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPgogICAgICAgPC90YWJsZT4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ndXJsYmxvY2snPgogICAgPGRpdiBpZD0ndXJsLWhlYWRlcic+CiAgICA8Zm9ybSBuYW1lPSd1cmxibG9ja2Zvcm0nIGNsYXNzPSdsaXN0Zm9ybScgYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCknIAogICAgICAgICAgICBvbnN1Ym1pdD0ncmV0dXJuIEFkZE5vZGVVUkwodGhpcyknID4KICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCd2YWx1ZT0ndXJsX2FkZCcgPgogICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J3BhcmVudGlkJyB2YWx1ZT0nMCcgPgogICAgJm5ic3A7Jm5ic3A7CiAgICA8c2VsZWN0IG5hbWU9J25vZGVpZCcgb25jaGFuZ2U9J0xpc3ROb2RlVVJMcyh0aGlzLmZvcm0sICJub2RlaWQiKSc+CiAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+6YCJ5oup56uZ54K5PC9vcHRpb24+CiAgICA8L3NlbGVjdD4KICAgIDwhLS0KICAgICZuYnNwOyZuYnNwOwogICAgPHNlbGVjdCBuYW1lPSdjaGlsZHMnIG9uY2hhbmdlPSdMaXN0Tm9kZVVSTHModGhpcy5mb3JtLCAiY2hpbGRzIiknPgogICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPumAieaLqeWtkOiKgueCuTwvb3B0aW9uPgogICAgPC9zZWxlY3Q+CiAgICAhLS0+CiAgICAmbmJzcDsmbmJzcDsKICAgIDxzZWxlY3QgbmFtZT0nbWV0aG9kJz4KICAgIDxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7or7fmsYLmlrnms5U8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9JzAnID5HRVQ8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9JzEnID5QT1NUPC9vcHRpb24+CiAgICA8L3NlbGVjdD4KICAgICZuYnNwOyZuYnNwOwogICAgPHNlbGVjdCBuYW1lPSdsZXZlbCcgPgogICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuS8mOWFiOe6pzwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0nMCcgPuaZrumAmjwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0nMScgPue0p+aApTwvb3B0aW9uPgogICAgPC9zZWxlY3Q+CiAgICAmbmJzcDsmbmJzcDsKICAgIDxpbnB1dCB0eXBlPXRleHQgbmFtZT11cmwgc2l6ZT00OCB2YWx1ZT0naHR0cDovLycgb25tb3VzZW92ZXI9InRoaXMuc2VsZWN0KCkiID4KICAgICZuYnNwOyZuYnNwOwogICAgPGlucHV0IHR5cGU9c3VibWl0IG5hbWU9J3N1Ym1pdCcgdmFsdWU9J0FkZCc+CiAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3VybC1saXN0Jz48L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0nZG5zJz4KICAgIDxkaXYgaWQ9J2Rucy1oZWFkZXInPgogICAgPGZvcm0gbmFtZT0nZG5zLWFkZC1mb3JtJyBjbGFzcz0nbGlzdGZvcm0nIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyAKICAgICAgICAgICAgb25zdWJtaXQ9J3JldHVybiBBZGRETlModGhpcyknPgogICAg5re75YqgRE5TOjxpbnB1dCB0eXBlPXRleHQgbmFtZT0naG9zdCcgc2l6ZT00OCB2YWx1ZT0nJyA+CiAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J29rJz4KICAgIDwvZm9ybT4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0nZG5zLWxpc3QnPjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdwcm94eSc+CiAgICA8ZGl2IGlkPSdwcm94eS1oZWFkZXInPgogICAgPGZvcm0gbmFtZT0ncHJveHktYWRkLWZvcm0nIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyBvbnN1Ym1pdD0ncmV0dXJuIEFkZFByb3h5KHRoaXMpJz4KICAgIOa3u+WKoOS7o+eQhjo8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J2hvc3QnIHNpemU9NDggdmFsdWU9JycgPgogICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdvayc+CiAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3Byb3h5LWxpc3QnPjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdodHRweCc+CiAgICA8ZGl2IGlkPSdodHRweC1oZWFkZXInPgogICAgICAgIOiHquWumuS5iUhUVFDor7fmsYLlpLQgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgPGlucHV0IHR5cGU9YnV0dG9uIHZhbHVlPSfoh6rliqjor4bliKvmtY/op4jlmajlpLTmlofku7YnIG9uY2xpY2s9IkF1dG9IdHRwSGVhZGVycygpIj4KICAgIDwvZGl2PgogICAgPGZvcm0gbmFtZT0naHR0cC1oZWFkZXJzLWZvcm0nIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyBvbnN1Ym1pdD0ncmV0dXJuIFNldEh0dHBIZWFkZXJzKHRoaXMpJz4KICAgIDx0ZXh0YXJlYSB0eXBlPXRleHQgbmFtZT0naGVhZGVycycgcm93cz0yNCBjb2xzPTEyMCB2YWx1ZT0nJyA+PC90ZXh0YXJlYT4KICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nb2snPgogICAgPC9mb3JtPgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0nZGF0YSc+PC9kaXY+CiAgICA8ZGl2IGlkPSd1c2VyJz48L2Rpdj4KPC9kaXY+CiAgICA8ZGl2IGlkPSd0eHRmb3JtJz4KICAgICAgICA8dGFibGUgd2lkdGg9MTAwJSA+PHRyPjx0ZCBhbGlnbj1sZWZ0ID4KICAgICAgICA8c3BhbiBjbGFzcz0nY2xvc2V0eHQnIG9uY2xpY2s9IkNsb3NlVGhpc1RhYmxlKHRoaXMpIiA+5YWz6ZetPC9zcGFuPgogICAgICAgIDwvdGQ+CiAgICAgICAgPGZvcm0gbmFtZT0iZWRpdG9yZm9ybSIgY2xhc3M9J2xpc3Rmb3JtJyBhY3Rpb249ImphdmFzY3JpcHQ6dm9pZCgwKSIgb25zdWJtaXQ9InJldHVybiBFZGl0Tm9kZSh0aGlzKTsiPiAKICAgICAgICA8dGQ+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J25vZGVfYWRkJyA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdub2RlaWQnIHZhbHVlPScwJyA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdwaWQnIHZhbHVlPScwJyA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdub2RlbmFtZScgY2xhc3M9J3R4dGlucHV0JyBzaXplPTI0PgogICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdvaycgY2xhc3M9J3N1Ym1pdCcgPgogICAgICAgIDwvdGQ+CiAgICAgICAgPC9mb3JtPgogICAgICAgIDx0ZCBhbGlnbj1yaWdodCA+CiAgICAgICAgPHNwYW4gdGl0bGU9J+eCueWHu+WFs+mXrScgY2xhc3M9J2Nsb3NlYnV0dG9uJyBvbmNsaWNrPSJDbG9zZVRoaXNUYWJsZSh0aGlzKSI+4pWzPC9zcGFuPgogICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdkYmZvcm0nPgogICAgICAgIDx0YWJsZSB3aWR0aD0xMDAlID48dHI+PHRkIGFsaWduPWxlZnQgPgogICAgICAgIDxzcGFuIGNsYXNzPSdjbG9zZXR4dCcgb25jbGljaz0iQ2xvc2VUaGlzVGFibGUodGhpcykiID7lhbPpl608L3NwYW4+CiAgICAgICAgPC90ZD4KICAgICAgICA8Zm9ybSBuYW1lPSJ4ZGJmb3JtIiBjbGFzcz0nbGlzdGZvcm0nIGFjdGlvbj0iamF2YXNjcmlwdDp2b2lkKDApIiBvbnN1Ym1pdD0icmV0dXJuIEVkaXREQih0aGlzKTsiPiAKICAgICAgICA8dGQ+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J3RhYmxlX2FkZCcgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9JzAnID4KICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J25hbWUnIGNsYXNzPSd0eHRpbnB1dCcgc2l6ZT0xOD4KICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nb2snIGNsYXNzPSdzdWJtaXQnID4KICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgPC90ZD4KICAgICAgICA8L2Zvcm0+CiAgICAgICAgPHRkICBhbGlnbj1yaWdodCA+CiAgICAgICAgPHNwYW4gdGl0bGU9J+eCueWHu+WFs+mXrScgY2xhc3M9J2Nsb3NlYnV0dG9uJyBvbmNsaWNrPSJDbG9zZVRoaXNUYWJsZSh0aGlzKSI+4pWzPC9zcGFuPgogICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSdkYmZpZWxkZm9ybSc+CiAgICAgICAgPHRhYmxlIHdpZHRoPTEwMCUgPjx0cj48dGQgYWxpZ249bGVmdCA+CiAgICAgICAgPHNwYW4gY2xhc3M9J2Nsb3NldHh0JyBvbmNsaWNrPSJDbG9zZVRoaXNUYWJsZSh0aGlzKSIgPuWFs+mXrTwvc3Bhbj4KICAgICAgICA8L3RkPgogICAgICAgIDxmb3JtIG5hbWU9ImRiZmllbGRmb3JtIiBjbGFzcz0nbGlzdGZvcm0nIGFjdGlvbj0iamF2YXNjcmlwdDp2b2lkKDApIiBvbnN1Ym1pdD0icmV0dXJuIEVkaXRGaWVsZCh0aGlzKTsiPiAKICAgICAgICA8dGQ+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdvcCcgdmFsdWU9J3RhYmxlX2FkZCcgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndGFibGVpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmllbGRpZCcgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb2xkbmFtZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0ndHlwZScgdmFsdWU9JycgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZmxhZycgdmFsdWU9JycgPgogICAgICAgICAgICDlrZfmrrXlkI06PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J25hbWUnIGNsYXNzPSd0eHRpbnB1dCcgc2l6ZT0yND4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIOexu+Weizo8c2VsZWN0IG5hbWU9J2Z0eXBlJyA+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxJz5pbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzInPmRvdWJsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nNCcgc2VsZWN0ZWQ+dGV4dDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nOCc+bG9uZzwvb3B0aW9uPgogICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9J2lzX2luZGV4JyB2YWx1ZT0zMiA+57Si5byVCiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8IS0tPGlucHV0IHR5cGU9Y2hlY2tib3ggbmFtZT0naXNfbnVsbCcgdmFsdWU9MTYgPuWFgeiuuOS4uuepuiAtLSE+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0nb2snIGNsYXNzPSdzdWJtaXQnID4KICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgPC90ZD4KICAgICAgICA8L2Zvcm0+CiAgICAgICAgPHRkIGFsaWduPXJpZ2h0PgogICAgICAgICAgICA8c3BhbiB0aXRsZT0n54K55Ye75YWz6ZetJyBjbGFzcz0nY2xvc2VidXR0b24nIG9uY2xpY2s9IkNsb3NlVGhpc1RhYmxlKHRoaXMpIj7ilbM8L3NwYW4+CiAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPgogICAgICAgIDwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3VybGxpc3QtZm9ybSc+CiAgICAgICAgPHRhYmxlIHdpZHRoPTEwMCUgPjx0cj48dGQgYWxpZ249bGVmdCA+CiAgICAgICAgPHNwYW4gY2xhc3M9J2Nsb3NldHh0JyBvbmNsaWNrPSJDbG9zZVRoaXNUYWJsZSh0aGlzKSIgPuWFs+mXrTwvc3Bhbj4KICAgICAgICA8L3RkPgogICAgICAgIDxmb3JtIG5hbWU9InVybGxpc3QtYWRkLWZvcm0iIGNsYXNzPSdsaXN0Zm9ybScgYWN0aW9uPSJqYXZhc2NyaXB0OnZvaWQoMCkiIAogICAgICAgICAgICBvbnN1Ym1pdD0icmV0dXJuIEFkZE5vZGVVUkwodGhpcyk7Ij4gCiAgICAgICAgPHRkPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb3AnIHZhbHVlPSd1cmxfYWRkJyA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSdwYXJlbnRpZCcgdmFsdWU9JzAnID4KICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSdtZXRob2QnPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPuivt+axguaWueazlTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMCcgPkdFVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMScgPlBPU1Q8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8c2VsZWN0IG5hbWU9J2xldmVsJyA+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSctMScgc2VsZWN0ZWQ+5LyY5YWI57qnPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScwJyA+5pmu6YCaPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxJyA+57Sn5oClPC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSdub2RlaWQnID4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7pgInmi6nlrZDoioLngrk8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOwogICAgICAgICAgICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsKICAgICAgICAgICAgPGhyPgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgVVJMOjxpbnB1dCB0eXBlPXRleHQgbmFtZT11cmwgc2l6ZT00OCB2YWx1ZT0naHR0cDovLycgb25tb3VzZW92ZXI9InRoaXMuc2VsZWN0KCkiPgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IG5hbWU9J3N1Ym1pdCcgdmFsdWU9J0FkZCc+PGJyPgogICAgICAgICAgICA8aHI+CiAgICAgICAgICAgIGh0dHA6Ly9hYmMuY29tL2xpc3QvWzEtNDg3Nl0uaHRtbCAmbmJzcDsmbmJzcDtodHRwOi8vYWJjLmNvbS8wMGxpc3QvWzEtNDg3Nl17Mn0uaHRtbDxicj4KICAgICAgICAgICAgaHR0cDovL2FiYy5jb20vYWJjbGlzdC9bYS16XS5odG1sICZuYnNwOyZuYnNwO2h0dHA6Ly9hYmMuY29tL2FhYWxpc3QvW2Etel17M30uaHRtbAogICAgICAgIDwvdGQ+CiAgICAgICAgPC9mb3JtPgogICAgICAgIDx0ZCBhbGlnbj1yaWdodD4KICAgICAgICAgICAgPHNwYW4gdGl0bGU9J+eCueWHu+WFs+mXrScgY2xhc3M9J2Nsb3NlYnV0dG9uJyBvbmNsaWNrPSJDbG9zZVRoaXNUYWJsZSh0aGlzKSI+4pWzPC9zcGFuPgogICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8aWZyYW1lIGlkPSdiZnJhbWUnIGZyYW1lYm9yZGVyPTAgPjwvaWZyYW1lPgogICAgPC9ib2R5Pgo8L2h0bWw+Cg==";
#endif
